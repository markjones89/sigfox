[{"id":"fa40001c.4d62c","type":"tab","label":"SIGFOX","disabled":false,"info":""},{"id":"9f2f3e0.64ecbc","type":"tab","label":"Meeting Rooms to RIo","disabled":false,"info":""},{"id":"67acb05d.f4a47","type":"tab","label":"Load Test","disabled":false,"info":""},{"id":"fd6b1e47.3eff","type":"tab","label":"DNB","disabled":false,"info":""},{"id":"c7a11946.e1ad18","type":"tab","label":"Intuitive backend","disabled":false,"info":""},{"id":"73c8658d.47d70c","type":"tab","label":"TTN RIO","disabled":false,"info":""},{"id":"ffc755bb.4c2a08","type":"tab","label":"WIPRO INDIA","disabled":false,"info":""},{"id":"c29b0066.5accc","type":"tab","label":"D4 PIR SENSOR","disabled":false,"info":""},{"id":"4b2aeae5.cb1744","type":"subflow","name":"Netflix 25 seat","info":"","category":"","in":[{"x":460,"y":460,"wires":[{"id":"c7824a50.1a0128"}]}],"out":[{"x":3040,"y":680,"wires":[{"id":"512ead50.b4be54","port":0},{"id":"50303d55.a20564","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"46798068.c0b51","type":"subflow","name":"25 seats part 1","info":"","category":"","in":[{"x":140,"y":280,"wires":[{"id":"65a43617.166ad8"}]}],"out":[{"x":1080,"y":120,"wires":[{"id":"9d8dfc35.c697e","port":0}]},{"x":1080,"y":180,"wires":[{"id":"66af099a.4138c8","port":0}]},{"x":1080,"y":220,"wires":[{"id":"d7d00993.925288","port":0}]},{"x":1080,"y":260,"wires":[{"id":"180b211a.85a1af","port":0}]},{"x":1080,"y":300,"wires":[{"id":"24c0d129.bf06be","port":0}]},{"x":1080,"y":340,"wires":[{"id":"78ca1e70.6a1f7","port":0}]},{"x":1080,"y":380,"wires":[{"id":"651b96b4.3bd638","port":0}]},{"x":1080,"y":420,"wires":[{"id":"fb9a1574.874a18","port":0}]},{"x":1080,"y":460,"wires":[{"id":"cb97aaaa.613478","port":0}]},{"x":1080,"y":500,"wires":[{"id":"38f8fc12.b1bef4","port":0}]},{"x":1080,"y":540,"wires":[{"id":"ebb3ff5d.167d","port":0}]},{"x":1080,"y":580,"wires":[{"id":"1cb54ce4.34adf3","port":0}]},{"x":1080,"y":620,"wires":[{"id":"48bb19a1.92ff48","port":0}]},{"x":1080,"y":660,"wires":[{"id":"fe877ee1.6bd17","port":0}]},{"x":1080,"y":700,"wires":[{"id":"f367c1a6.3ba54","port":0}]},{"x":1080,"y":740,"wires":[{"id":"7548e7a8.14e258","port":0}]},{"x":1080,"y":780,"wires":[{"id":"1344d077.2c855","port":0}]},{"x":1080,"y":820,"wires":[{"id":"ff9b769c.ecf858","port":0}]},{"x":1080,"y":860,"wires":[{"id":"e62a3ecf.de539","port":0}]},{"x":1080,"y":900,"wires":[{"id":"4e175176.540e4","port":0}]},{"x":1080,"y":940,"wires":[{"id":"a61ee9b4.c8ed18","port":0}]},{"x":1080,"y":980,"wires":[{"id":"f1e1693a.cde348","port":0}]},{"x":1080,"y":1020,"wires":[{"id":"709d5f2f.7a1a1","port":0}]},{"x":1080,"y":1060,"wires":[{"id":"e46a2344.fb6d6","port":0}]},{"x":1080,"y":1100,"wires":[{"id":"78353c3f.17ef44","port":0}]},{"x":1080,"y":1140,"wires":[{"id":"87ed1c47.218b9","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"b0a581b4.d0b4","type":"subflow","name":"Neflix avai and inuse","info":"","category":"","in":[{"x":160,"y":240,"wires":[{"id":"afddbcd2.f6d2d"},{"id":"779f337c.561a1c"}]}],"out":[{"x":820,"y":220,"wires":[{"id":"33811d8e.167fd2","port":0}]},{"x":820,"y":260,"wires":[{"id":"cfc013c7.e0768","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"23f53201.933a8e","type":"subflow","name":"Subflow 1","info":"","in":[],"out":[]},{"id":"d4c1508c.e4cb9","type":"subflow","name":"Subflow 2","info":"","in":[{"x":50,"y":30,"wires":[{"id":"4ce397ca.74e018"}]}],"out":[{"x":1180,"y":120,"wires":[{"id":"74d024f5.4e2c7c","port":0}]}]},{"id":"eb916384.f7ba8","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"b52e9db1.a2156","type":"mqtt-broker","z":"","name":"senzo mqtt","broker":"mqtt.senzodata.com","port":"8883","tls":"","clientid":"","usetls":true,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"3ed354c1.9a37ac","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"413a504f.5b71b","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"c86e81a4.1f0aa","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"b4b61bae.4bb908","influxdbVersion":"1.x"},{"id":"c444329a.5d0ba","type":"mqtt-broker","z":"","name":"Senzo","broker":"mqtt.senzodata.com","port":"8883","tls":"2f0ace79.6edb42","clientid":"","usetls":true,"compatmode":true,"keepalive":"120","cleansession":true,"birthTopic":"","birthQos":"2","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"a7f22f58.09426","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"b4b61bae.4bb908","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"2f0ace79.6edb42","type":"tls-config","z":"","name":"senzo mark","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"50690598.5ad21c","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"14f6e8d8.154247","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"8305118f.b2b7f","influxdbVersion":"1.x"},{"id":"8305118f.b2b7f","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"a499db89.a8f7b8","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Cummins","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"e090df4e.859ac","type":"influxdb","z":"","hostname":"localhost","port":"8086","protocol":"https","database":"new_db","name":"","usetls":true,"tls":"31d4deec.8a1b42","influxdbVersion":"1.x"},{"id":"31d4deec.8a1b42","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"2a929df8.835752","type":"mqtt-broker","z":"","name":"cloud pow02","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"5a41bc82.b5a2a4","type":"influxdb","z":"","hostname":"localhost","port":"8086","protocol":"https","database":"new_db","name":"","usetls":true,"tls":"fa5aaff.ddc235","influxdbVersion":"1.x"},{"id":"fa5aaff.ddc235","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"ffd12b54.6a5e88","type":"influxdb","z":"","hostname":"35.224.129.148 ","port":"8086","protocol":"http","database":"switchfi","name":"sWItchFI","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"f8b772c5.8557d","type":"tls-config","z":"","name":"infogrid","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"2fee3ca0.0007e4","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"8f5267c4.56f788","influxdbVersion":"1.x"},{"id":"f19633f3.69888","type":"mqtt-broker","z":"","name":"Senzo","broker":"mqtt.senzodata.com","port":"8883","tls":"e85ce2fa.51882","clientid":"","usetls":true,"compatmode":true,"keepalive":"120","cleansession":true,"birthTopic":"","birthQos":"2","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"74b34956.219f28","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1a123d3f.53f7e3","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Cummins","usetls":false,"tls":"a5b51d85.d1a0e","influxdbVersion":"1.x"},{"id":"8f5267c4.56f788","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"e85ce2fa.51882","type":"tls-config","z":"","name":"senzo mark","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"a5b51d85.d1a0e","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"dff94b24.412bb8","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"c07ad774.acfea8","type":"mqtt-broker","z":"","name":"senzo mqtt","broker":"mqtt.senzodata.com","port":"8883","tls":"aa608f6c.1bd9","clientid":"","usetls":true,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"aa608f6c.1bd9","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"74dd2db.a831ed4","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4017dbdb.358a14","type":"mqtt-broker","z":"","name":"Senzo","broker":"mqtt.senzodata.com","port":"8883","tls":"2995696d.5d57b6","clientid":"","usetls":true,"compatmode":true,"keepalive":"120","cleansession":true,"birthTopic":"","birthQos":"2","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"9226d1ab.67cf5","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"df081c0.75d55e8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"2995696d.5d57b6","type":"tls-config","z":"","name":"senzo mark","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"859fb944.6ee798","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"cbbdc6cf.a2c3b8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"66798d0b.fb6c34","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"ac4987c4.dd80a8","type":"mqtt-broker","z":"","name":"cloud pow02","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"2c9d77ce.2d92e8","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"b6b1f5a2.77de78","type":"tls-config","z":"","name":"infogrid","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"f719b920.6ea548","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Cummins","usetls":false,"tls":"aa608f6c.1bd9","influxdbVersion":"1.x"},{"id":"30ffd9de.652456","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"disruptive","usetls":false,"tls":"aa608f6c.1bd9","influxdbVersion":"1.x"},{"id":"4e297514.50c2ac","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Switchfi","usetls":false,"tls":"aa608f6c.1bd9","influxdbVersion":"1.x"},{"id":"29d5b4ae.dc787c","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"bf8487b1.316768","type":"mqtt-broker","z":"","name":"senzo mqtt","broker":"mqtt.senzodata.com","port":"8883","tls":"d8a38.4e6aa5c88","clientid":"","usetls":true,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"a42e3c65.5a5ab","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"d8a38.4e6aa5c88","influxdbVersion":"1.x"},{"id":"d8a38.4e6aa5c88","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"5f637df7.21cfe4","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4a278a2b.487d04","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"6469d08f.3582e","influxdbVersion":"1.x"},{"id":"8a46dcb9.afd7","type":"mqtt-broker","z":"","name":"Senzo","broker":"mqtt.senzodata.com","port":"8883","tls":"891ad088.97ffc","clientid":"","usetls":true,"compatmode":true,"keepalive":"120","cleansession":true,"birthTopic":"","birthQos":"2","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"a963ebd1.4a7f38","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6469d08f.3582e","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"891ad088.97ffc","type":"tls-config","z":"","name":"senzo mark","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"890070c9.5d0c3","type":"mqtt-broker","z":"","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4e76be9d.89c72","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"disruptive","name":"Disruptive","usetls":false,"tls":"1d3b9db5.7d24f2","influxdbVersion":"1.x"},{"id":"1d3b9db5.7d24f2","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"64c7f77.69c6e08","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Cummins","usetls":false,"tls":"d8a38.4e6aa5c88","influxdbVersion":"1.x"},{"id":"f08304ad.10b768","type":"influxdb","z":"","hostname":"localhost","port":"8086","protocol":"https","database":"new_db","name":"","usetls":true,"tls":"a3b4d4ab.53f378","influxdbVersion":"1.x"},{"id":"a3b4d4ab.53f378","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"d482470f.96fb28","type":"mqtt-broker","z":"","name":"cloud pow02","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4042b7c0.90b2e8","type":"influxdb","z":"","hostname":"localhost","port":"8086","protocol":"https","database":"new_db","name":"","usetls":true,"tls":"1526237a.71a20d","influxdbVersion":"1.x"},{"id":"1526237a.71a20d","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"14b63884.9057a7","type":"influxdb","z":"","hostname":"35.224.129.148 ","port":"8086","protocol":"http","database":"switchfi","name":"sWItchFI","usetls":false,"tls":"d8a38.4e6aa5c88","influxdbVersion":"1.x"},{"id":"16692b0b.5c68e5","type":"tls-config","z":"","name":"infogrid","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"894940cf.d81a1","type":"soap-config","z":"","wsdl":"http://dashboard.infinity-iot.co.za/api.asmx?op=AuthEvtSen","auth":"0","user":"admin","pass":"M@rkmj1989","key":"","cert":"","token":""},{"id":"fb1189d8.7a3418","type":"mqtt-broker","z":"","name":"sWItchFimqtt","broker":"mqtt.switchfi.co.za","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"2","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d72c99e7.e5b118","type":"mqtt-broker","z":"","name":"sWItchFimqtt","broker":"mqtt.switchfi.co.za","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"2","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"2f24dc07.048f44","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Switchfi","usetls":false,"tls":"a3530ddb.7c642","influxdbVersion":"1.x"},{"id":"61f82d34.7e3184","type":"influxdb","z":"","hostname":"35.224.129.148","port":"8086","protocol":"http","database":"cummins","name":"Cummins","usetls":false,"tls":"c61c4a09.a7fae8","influxdbVersion":"1.x"},{"id":"a3530ddb.7c642","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"c61c4a09.a7fae8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"ecb9532c.90448","type":"websocket-listener","z":"","path":"/data","wholemsg":"false"},{"id":"50dd1a89.1bccb4","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"6d64698c.68fc38","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"CA_2019.cer","servername":"","verifyservercert":false},{"id":"d18599ea.349ef8","type":"websocket-listener","z":"","path":"ws/request","wholemsg":"true"},{"id":"4b0dd259.431b8c","type":"websocket-client","z":"","path":"ws://localhost:1880/ws/request","tls":"","wholemsg":"true"},{"id":"effc9835.adf488","type":"boxcar-credentials","z":"","name":"","api_key":"CwKB2LWabMJcSl3SCqlVuJeW_oErj3KZWoiYkBYKH9EPIaaegAdXdr-H3jAn0EtI"},{"id":"bb6fc84b.da9b48","type":"boxcar-credentials","z":"","name":"mark","api_key":"CwKB2LWabMJcSl3SCqlVuJeW_oErj3KZWoiYkBYKH9EPIaaegAdXdr-H3jAn0EtI"},{"id":"b24d2746.808068","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"57e838d7.cfc2f8","type":"ui_group","z":"","name":"Uptime","tab":"a4ae64f1.d2dc08","order":3,"disp":true,"width":"6"},{"id":"a4ae64f1.d2dc08","type":"ui_tab","z":"","name":"Configuration","icon":"dashboard","order":2},{"id":"c9373492.4d12d8","type":"mqtt-broker","z":"","name":"MQTT_Broker","broker":"192.168.16.76","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"f976ce3a.cd333","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"7292b2f4.8a704c","type":"tls-config","z":"","name":"Letsencrypt","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"1a2f00ec.22782f","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"54739791.05c8d8","type":"websocket-client","z":"","path":"wss://echo.websocket.org/","tls":"7292b2f4.8a704c","wholemsg":"false"},{"id":"f0838b3c.45bed8","type":"websocket-client","z":"","path":"wss://ingestion.switchfi.co.za","tls":"7292b2f4.8a704c","wholemsg":"false"},{"id":"deaa8ad4.5dfe38","type":"influxdb","z":null,"hostname":"34.86.75.211","port":"8086","protocol":"http","database":"cummins","name":"RIO","usetls":false,"tls":"7292b2f4.8a704c","influxdbVersion":"1.x","url":"","rejectUnauthorized":false},{"id":"59d466f9.a55ee8","type":"ui_group","z":"","name":"table","tab":"4405fd55.f59b14","order":1,"disp":true,"width":"6"},{"id":"4405fd55.f59b14","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"88546a32.08bf08","type":"sqlitedb","z":"","db":"/tmp/sqlite","mode":"RWC"},{"id":"4b7d64cd.4ea80c","type":"influxdb","z":"","hostname":"34.121.253.32","port":"8086","protocol":"http","database":"cummins","name":"RIO2.0","usetls":false,"tls":"7292b2f4.8a704c","influxdbVersion":"1.x","url":"","rejectUnauthorized":false},{"id":"b36ec143.6f28b","type":"influxdb","z":"","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"CloudDB","usetls":false,"tls":"7292b2f4.8a704c","influxdbVersion":"2.0","url":"https://us-central1-1.gcp.cloud2.influxdata.com","rejectUnauthorized":false},{"id":"1a378cc0.f6ea23","type":"influxdb","z":"","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"","usetls":false,"tls":"c5739052.2b04f","influxdbVersion":"2.0","url":"https://us-central1-1.gcp.cloud2.influxdata.com","rejectUnauthorized":false},{"id":"c5739052.2b04f","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"1f0b7968.8d9287","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"test 1.8 flux","usetls":false,"tls":"f3068eb3.4d9b","influxdbVersion":"1.8-flux","url":"https://localhost:8086","rejectUnauthorized":false},{"id":"f3068eb3.4d9b","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"3ccab1cb.636d9e","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"test 1.8 flux","usetls":false,"tls":"8c26b86f.2df648","influxdbVersion":"1.8-flux","url":"https://localhost:8086","rejectUnauthorized":false},{"id":"8c26b86f.2df648","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"d8909bb.9a07168","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"test","name":"test","usetls":true,"tls":"ed9bcf94.6575c","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"ed9bcf94.6575c","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"fcb69091.11663","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"test 1.8 flux","usetls":false,"tls":"4779f835.bff3d8","influxdbVersion":"1.8-flux","url":"https://localhost:8086","rejectUnauthorized":false},{"id":"4779f835.bff3d8","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"1bae3999.7c77f6","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"","usetls":false,"tls":"bb335f66.8da98","influxdbVersion":"2.0","url":"https://localhost:9999","rejectUnauthorized":false},{"id":"bb335f66.8da98","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"407ab1a.0a3e95","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"","usetls":false,"tls":"bbd6e114.5969d","influxdbVersion":"2.0","url":"https://localhost:9999","rejectUnauthorized":false},{"id":"bbd6e114.5969d","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"c05e459f.0bb488","type":"Stackhero-InfluxDB-v2-Server","z":"","name":"rio-aus","host":"https://us-central1-1.gcp.cloud2.influxdata.com","port":"","tls":false},{"id":"ae9051c2.416c3","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"test","name":"test","usetls":true,"tls":"d1bf8e8d.ea453","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"d1bf8e8d.ea453","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"6c0a9869.2be648","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"test 1.8 flux","usetls":false,"tls":"c4876450.e7ab68","influxdbVersion":"1.8-flux","url":"https://localhost:8086","rejectUnauthorized":false},{"id":"c4876450.e7ab68","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"28d73095.b67df","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"test 1.8 flux","usetls":false,"tls":"31891323.ab7dbc","influxdbVersion":"1.8-flux","url":"https://localhost:8086","rejectUnauthorized":false},{"id":"31891323.ab7dbc","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"56cabaf0.38a104","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"test","name":"test","usetls":true,"tls":"9ee3001a.58816","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"9ee3001a.58816","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"bbc6c1f7.7140d","type":"influxdb","z":"","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"Rio-Aus ","usetls":false,"tls":"9c7844b2.ffe018","influxdbVersion":"2.0","url":"https://us-central1-1.gcp.cloud2.influxdata.com","rejectUnauthorized":false,"info":"XnRQzcg53KA2Poi69tQ79Tvi7AQRYjlSopK5FznucTFMwbAFj9X1xEqrN_qxg0u1SSMqTsMm__utvRV4KD9eMw=="},{"id":"9c7844b2.ffe018","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"4cfc3e9a.c8ab4","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"","usetls":false,"tls":"110cae41.63f302","influxdbVersion":"2.0","url":"https://localhost:9999","rejectUnauthorized":false},{"id":"110cae41.63f302","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"aeb695f6.ceb328","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"","usetls":false,"tls":"4034147.a4859ec","influxdbVersion":"2.0","url":"https://localhost:9999","rejectUnauthorized":false},{"id":"4034147.a4859ec","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"f32f803a.3df67","type":"influxdb","z":"","hostname":"localhost","port":"8086","protocol":"https","database":"new_db","name":"","usetls":true,"tls":"b4bd99c2.54b278","influxdbVersion":"1.x"},{"id":"b4bd99c2.54b278","type":"tls-config","z":"","name":"local-tls","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","verifyservercert":false},{"id":"cc32125a.0fe69","type":"influxdb","z":"","hostname":"192.168.1.34","port":"8086","protocol":"http","database":"home_assistant","name":"torque","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"2e4eccd4.551d64","type":"websocket-listener","path":"wss/request","wholemsg":"true"},{"id":"f6d48c3.122107","type":"websocket-client","z":"","path":"wss://sigfox.switchfi.co.za:1880/ws/request","tls":"b4b61bae.4bb908","wholemsg":"true"},{"id":"3c46c46.cc2d13c","type":"tls-config","name":"Letsencrypt","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"fe01c9f.e8e7a38","type":"websocket-listener","z":"","path":"wss://sigfox.switchfi.co.za/ws/request","wholemsg":"true"},{"id":"bd35032e.5baff","type":"websocket-client","z":"","path":"wss://sigfox.switchfi.co.za/ws/request","tls":"1edeb375.b926cd","wholemsg":"true"},{"id":"f6d3f5d0.280978","type":"websocket-client","z":"","path":"wss://mqtt.intuitive.works","tls":"b9655d25.3114f","wholemsg":"false"},{"id":"1edeb375.b926cd","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"21468bcc.52b364","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"7a97012c.9e325","type":"mqtt-broker","z":"","name":"ttn","broker":"eu1.cloud.thethings.network","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"7b680a23.e02424","type":"mqtt-broker","z":"","name":"Intuitive.works","broker":"mqtt.intuitive.works","port":"8883","tls":"1f98a2cc.4270cd","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"12441fc4.389e8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"mqtt.intuitive.works.crt","keyname":"mqtt_intuitive_works_key.txt","caname":"mqtt.intuitive.works.ca-bundle","servername":"","verifyservercert":true},{"id":"1f98a2cc.4270cd","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":true},{"id":"b9655d25.3114f","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"mqtt.intuitive.works.crt","keyname":"mqtt_intuitive_works_key.txt","caname":"mqtt.intuitive.works.ca-bundle","servername":"","verifyservercert":true},{"id":"eebe667d.495498","type":"mqtt-broker","z":"","name":"CLOUD MQTT","broker":"mqtt.intuitive.works","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1cf04551.3eb1fb","type":"influxdb","hostname":"34.75.113.148","port":"8086","protocol":"http","database":"switchfi","name":"Switchfi-USE","usetls":false,"tls":"97756a49.0e6ff8","influxdbVersion":"1.x","url":"","rejectUnauthorized":false},{"id":"afd78411.2302e8","type":"mqtt-broker","name":"sWItchFimqtt","broker":"mqtt.switchfi.co.za","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"2","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"97756a49.0e6ff8","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"76d13def.f56924","type":"influxdb","z":"","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"dnb db","usetls":false,"tls":"7292b2f4.8a704c","influxdbVersion":"2.0","url":"https://us-central1-1.gcp.cloud2.influxdata.com","rejectUnauthorized":true},{"id":"b35b30c7.7d5","type":"influxdb","z":"","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"Intuitive Backend","usetls":false,"tls":"7292b2f4.8a704c","influxdbVersion":"2.0","url":"https://us-central1-1.gcp.cloud2.influxdata.com","rejectUnauthorized":true},{"id":"f0e70157.57d99","type":"mqtt-broker","z":"","name":"TTN-RIO","broker":"au1.cloud.thethings.network","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6b0a7a27.c61c84","type":"mqtt-broker","name":"Cloud Mqtt","broker":"mqtt.intuitive.works","port":"1883","tls":"fabede5c.799e9","clientid":"","usetls":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"fabede5c.799e9","type":"tls-config","name":"Letsencrypt","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"8e060a3f.31d378","type":"mqtt-broker","name":"SHANDON LANE","broker":"www.shandonlane.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"94a86f13.8e78","type":"http in","z":"fa40001c.4d62c","name":"","url":"/sigfox","method":"post","upload":false,"swaggerDoc":"","x":70,"y":360,"wires":[["b6550bb9.fc4cc8","6a718c38.7b8b94","192c8b6d.e9f555","3f29255b.49228a"]]},{"id":"6a718c38.7b8b94","type":"http response","z":"fa40001c.4d62c","name":"Acking sensor data","statusCode":"200","headers":{},"x":170,"y":420,"wires":[]},{"id":"c7824a50.1a0128","type":"switch","z":"4b2aeae5.cb1744","name":"people sensor","property":"payload.distinct","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"},{"t":"eq","v":"7","vt":"num"},{"t":"eq","v":"8","vt":"num"},{"t":"eq","v":"9","vt":"num"},{"t":"eq","v":"10","vt":"num"},{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"num"},{"t":"eq","v":"14","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"16","vt":"num"}],"checkall":"true","repair":false,"outputs":17,"x":680,"y":560,"wires":[["7c1203ab.8782dc"],["338de205.be477e"],["d32dc627.ca3d08"],["bdd162bb.249c9"],["e29d4f18.e11c5"],["34878ed8.629242"],["a73fb8e2.a2e498"],["9b116611.b72238"],["95ea9753.f2c488"],["1dadac27.8f06c4"],["670fbbad.327314"],["ce899138.6cfa1"],["7bba1bb.a608ae4"],["ccc6a7f5.6317a8"],["27c3a9b8.d44656"],["b6da7b24.90e768"],["23c5e548.2074ca"]]},{"id":"6e11d746.e0fdc8","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 0 - available 16","func":"msg.available = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":436.6666564941406,"wires":[["4156a4f1.069b5c","847d656c.c136f8"]]},{"id":"7c1203ab.8782dc","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1029.3333206176758,"y":438.33327865600586,"wires":[["6e11d746.e0fdc8"]]},{"id":"77176cca.b24b04","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 5 - available 11","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":636.6666564941406,"wires":[["15d78c56.a43d04","188b7cf2.9a3443"]]},{"id":"d76183b8.f271","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 1 - available 15","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },]\nmsg.available = [\n        {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":476.6666564941406,"wires":[["445d5c8b.433ac4","7940e8da.e1c558"]]},{"id":"96aa486e.2343d8","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 2 - available 14","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },]\nmsg.available = [\n        {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":516.6666564941406,"wires":[["d453c4.b50ccc4","bf8e9d63.39a2a"]]},{"id":"c3c5f904.585e28","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 3 - available 13","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n];\n\nmsg.available = [\n\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":556.6666564941406,"wires":[["ff1d368d.d2eff8","7b823647.495fb8"]]},{"id":"613c7a69.468684","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 4 - available 12","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":596.6666564941406,"wires":[["d7caa663.185878","bea3be10.e4a2b"]]},{"id":"c8442cd5.b3b98","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 6 - available 10","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n    \n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":676.6666564941406,"wires":[["af63709b.5dcc8","1d3b5c30.f24f54"]]},{"id":"a9e05401.86cc08","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 7 - available 9","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":716.6666564941406,"wires":[["361d7275.c9813e","2735155c.82837a"]]},{"id":"c29be146.bcb6f","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 8 - available 8","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":756.6666564941406,"wires":[["dde93f03.3fed3","343f89cb.9b1c36"]]},{"id":"f36ef130.3775","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 9 - available 7","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":796.6666564941406,"wires":[["e68c16b7.560058","c7fc9af6.35f148"]]},{"id":"338de205.be477e","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":476.6666564941406,"wires":[["d76183b8.f271"]]},{"id":"d32dc627.ca3d08","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":516.6666564941406,"wires":[["96aa486e.2343d8"]]},{"id":"bdd162bb.249c9","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":556.6666564941406,"wires":[["c3c5f904.585e28"]]},{"id":"e29d4f18.e11c5","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":596.6666564941406,"wires":[["613c7a69.468684"]]},{"id":"34878ed8.629242","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":636.6666564941406,"wires":[["77176cca.b24b04"]]},{"id":"a73fb8e2.a2e498","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":676.6666564941406,"wires":[["c8442cd5.b3b98"]]},{"id":"9b116611.b72238","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":716.6666564941406,"wires":[["a9e05401.86cc08"]]},{"id":"95ea9753.f2c488","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":756.6666564941406,"wires":[["c29be146.bcb6f"]]},{"id":"1dadac27.8f06c4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":796.6666564941406,"wires":[["f36ef130.3775"]]},{"id":"a2f5305.c6294d","type":"template","z":"4b2aeae5.cb1744","name":"topic","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"sensor/{{mac}}/data","output":"str","x":2520.999984741211,"y":656.6666564941406,"wires":[["ab67f7e6.5b4898"]]},{"id":"524bd08c.3ffd","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":2683.999984741211,"y":696.4166564941406,"wires":[["512ead50.b4be54"]]},{"id":"ab67f7e6.5b4898","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":2684.249984741211,"y":657.4166564941406,"wires":[["50303d55.a20564"]]},{"id":"512ead50.b4be54","type":"template","z":"4b2aeae5.cb1744","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"dev_id\":\"{{mac}}\",\"data\":[{\"dist\":[9132,9135,9135,9137,9136,9138,9140,9139,9136,9135,9139,9136,9137,9137,9138,9135,9138,9090,9100,9110,9120,9130,9140,9150]},{\"temp\":\"{{device}}\"},{\"hum\":0},{\"vin\":409}],\"time\":{{payload}},\"transmit_time\":{{payload}},\"version\":\"2.0\",\"prox_count\":5,\"sample_interval\":5000}","output":"json","x":2880.999984741211,"y":696.6666564941406,"wires":[[]]},{"id":"50303d55.a20564","type":"template","z":"4b2aeae5.cb1744","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"dev_id\":\"{{mac}}\",\"data\":[{\"dist\":[9132,9135,9135,9137,9136,9138,9140,9139,9136,9135,9139,9136,9137,9137,9138,9135,9138,9137,9135,9136,9138,9136,9136,9134]},{\"temp\":\"{{device}}\"},{\"hum\":0},{\"vin\":409}],\"time\":{{payload}},\"transmit_time\":{{payload}},\"version\":\"2.0\",\"prox_count\":5,\"sample_interval\":5000}","output":"json","x":2870.999984741211,"y":656.6666564941406,"wires":[[]]},{"id":"445d5c8b.433ac4","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":496.6666564941406,"wires":[["40f048fc.9ad428"]]},{"id":"7940e8da.e1c558","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":456.6666564941406,"wires":[["72afee96.cbf5"]]},{"id":"40f048fc.9ad428","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":496.6666564941406,"wires":[["4cb89987.26e6e8"]]},{"id":"72afee96.cbf5","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":456.6666564941406,"wires":[["f6bcf7a8.d8c6c8"]]},{"id":"847d656c.c136f8","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":436.6666564941406,"wires":[["50724c36.daaa64"]]},{"id":"4156a4f1.069b5c","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":396.6666564941406,"wires":[["5e804e9f.eadd6"]]},{"id":"50724c36.daaa64","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":436.6666564941406,"wires":[["e413e7ea.d99a38"]]},{"id":"5e804e9f.eadd6","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":396.6666564941406,"wires":[["5df5a1d0.85304"]]},{"id":"bf8e9d63.39a2a","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":556.6666564941406,"wires":[["9a96304b.feac5"]]},{"id":"d453c4.b50ccc4","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":516.6666564941406,"wires":[["c2765ab0.a67218"]]},{"id":"9a96304b.feac5","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":556.6666564941406,"wires":[["f61b0f72.c6935"]]},{"id":"c2765ab0.a67218","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":516.6666564941406,"wires":[["ab569825.b5aef8"]]},{"id":"7b823647.495fb8","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":616.6666564941406,"wires":[["eee33cd5.0a199"]]},{"id":"ff1d368d.d2eff8","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":576.6666564941406,"wires":[["58117a94.86de94"]]},{"id":"eee33cd5.0a199","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":616.6666564941406,"wires":[["eeedb677.7becf8"]]},{"id":"58117a94.86de94","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":576.6666564941406,"wires":[["2343befc.f8caa2"]]},{"id":"bea3be10.e4a2b","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":676.6666564941406,"wires":[["47d3f65e.2de158"]]},{"id":"d7caa663.185878","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":636.6666564941406,"wires":[["2781e570.0a78aa"]]},{"id":"47d3f65e.2de158","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":676.6666564941406,"wires":[["eca024a5.b22d68"]]},{"id":"2781e570.0a78aa","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":636.6666564941406,"wires":[["5082ab3b.090804"]]},{"id":"188b7cf2.9a3443","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":736.6666564941406,"wires":[["fae251ef.826d7"]]},{"id":"15d78c56.a43d04","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":696.6666564941406,"wires":[["ffdeca21.d6e1a8"]]},{"id":"fae251ef.826d7","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":736.6666564941406,"wires":[["10851957.40f2a7"]]},{"id":"ffdeca21.d6e1a8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":696.6666564941406,"wires":[["570ddbd7.0706e4"]]},{"id":"1d3b5c30.f24f54","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":796.6666564941406,"wires":[["a1b62228.3af8f"]]},{"id":"af63709b.5dcc8","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":756.6666564941406,"wires":[["2b57ae4b.da9fb2"]]},{"id":"a1b62228.3af8f","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":796.6666564941406,"wires":[["9c03546.eaf47a8"]]},{"id":"2b57ae4b.da9fb2","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":756.6666564941406,"wires":[["bbbf23f8.b3c65"]]},{"id":"2735155c.82837a","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":856.6666564941406,"wires":[["b9003f50.97a18"]]},{"id":"361d7275.c9813e","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":816.6666564941406,"wires":[["685873cf.229a1c"]]},{"id":"b9003f50.97a18","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":856.6666564941406,"wires":[["25292ee7.9d5962"]]},{"id":"685873cf.229a1c","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":816.6666564941406,"wires":[["5f8871dc.8ef44"]]},{"id":"343f89cb.9b1c36","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":916.6666564941406,"wires":[["c7eca65c.acdbe8"]]},{"id":"dde93f03.3fed3","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":876.6666564941406,"wires":[["7aee94c2.5b12bc"]]},{"id":"c7eca65c.acdbe8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":916.6666564941406,"wires":[["68d289f4.8b49d8"]]},{"id":"7aee94c2.5b12bc","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":876.6666564941406,"wires":[["b401e19d.8d061"]]},{"id":"c7fc9af6.35f148","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":976.6666564941406,"wires":[["281c9e13.afe902"]]},{"id":"e68c16b7.560058","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":936.6666564941406,"wires":[["5be6c12b.9076d"]]},{"id":"281c9e13.afe902","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":976.6666564941406,"wires":[["e233c307.359b4"]]},{"id":"5be6c12b.9076d","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":936.6666564941406,"wires":[["96a9dac.69ccc28"]]},{"id":"793de616.15c398","type":"template","z":"4b2aeae5.cb1744","name":"topic","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"sensor/{{mac}}/data","output":"str","x":2520.999984741211,"y":696.6666564941406,"wires":[["524bd08c.3ffd"]]},{"id":"f6bcf7a8.d8c6c8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":396.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"4cb89987.26e6e8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":436.6666564941406,"wires":[["793de616.15c398"]]},{"id":"5df5a1d0.85304","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":316.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"e413e7ea.d99a38","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":356.6666564941406,"wires":[["793de616.15c398"]]},{"id":"ab569825.b5aef8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":476.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"f61b0f72.c6935","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":516.6666564941406,"wires":[["793de616.15c398"]]},{"id":"2343befc.f8caa2","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":556.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"eeedb677.7becf8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":596.6666564941406,"wires":[["793de616.15c398"]]},{"id":"5082ab3b.090804","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":636.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"eca024a5.b22d68","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":676.6666564941406,"wires":[["793de616.15c398"]]},{"id":"570ddbd7.0706e4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":716.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"10851957.40f2a7","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":756.6666564941406,"wires":[["793de616.15c398"]]},{"id":"bbbf23f8.b3c65","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":796.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"9c03546.eaf47a8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":836.6666564941406,"wires":[["793de616.15c398"]]},{"id":"5f8871dc.8ef44","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":876.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"25292ee7.9d5962","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":916.6666564941406,"wires":[["793de616.15c398"]]},{"id":"b401e19d.8d061","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":956.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"68d289f4.8b49d8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":996.6666564941406,"wires":[["793de616.15c398"]]},{"id":"96a9dac.69ccc28","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":1036.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"e233c307.359b4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":1076.6666564941406,"wires":[["793de616.15c398"]]},{"id":"5370e171.0023b","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 10 - available 6","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":836.6666564941406,"wires":[["c995f1d7.0f49b","3b09aef6.ab46b2"]]},{"id":"670fbbad.327314","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":836.6666564941406,"wires":[["5370e171.0023b"]]},{"id":"359bc204.936a2e","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 11 - available 5","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n];\n\nmsg.available = [\n\n\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":876.6666564941406,"wires":[["cdd3b4e2.57f568","250f1428.4ce0ec"]]},{"id":"ce899138.6cfa1","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":876.6666564941406,"wires":[["359bc204.936a2e"]]},{"id":"1464bfdf.d8bdf","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 12 - available 4","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":916.6666564941406,"wires":[["70338844.b33ef8","bfc98847.779f68"]]},{"id":"7bba1bb.a608ae4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":916.6666564941406,"wires":[["1464bfdf.d8bdf"]]},{"id":"31eaf245.39e09e","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 13 - available 3","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1334.749984741211,"y":955.4166564941406,"wires":[["740d8e50.7cd68","fa30dfe4.fb097"]]},{"id":"ccc6a7f5.6317a8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1034.749984741211,"y":955.4166564941406,"wires":[["31eaf245.39e09e"]]},{"id":"2beddb35.f91984","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 14 - available 2","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":996.6666564941406,"wires":[["bc6642a8.59ef8","af0a1e88.24725"]]},{"id":"27c3a9b8.d44656","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":996.6666564941406,"wires":[["2beddb35.f91984"]]},{"id":"33a201f.256edfe","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 15 - available 1","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":1036.6666564941406,"wires":[["ce7f9539.ef8be8","673430ae.d2e84"]]},{"id":"b6da7b24.90e768","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":1036.6666564941406,"wires":[["33a201f.256edfe"]]},{"id":"36bdc307.84c7fc","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1330.999984741211,"y":1076.6666564941406,"wires":[["168674c.5da2c8b","718ff4f6.e2e1bc"]]},{"id":"23c5e548.2074ca","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030.999984741211,"y":1076.6666564941406,"wires":[["36bdc307.84c7fc"]]},{"id":"45d372a2.10e92c","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":1156.6666564941406,"wires":[["793de616.15c398"]]},{"id":"334ff6ab.7f54aa","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":1116.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"94efdfc5.51d13","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2170.999984741211,"y":1236.6666564941406,"wires":[["793de616.15c398"]]},{"id":"1198956d.60474b","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2250.999984741211,"y":1196.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"8bfa501d.8eb5c","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2190.999984741211,"y":1316.6666564941406,"wires":[["793de616.15c398"]]},{"id":"e44ed29.3e85a3","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2270.999984741211,"y":1276.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"3489a563.3a2b6a","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2190.999984741211,"y":1396.6666564941406,"wires":[["793de616.15c398"]]},{"id":"29cb9626.e3ba6a","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2270.999984741211,"y":1356.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"af79ed64.c8272","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":1056.6666564941406,"wires":[["1198956d.60474b"]]},{"id":"99ce1a3f.5e75f8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":1096.6666564941406,"wires":[["94efdfc5.51d13"]]},{"id":"250f1428.4ce0ec","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":1096.6666564941406,"wires":[["99ce1a3f.5e75f8"]]},{"id":"cdd3b4e2.57f568","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":1056.6666564941406,"wires":[["af79ed64.c8272"]]},{"id":"aa96d884.e98158","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1036.6666564941406,"wires":[["45d372a2.10e92c"]]},{"id":"886f57de.cba108","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":996.6666564941406,"wires":[["334ff6ab.7f54aa"]]},{"id":"c995f1d7.0f49b","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":996.6666564941406,"wires":[["886f57de.cba108"]]},{"id":"3b09aef6.ab46b2","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":1036.6666564941406,"wires":[["aa96d884.e98158"]]},{"id":"a18f4ca6.85463","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":1176.6666564941406,"wires":[["29cb9626.e3ba6a"]]},{"id":"a9c50a66.dd85a8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":1216.6666564941406,"wires":[["3489a563.3a2b6a"]]},{"id":"fa30dfe4.fb097","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":1216.6666564941406,"wires":[["a9c50a66.dd85a8"]]},{"id":"740d8e50.7cd68","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":1176.6666564941406,"wires":[["a18f4ca6.85463"]]},{"id":"be43e261.3fa5b","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1156.6666564941406,"wires":[["8bfa501d.8eb5c"]]},{"id":"ec61fa4c.7384d8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1116.6666564941406,"wires":[["e44ed29.3e85a3"]]},{"id":"70338844.b33ef8","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":1116.6666564941406,"wires":[["ec61fa4c.7384d8"]]},{"id":"bfc98847.779f68","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":1156.6666564941406,"wires":[["be43e261.3fa5b"]]},{"id":"5bdaf95.89d2d08","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":1296.6666564941406,"wires":[["3fa2f94a.1dee66"]]},{"id":"35948920.8c5356","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1920.999984741211,"y":1336.6666564941406,"wires":[["14b28edb.25ade1"]]},{"id":"673430ae.d2e84","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1780.999984741211,"y":1336.6666564941406,"wires":[["35948920.8c5356"]]},{"id":"ce7f9539.ef8be8","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1790.999984741211,"y":1296.6666564941406,"wires":[["5bdaf95.89d2d08"]]},{"id":"b8e88823.8e09b8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1276.6666564941406,"wires":[["460d7b77.7c2f14"]]},{"id":"5085944c.d4decc","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1236.6666564941406,"wires":[["dd010719.ea8e58"]]},{"id":"bc6642a8.59ef8","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":1236.6666564941406,"wires":[["5085944c.d4decc"]]},{"id":"af0a1e88.24725","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":1276.6666564941406,"wires":[["b8e88823.8e09b8"]]},{"id":"bcdae32.382952","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1356.6666564941406,"wires":[["40ed8cd8.baf004"]]},{"id":"168674c.5da2c8b","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530.999984741211,"y":1356.6666564941406,"wires":[["bcdae32.382952"]]},{"id":"718ff4f6.e2e1bc","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1520.999984741211,"y":1396.6666564941406,"wires":[["206d1ca1.f501c4"]]},{"id":"206d1ca1.f501c4","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1660.999984741211,"y":1396.6666564941406,"wires":[["b7c6cbc7.7c0118"]]},{"id":"dd010719.ea8e58","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2270.999984741211,"y":1436.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"460d7b77.7c2f14","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2190.999984741211,"y":1476.6666564941406,"wires":[["793de616.15c398"]]},{"id":"3fa2f94a.1dee66","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2270.999984741211,"y":1516.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"14b28edb.25ade1","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2190.999984741211,"y":1556.6666564941406,"wires":[["793de616.15c398"]]},{"id":"40ed8cd8.baf004","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2270.999984741211,"y":1596.6666564941406,"wires":[["a2f5305.c6294d"]]},{"id":"b7c6cbc7.7c0118","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2190.999984741211,"y":1636.6666564941406,"wires":[["793de616.15c398"]]},{"id":"747e5b17.3a7534","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1120,"wires":[["d20c8f69.dcef2","baf24e39.46a04"]]},{"id":"d20c8f69.dcef2","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1400,"wires":[["6e55880d.e8a488"]]},{"id":"baf24e39.46a04","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1440,"wires":[["cb01363f.823348"]]},{"id":"6e55880d.e8a488","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1400,"wires":[["61ff4789.f556f8"]]},{"id":"cb01363f.823348","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1440,"wires":[["247a091d.e3e186"]]},{"id":"61ff4789.f556f8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2280,"y":1640,"wires":[[]]},{"id":"247a091d.e3e186","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2200,"y":1680,"wires":[[]]},{"id":"7298bc6e.c907a4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1120,"wires":[["747e5b17.3a7534"]]},{"id":"baeef3d8.5dec9","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1160,"wires":[["ae14e0cd.1781f","a743f367.cc905"]]},{"id":"ae14e0cd.1781f","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1440,"wires":[["33440274.f2e6ae"]]},{"id":"a743f367.cc905","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1480,"wires":[["a31433d.63befd"]]},{"id":"33440274.f2e6ae","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1440,"wires":[["3a99b24e.260a8e"]]},{"id":"a31433d.63befd","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1480,"wires":[["4eaa2c3a.39c2b4"]]},{"id":"3a99b24e.260a8e","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2280,"y":1680,"wires":[[]]},{"id":"4eaa2c3a.39c2b4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2200,"y":1720,"wires":[[]]},{"id":"71749a0b.1d0844","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1160,"wires":[["baeef3d8.5dec9"]]},{"id":"7e398284.501cfc","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1200,"wires":[["2c84b648.66ce2a","da68ed11.d1781"]]},{"id":"2c84b648.66ce2a","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1480,"wires":[["13a61f0.ab498e1"]]},{"id":"da68ed11.d1781","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1520,"wires":[["35bd09de.aa1406"]]},{"id":"13a61f0.ab498e1","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1480,"wires":[["ba51a51d.f35d18"]]},{"id":"35bd09de.aa1406","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1520,"wires":[["b5fba674.789f28"]]},{"id":"ba51a51d.f35d18","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2280,"y":1720,"wires":[[]]},{"id":"b5fba674.789f28","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2200,"y":1760,"wires":[[]]},{"id":"193f4e2e.115622","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1200,"wires":[["7e398284.501cfc"]]},{"id":"1a301f6e.cf1281","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1240,"wires":[["5fc048ba.3e70a8","b04acbeb.c532d8"]]},{"id":"5fc048ba.3e70a8","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1540,"wires":[["28d0a58f.8bd1ba"]]},{"id":"b04acbeb.c532d8","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1580,"wires":[["7f6011d0.7507c"]]},{"id":"28d0a58f.8bd1ba","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1540,"wires":[["3ed7ded3.8faac2"]]},{"id":"7f6011d0.7507c","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1580,"wires":[["3bbd14f4.da395c"]]},{"id":"3ed7ded3.8faac2","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2280,"y":1780,"wires":[[]]},{"id":"3bbd14f4.da395c","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2300,"y":1800,"wires":[[]]},{"id":"9a36373f.1fc908","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1240,"wires":[["1a301f6e.cf1281"]]},{"id":"3aecbb37.94a374","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1300,"wires":[["8c562659.8d9e38","f911349f.5ed3d8"]]},{"id":"8c562659.8d9e38","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1580,"wires":[["3c959094.68dc"]]},{"id":"f911349f.5ed3d8","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1620,"wires":[["b990cef8.6e7fa"]]},{"id":"3c959094.68dc","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1580,"wires":[["9d01c430.6cb018"]]},{"id":"b990cef8.6e7fa","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1620,"wires":[["aeae1914.cf5548"]]},{"id":"9d01c430.6cb018","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2300,"y":1840,"wires":[[]]},{"id":"aeae1914.cf5548","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2280,"y":1880,"wires":[[]]},{"id":"6b42a8b2.6f9628","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1280,"wires":[["3aecbb37.94a374"]]},{"id":"24feb9c2.ffd656","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1340,"wires":[["6bc3ce49.942e","4f077801.254898"]]},{"id":"6bc3ce49.942e","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1620,"wires":[["ea2ad59d.f2b868"]]},{"id":"4f077801.254898","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1660,"wires":[["8ab4b05f.a7ea2"]]},{"id":"ea2ad59d.f2b868","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1620,"wires":[["3afc96b5.8a899a"]]},{"id":"8ab4b05f.a7ea2","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1660,"wires":[["aff5903f.cbe86"]]},{"id":"3afc96b5.8a899a","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2320,"y":1920,"wires":[[]]},{"id":"aff5903f.cbe86","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2300,"y":1960,"wires":[[]]},{"id":"eaf99aff.f6b418","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1320,"wires":[["24feb9c2.ffd656"]]},{"id":"406b3c0b.8dbda4","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1380,"wires":[["6376bd94.6525b4","3b761e31.9ba652"]]},{"id":"6376bd94.6525b4","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1660,"wires":[["dd55270a.cdfc18"]]},{"id":"3b761e31.9ba652","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1700,"wires":[["453bcf46.ebcee"]]},{"id":"dd55270a.cdfc18","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1660,"wires":[["f754aade.7cc8b8"]]},{"id":"453bcf46.ebcee","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1700,"wires":[["e06606a4.320e58"]]},{"id":"f754aade.7cc8b8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2340,"y":2000,"wires":[[]]},{"id":"e06606a4.320e58","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2320,"y":2040,"wires":[[]]},{"id":"b4126546.8d72c8","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1380,"wires":[["406b3c0b.8dbda4"]]},{"id":"16300ab.2d2faf5","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1420,"wires":[["619001aa.60edf","58775e71.b066c"]]},{"id":"619001aa.60edf","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1700,"wires":[["19a8b641.86423a"]]},{"id":"58775e71.b066c","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1740,"wires":[["7d8cf279.28e84c"]]},{"id":"19a8b641.86423a","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1700,"wires":[["1b82eb00.31b6a5"]]},{"id":"7d8cf279.28e84c","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1740,"wires":[["fc7ab134.ecbab"]]},{"id":"1b82eb00.31b6a5","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2340,"y":2080,"wires":[[]]},{"id":"fc7ab134.ecbab","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2360,"y":2160,"wires":[[]]},{"id":"d958ba7d.67cc28","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1420,"wires":[["16300ab.2d2faf5"]]},{"id":"c85a3ddb.27ee2","type":"function","z":"4b2aeae5.cb1744","name":"Inuse 16 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1340,"y":1460,"wires":[["fa263bd6.4f4348","f5b7cb8f.a1f138"]]},{"id":"fa263bd6.4f4348","type":"function","z":"4b2aeae5.cb1744","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1540,"y":1740,"wires":[["c8d0858e.ba13b8"]]},{"id":"f5b7cb8f.a1f138","type":"function","z":"4b2aeae5.cb1744","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1530,"y":1780,"wires":[["645f06b3.0c4d58"]]},{"id":"c8d0858e.ba13b8","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1740,"wires":[["3f518928.7d66f6"]]},{"id":"645f06b3.0c4d58","type":"split","z":"4b2aeae5.cb1744","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1670,"y":1780,"wires":[["555bde1d.559c2"]]},{"id":"3f518928.7d66f6","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2320,"y":2120,"wires":[[]]},{"id":"555bde1d.559c2","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2320,"y":2200,"wires":[[]]},{"id":"d2647371.09be4","type":"change","z":"4b2aeae5.cb1744","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":1460,"wires":[["c85a3ddb.27ee2"]]},{"id":"9d8dfc35.c697e","type":"function","z":"46798068.c0b51","name":"Inuse 0 - available 25","func":"\nmsg.available = [\n        {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":100,"wires":[[]]},{"id":"d2b6b13a.eb7ca","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":578.3333358764648,"y":101.66662216186523,"wires":[["9d8dfc35.c697e"]]},{"id":"78ca1e70.6a1f7","type":"function","z":"46798068.c0b51","name":"Inuse 5 - available 20","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n];\n\nmsg.available = [\n\n\n\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":300,"wires":[[]]},{"id":"66af099a.4138c8","type":"function","z":"46798068.c0b51","name":"Inuse 1 - available 24","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },]\nmsg.available = [\n        {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":140,"wires":[[]]},{"id":"d7d00993.925288","type":"function","z":"46798068.c0b51","name":"Inuse 2 - available 23","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },]\nmsg.available = [\n\n        {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":180,"wires":[[]]},{"id":"180b211a.85a1af","type":"function","z":"46798068.c0b51","name":"Inuse 3 - available 22","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":220,"wires":[[]]},{"id":"24c0d129.bf06be","type":"function","z":"46798068.c0b51","name":"Inuse 4 - available 21","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n];\n\nmsg.available = [\n\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":260,"wires":[[]]},{"id":"651b96b4.3bd638","type":"function","z":"46798068.c0b51","name":"Inuse 6 - available 19","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n];\n\nmsg.available = [\n\n\n    \n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":340,"wires":[[]]},{"id":"fb9a1574.874a18","type":"function","z":"46798068.c0b51","name":"Inuse 7 - available 18","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":380,"wires":[[]]},{"id":"cb97aaaa.613478","type":"function","z":"46798068.c0b51","name":"Inuse 8 - available 17","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":420,"wires":[[]]},{"id":"38f8fc12.b1bef4","type":"function","z":"46798068.c0b51","name":"Inuse 9 - available 16","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":460,"wires":[[]]},{"id":"a808df4.d4c552","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":140,"wires":[["66af099a.4138c8"]]},{"id":"9243b740.e57b78","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":180,"wires":[["d7d00993.925288"]]},{"id":"f15b40d3.3f11","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":220,"wires":[["180b211a.85a1af"]]},{"id":"cd620f5d.2830e","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":260,"wires":[["24c0d129.bf06be"]]},{"id":"b243071d.426a68","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":300,"wires":[["78ca1e70.6a1f7"]]},{"id":"900837de.c1f808","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":340,"wires":[["651b96b4.3bd638"]]},{"id":"97f0816b.df50d","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":380,"wires":[["fb9a1574.874a18"]]},{"id":"72795eeb.915da","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":420,"wires":[["cb97aaaa.613478"]]},{"id":"374b9ba6.4d2254","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":460,"wires":[["38f8fc12.b1bef4"]]},{"id":"ebb3ff5d.167d","type":"function","z":"46798068.c0b51","name":"Inuse 10 - available 15","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n];\n\nmsg.available = [\n\n\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n             {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":500,"wires":[[]]},{"id":"86ae34b5.25cdd8","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":500,"wires":[["ebb3ff5d.167d"]]},{"id":"1cb54ce4.34adf3","type":"function","z":"46798068.c0b51","name":"Inuse 11 - available 14","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n];\n\nmsg.available = [\n\n\n             {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":540,"wires":[[]]},{"id":"8463c43d.6d7ef8","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":540,"wires":[["1cb54ce4.34adf3"]]},{"id":"48bb19a1.92ff48","type":"function","z":"46798068.c0b51","name":"Inuse 12 - available 13","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":580,"wires":[[]]},{"id":"c6890c14.dce6d","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":580,"wires":[["48bb19a1.92ff48"]]},{"id":"fe877ee1.6bd17","type":"function","z":"46798068.c0b51","name":"Inuse 13 - available 12","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":883.75,"y":618.75,"wires":[[]]},{"id":"def729ce.1396d8","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":583.75,"y":618.75,"wires":[["fe877ee1.6bd17"]]},{"id":"f367c1a6.3ba54","type":"function","z":"46798068.c0b51","name":"Inuse 14 - available 11","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":660,"wires":[[]]},{"id":"55ea60f1.9f527","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":660,"wires":[["f367c1a6.3ba54"]]},{"id":"7548e7a8.14e258","type":"function","z":"46798068.c0b51","name":"Inuse 15 - available 10","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n];\n\nmsg.available = [\n\n\n\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":700,"wires":[[]]},{"id":"5d13c6fc.058ff8","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":700,"wires":[["7548e7a8.14e258"]]},{"id":"1344d077.2c855","type":"function","z":"46798068.c0b51","name":"Inuse 16 - available 9","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nmsg.available = [\n\n\n        {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":740,"wires":[[]]},{"id":"a2a9b7da.5a6338","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":740,"wires":[["1344d077.2c855"]]},{"id":"ff9b769c.ecf858","type":"function","z":"46798068.c0b51","name":"Inuse 17 - available 8","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n];\n\nmsg.available = [\n\n\n\n        {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":889.0000152587891,"y":783.3333435058594,"wires":[[]]},{"id":"7e533647.456008","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":780,"wires":[["ff9b769c.ecf858"]]},{"id":"e62a3ecf.de539","type":"function","z":"46798068.c0b51","name":"Inuse 18 - available 7","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n\n\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":889.0000152587891,"y":823.3333435058594,"wires":[[]]},{"id":"12ec0716.179b29","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":820,"wires":[["e62a3ecf.de539"]]},{"id":"4e175176.540e4","type":"function","z":"46798068.c0b51","name":"Inuse 19 - available 6","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n];\n\nmsg.available = [\n\n\n\n\n        {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":889.0000152587891,"y":863.3333435058594,"wires":[[]]},{"id":"323e00de.58b3a","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":860,"wires":[["4e175176.540e4"]]},{"id":"a61ee9b4.c8ed18","type":"function","z":"46798068.c0b51","name":"Inuse 20 - available 5","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n];\n\nmsg.available = [\n\n\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":889.0000152587891,"y":903.3333435058594,"wires":[[]]},{"id":"caa054bd.374f78","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":900,"wires":[["a61ee9b4.c8ed18"]]},{"id":"f1e1693a.cde348","type":"function","z":"46798068.c0b51","name":"Inuse 21 - available 4","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n];\n\nmsg.available = [\n\n\n\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":940,"wires":[[]]},{"id":"16091e5b.7a7362","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":940,"wires":[["f1e1693a.cde348"]]},{"id":"709d5f2f.7a1a1","type":"function","z":"46798068.c0b51","name":"Inuse 22 - available 3","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n];\n\nmsg.available = [\n\n\n            {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":980,"wires":[[]]},{"id":"3698b4a0.e2f44c","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":980,"wires":[["709d5f2f.7a1a1"]]},{"id":"e46a2344.fb6d6","type":"function","z":"46798068.c0b51","name":"Inuse 23 - available 2","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n];\n\nmsg.available = [\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":1020,"wires":[[]]},{"id":"83173ea4.4868c","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":1020,"wires":[["e46a2344.fb6d6"]]},{"id":"78353c3f.17ef44","type":"function","z":"46798068.c0b51","name":"Inuse 24 - available 1","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n];\n\nmsg.available = [\n\n\n\n\n            {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n\n\n];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":1060,"wires":[[]]},{"id":"dc8cce4f.80d5e","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":1060,"wires":[["78353c3f.17ef44"]]},{"id":"87ed1c47.218b9","type":"function","z":"46798068.c0b51","name":"Inuse 25 - available 0","func":"msg.inuse = [\n    {\n        sensor: msg.payload.peoplemac + \"00\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"01\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"02\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"03\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"04\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"05\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"06\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"07\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"08\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"09\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"10\",\n    },\n         {\n        sensor: msg.payload.peoplemac + \"11\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"12\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"13\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"14\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"15\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"16\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"17\",\n    },\n        {\n        sensor: msg.payload.peoplemac + \"18\",\n    },\n            {\n        sensor: msg.payload.peoplemac + \"19\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"20\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"21\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"22\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"23\",\n    },\n                {\n        sensor: msg.payload.peoplemac + \"24\",\n    },\n];\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":880,"y":1100,"wires":[[]]},{"id":"cdb0b72d.d4e0a8","type":"change","z":"46798068.c0b51","name":"","rules":[{"t":"change","p":"payload.peoplemac","pt":"msg","from":"00","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":1100,"wires":[["87ed1c47.218b9"]]},{"id":"65a43617.166ad8","type":"switch","z":"46798068.c0b51","name":"people sensor","property":"payload.distinct","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"},{"t":"eq","v":"7","vt":"num"},{"t":"eq","v":"8","vt":"num"},{"t":"eq","v":"9","vt":"num"},{"t":"eq","v":"10","vt":"num"},{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"num"},{"t":"eq","v":"14","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"16","vt":"num"},{"t":"eq","v":"17","vt":"num"},{"t":"eq","v":"18","vt":"num"},{"t":"eq","v":"19","vt":"num"},{"t":"eq","v":"20","vt":"num"},{"t":"eq","v":"21","vt":"num"},{"t":"eq","v":"22","vt":"num"},{"t":"eq","v":"23","vt":"num"},{"t":"eq","v":"24","vt":"num"},{"t":"eq","v":"25","vt":"num"}],"checkall":"true","repair":false,"outputs":26,"x":160,"y":520,"wires":[["d2b6b13a.eb7ca"],["a808df4.d4c552"],["9243b740.e57b78"],["f15b40d3.3f11"],["cd620f5d.2830e"],["b243071d.426a68"],["900837de.c1f808"],["97f0816b.df50d"],["72795eeb.915da"],["374b9ba6.4d2254"],["86ae34b5.25cdd8"],["8463c43d.6d7ef8"],["c6890c14.dce6d"],["def729ce.1396d8"],["55ea60f1.9f527"],["5d13c6fc.058ff8"],["a2a9b7da.5a6338"],["7e533647.456008"],["12ec0716.179b29"],["323e00de.58b3a"],["caa054bd.374f78"],["16091e5b.7a7362"],["3698b4a0.e2f44c"],["83173ea4.4868c"],["dc8cce4f.80d5e"],["cdb0b72d.d4e0a8"]]},{"id":"afddbcd2.f6d2d","type":"function","z":"b0a581b4.d0b4","name":"available","func":"msg.payload = msg.available\nreturn msg;\n\n","outputs":1,"noerr":0,"x":300,"y":220,"wires":[["1f990306.569c5d"]]},{"id":"779f337c.561a1c","type":"function","z":"b0a581b4.d0b4","name":"inuse","func":"msg.payload = msg.inuse\nreturn msg;\n\n","outputs":1,"noerr":0,"x":310,"y":260,"wires":[["eabd6466.145278"]]},{"id":"eabd6466.145278","type":"split","z":"b0a581b4.d0b4","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":430,"y":260,"wires":[["cfc013c7.e0768"]]},{"id":"1f990306.569c5d","type":"split","z":"b0a581b4.d0b4","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":430,"y":220,"wires":[["33811d8e.167fd2"]]},{"id":"33811d8e.167fd2","type":"change","z":"b0a581b4.d0b4","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":220,"wires":[[]]},{"id":"cfc013c7.e0768","type":"change","z":"b0a581b4.d0b4","name":"","rules":[{"t":"move","p":"payload.sensor","pt":"msg","to":"mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":260,"wires":[[]]},{"id":"76710d9.fa20af4","type":"template","z":"fa40001c.4d62c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"json","x":1920,"y":660,"wires":[["d60be87f.f16558","558d9d64.1af124","f6048b75.557718","70608190.0197f","fe82faf7.0db6d8","8b05ce0c.44dea","43251e6e.00fbc","f8082c60.5927d"]]},{"id":"13c0b42b.3c00cc","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1590,"y":660,"wires":[["4e62fe7e.3c486"]]},{"id":"ebbe6f10.c309b","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[2]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1070,"y":740,"wires":[[],["ded437f6.0bbec8"],[]]},{"id":"39809aae.6f8476","type":"switch","z":"fa40001c.4d62c","name":"occupied","property":"payload.status","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"01","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":1100,"y":440,"wires":[["d70c3f22.180a"],["d70c3f22.180a"],[]]},{"id":"2be01451.99666c","type":"template","z":"fa40001c.4d62c","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}]","output":"json","x":1910,"y":620,"wires":[["d60be87f.f16558","f8082c60.5927d","43251e6e.00fbc","8b05ce0c.44dea","fe82faf7.0db6d8","70608190.0197f","f6048b75.557718","558d9d64.1af124"]]},{"id":"6c1b83b5.7615cc","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1590,"y":700,"wires":[["27f42de.e059cd2"]]},{"id":"d70c3f22.180a","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1590,"y":620,"wires":[["2be01451.99666c"]]},{"id":"fb2d974d.cd61b8","type":"template","z":"fa40001c.4d62c","name":"AWAY","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"away\"}]","output":"json","x":1910,"y":700,"wires":[["d60be87f.f16558","558d9d64.1af124","f6048b75.557718","70608190.0197f","fe82faf7.0db6d8","8b05ce0c.44dea","43251e6e.00fbc","f8082c60.5927d"]]},{"id":"3a10c4e6.4d1c1c","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 11 to 20","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:51","fromt":"str","to":"nf:c6:3a:c0:11:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:84","fromt":"str","to":"nf:c6:3a:c0:12:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:46:1D","fromt":"str","to":"nf:c6:3a:c0:13:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:46:8F","fromt":"str","to":"nf:c6:3a:c0:15:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4B:96","fromt":"str","to":"nf:c6:3a:c0:16:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:49:1F","fromt":"str","to":"nf:c6:3a:c0:17:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:84","fromt":"str","to":"nf:c6:3a:c0:18:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:05","fromt":"str","to":"nf:c6:3a:c0:19:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:48:DB","fromt":"str","to":"nf:c6:3a:c0:20:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":80,"wires":[["73e39291.1aef8c"]]},{"id":"73e39291.1aef8c","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 21 to 30","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4A:70","fromt":"str","to":"nf:c6:3a:c0:21:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:50:50","fromt":"str","to":"nf:c6:3a:c0:22:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:C5","fromt":"str","to":"nf:c6:3a:c0:23:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:F7","fromt":"str","to":"nf:c6:3a:c0:24:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:65","fromt":"str","to":"nf:c6:3a:c0:25:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:BD","fromt":"str","to":"nf:c6:3a:c0:27:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4C:3F","fromt":"str","to":"nf:c6:3a:c0:28:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:49:0C","fromt":"str","to":"nf:c6:3a:c0:29:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4B:AE","fromt":"str","to":"nf:c6:3a:c0:30:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":80,"wires":[["e42b0fb8.4d16"]]},{"id":"d2625b37.4ff0e8","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 41 to 50","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:47:83","fromt":"str","to":"nf:c6:3a:c0:41:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:1B","fromt":"str","to":"nf:c6:3a:c0:42:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4C:E8","fromt":"str","to":"nf:c6:3a:c0:43:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4B:90","fromt":"str","to":"nf:c6:3a:c0:44:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4B:B3","fromt":"str","to":"nf:c6:3a:c0:45:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:8E","fromt":"str","to":"nf:c6:3a:c0:46:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:75","fromt":"str","to":"nf:c6:3a:c0:47:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:E9","fromt":"str","to":"nf:c6:3a:c0:48:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:54","fromt":"str","to":"nf:c6:3a:c0:49:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:D0","fromt":"str","to":"nf:c6:3a:c0:50:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":120,"wires":[["dcd306fa.c86c48"]]},{"id":"dcd306fa.c86c48","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 51 to 60","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:8A","fromt":"str","to":"nf:c6:3a:c0:51:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:89","fromt":"str","to":"nf:c6:3a:c0:52:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:5D","fromt":"str","to":"nf:c6:3a:c0:53:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:37","fromt":"str","to":"nf:c6:3a:c0:54:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:50:81","fromt":"str","to":"nf:c6:3a:c0:55:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:74","fromt":"str","to":"nf:c6:3a:c0:56:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:5A","fromt":"str","to":"nf:c6:3a:c0:57:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:1D","fromt":"str","to":"nf:c6:3a:c0:58:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:5B","fromt":"str","to":"nf:c6:3a:c0:59:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:2E","fromt":"str","to":"nf:c6:3a:c0:60:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":120,"wires":[["74d024f5.4e2c7c"]]},{"id":"74d024f5.4e2c7c","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 61 to 73","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:0C","fromt":"str","to":"nf:c6:3a:c0:61:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4C:FF","fromt":"str","to":"nf:c6:3a:c0:62:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:50:8C","fromt":"str","to":"nf:c6:3a:c0:63:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4C:E1","fromt":"str","to":"nf:c6:3a:c0:64:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:5D","fromt":"str","to":"nf:c6:3a:c0:65:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:7F","fromt":"str","to":"nf:c6:3a:c0:66:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:45:FA","fromt":"str","to":"nf:c6:3a:c0:67:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:49:27","fromt":"str","to":"nf:c6:3a:c0:68:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:47","fromt":"str","to":"nf:c6:3a:c0:69:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4A:2B","fromt":"str","to":"nf:c6:3a:c0:70:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:45:E6","fromt":"str","to":"nf:c6:3a:c0:71:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:2A","fromt":"str","to":"nf:c6:3a:c0:72:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:c6:3a:f4:4f:75","fromt":"str","to":"nf:c6:3a:c0:73:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"D8:BF:C0:C7:B2:90","fromt":"str","to":"00:BF:C0:C7:B2:90","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":120,"wires":[[]]},{"id":"4ce397ca.74e018","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 1 to 10","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:65","fromt":"str","to":"nf:c6:3a:c0:01:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4A:76","fromt":"str","to":"nf:c6:3a:c0:02:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:32","fromt":"str","to":"nf:c6:3a:c0:03:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:77","fromt":"str","to":"nf:c6:3a:c0:04:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:52","fromt":"str","to":"nf:c6:3a:c0:05:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4B:B6","fromt":"str","to":"nf:c6:3a:c0:06:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:24","fromt":"str","to":"nf:c6:3a:c0:07:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:50:89","fromt":"str","to":"nf:c6:3a:c0:08:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4A:44","fromt":"str","to":"nf:c6:3a:c0:09:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:8A","fromt":"str","to":"nf:c6:3a:c0:10:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":80,"wires":[["3a10c4e6.4d1c1c"]]},{"id":"e42b0fb8.4d16","type":"change","z":"d4c1508c.e4cb9","name":"Netflix singapore convert 31 to 40","rules":[{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:32","fromt":"str","to":"nf:c6:3a:c0:31:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:49:04","fromt":"str","to":"nf:c6:3a:c0:32:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:48:D0","fromt":"str","to":"nf:c6:3a:c0:33:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:41","fromt":"str","to":"nf:c6:3a:c0:34:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:69","fromt":"str","to":"nf:c6:3a:c0:35:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4F:9B","fromt":"str","to":"nf:c6:3a:c0:36:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4E:45","fromt":"str","to":"nf:c6:3a:c0:37:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:6E","fromt":"str","to":"nf:c6:3a:c0:38:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4D:3B","fromt":"str","to":"nf:c6:3a:c0:39:00","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"68:C6:3A:F4:4B:94","fromt":"str","to":"nf:c6:3a:c0:40:00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":80,"wires":[["d2625b37.4ff0e8"]]},{"id":"e8f0d35a.d2d67","type":"function","z":"fa40001c.4d62c","name":"time difference","func":"msg.timed = msg.timenow - msg.payload[0]._value;\nmsg.timediff = msg.payload[0]._value - msg.payload[1]._value;\nmsg.timed1 = msg.timenow - msg.payload[1]._value;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":800,"y":760,"wires":[["ebbe6f10.c309b"]]},{"id":"a51bc0ae.6ebff","type":"function","z":"fa40001c.4d62c","name":"time divide","func":"msg.timenow = msg.time/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":790,"y":720,"wires":[["e8f0d35a.d2d67"]]},{"id":"ded437f6.0bbec8","type":"switch","z":"fa40001c.4d62c","name":"false trigger 1500","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"1500","v2t":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1270,"y":620,"wires":[["13c0b42b.3c00cc"],["995a63da.462b1"]]},{"id":"731b7b9.41ae284","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":720,"wires":[["a51bc0ae.6ebff"]]},{"id":"4e62fe7e.3c486","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":660,"wires":[["76710d9.fa20af4"]]},{"id":"27f42de.e059cd2","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1740,"y":700,"wires":[["fb2d974d.cd61b8"]]},{"id":"b973387a.0b4ba8","type":"delay","z":"fa40001c.4d62c","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":110,"y":720,"wires":[["c34d75c9.8f0b98"]]},{"id":"3a52d580.99091a","type":"http request","z":"fa40001c.4d62c","name":"MAPIQ ENDPOINT password wuy6cEC1AlROIDtAFC1h username switchfi","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://riotinto.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":2590,"y":680,"wires":[["e831348.85a78c8"]]},{"id":"8236b95b.9cb588","type":"template","z":"fa40001c.4d62c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1890,"y":1220,"wires":[["91dd339c.756b","c9188055.09cc4","bda13414.ce8ea8","fbc70155.f8a82","3a712786.d540d8","3ab5cdf6.cc6212","314e4663.e40aaa","8973807.d0d588"]]},{"id":"ef217d7.7b5bb8","type":"template","z":"fa40001c.4d62c","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1870,"y":1300,"wires":[["91dd339c.756b","c9188055.09cc4","bda13414.ce8ea8","fbc70155.f8a82","3a712786.d540d8","3ab5cdf6.cc6212","314e4663.e40aaa","8973807.d0d588","dbf23f8a.f84c1"]]},{"id":"6adf41cc.cc73","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1550,"y":1560,"wires":[["a397b0c9.c1b64"]]},{"id":"4097864a.352d28","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1530,"y":1300,"wires":[["15cefe0f.5b64b2"]]},{"id":"9f394ab0.22a288","type":"split","z":"fa40001c.4d62c","name":"","splt":"\\n","spltType":"str","arraySplt":"2","arraySpltType":"len","stream":false,"addname":"","x":750,"y":1100,"wires":[["12936d28.384723"]]},{"id":"f54e4b7.139d2b8","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1530,"y":1260,"wires":[["a639ac21.1b3a1"]]},{"id":"1d587968.9a9447","type":"template","z":"fa40001c.4d62c","name":"AWAY","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"away\"}","output":"json","x":1870,"y":1260,"wires":[["91dd339c.756b","c9188055.09cc4","bda13414.ce8ea8","3a712786.d540d8","3ab5cdf6.cc6212","314e4663.e40aaa","8973807.d0d588"]]},{"id":"64e156f9.abdf88","type":"switch","z":"fa40001c.4d62c","name":"false trigger 1500","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"1500","v2t":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1290,"y":1080,"wires":[["6adf41cc.cc73"],["a40b7143.a6d33"]]},{"id":"15cefe0f.5b64b2","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1700,"y":1300,"wires":[["ef217d7.7b5bb8"]]},{"id":"a397b0c9.c1b64","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1700,"y":1220,"wires":[["8236b95b.9cb588"]]},{"id":"a639ac21.1b3a1","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1700,"y":1260,"wires":[["1d587968.9a9447"]]},{"id":"a40b7143.a6d33","type":"switch","z":"fa40001c.4d62c","name":"standby 8hour 1501-28800","property":"timed1","propertyType":"msg","rules":[{"t":"btwn","v":"1501","vt":"num","v2":"28800","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1420,"y":1140,"wires":[["f54e4b7.139d2b8"],[]]},{"id":"fe79c2ca.1315c","type":"split","z":"fa40001c.4d62c","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":850,"y":860,"wires":[["5d4b7df.96a5784","e0738f27.dd087"]]},{"id":"5d4b7df.96a5784","type":"timestamp","z":"fa40001c.4d62c","name":"","x":1390,"y":880,"wires":[["1311ba38.b107f6"]]},{"id":"1311ba38.b107f6","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1540,"y":880,"wires":[["31841b7a.b34644"]]},{"id":"f212e3c9.bdb7a","type":"template","z":"fa40001c.4d62c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"json","x":2000,"y":980,"wires":[["c9188055.09cc4","bda13414.ce8ea8","fbc70155.f8a82","3a712786.d540d8","3ab5cdf6.cc6212","314e4663.e40aaa","8973807.d0d588"]]},{"id":"a353bbc0.ed0af8","type":"e-mail","z":"fa40001c.4d62c","server":"smtp.gmail.com","port":"587","secure":false,"tls":true,"name":"markrj89@gmail.com,mark.jones@pureconsulting.co.za","dname":"ucdldrjdwegrpgev","x":4170,"y":3220,"wires":[]},{"id":"117845e8.9f5c7a","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"num"},{"t":"eq","v":"01","vt":"num"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":420,"wires":[["399530fb.bd59a"],["ce4a34f0.97c198","18473c54.02ac54"],["ce4a34f0.97c198","18473c54.02ac54"]]},{"id":"117196fb.6c68b9","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.mac","propertyType":"msg","rules":[{"t":"eq","v":"82ACCB","vt":"str"},{"t":"eq","v":"82ACCF","vt":"str"},{"t":"eq","v":"4897E3","vt":"str"},{"t":"eq","v":"82C34E","vt":"str"},{"t":"eq","v":"82D9F2","vt":"str"},{"t":"eq","v":"487F33","vt":"str"},{"t":"eq","v":"82DAA6","vt":"str"},{"t":"eq","v":"82D968","vt":"str"},{"t":"eq","v":"827FFF","vt":"str"},{"t":"eq","v":"46A92C","vt":"str"},{"t":"eq","v":"4888FE","vt":"str"},{"t":"eq","v":"486A12","vt":"str"},{"t":"eq","v":"46AB0A","vt":"str"},{"t":"eq","v":"82888F","vt":"str"},{"t":"eq","v":"82999F","vt":"str"},{"t":"eq","v":"49954B","vt":"str"},{"t":"eq","v":"82C335","vt":"str"},{"t":"eq","v":"48A056","vt":"str"},{"t":"eq","v":"82D973","vt":"str"},{"t":"eq","v":"82C194","vt":"str"},{"t":"eq","v":"82911A","vt":"str"},{"t":"eq","v":"496694","vt":"str"},{"t":"eq","v":"4895E3","vt":"str"},{"t":"eq","v":"828A97","vt":"str"},{"t":"eq","v":"82CC7F","vt":"str"},{"t":"eq","v":"486E8D","vt":"str"},{"t":"eq","v":"46DC27","vt":"str"},{"t":"eq","v":"82D96C","vt":"str"},{"t":"eq","v":"827132","vt":"str"},{"t":"eq","v":"82C72D","vt":"str"},{"t":"eq","v":"82CE84","vt":"str"},{"t":"eq","v":"826CFD","vt":"str"},{"t":"eq","v":"46676A","vt":"str"},{"t":"eq","v":"82BE6C","vt":"str"},{"t":"eq","v":"82911C","vt":"str"},{"t":"eq","v":"82DAAF","vt":"str"},{"t":"eq","v":"4897F4","vt":"str"},{"t":"eq","v":"82B33A","vt":"str"},{"t":"eq","v":"487F95","vt":"str"},{"t":"eq","v":"486A1C","vt":"str"},{"t":"eq","v":"487B17","vt":"str"},{"t":"eq","v":"82C33E","vt":"str"},{"t":"eq","v":"828AAC","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":44,"x":3530,"y":3440,"wires":[[],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],["595ae80e.872fb8"],[]]},{"id":"595ae80e.872fb8","type":"join","z":"fa40001c.4d62c","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":3730,"y":3400,"wires":[["6307afc8.31841","f18a3aed.3de688"]]},{"id":"fd31646b.20e458","type":"e-mail","z":"fa40001c.4d62c","server":"smtp.gmail.com","port":"587","secure":false,"tls":true,"name":"mark@intuitive.works,james@intuitive.works","dname":"ucdldrjdwegrpgev  ,justin@zeplin.com.au","x":4340,"y":3440,"wires":[]},{"id":"6307afc8.31841","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3960,"y":3340,"wires":[]},{"id":"b30c588b.415e18","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.topic = \"RIO A SENSOR IS OFFLINE :(\"\nmsg.payload = \"Sensor ID = \" + msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":4040,"y":3440,"wires":[["a353bbc0.ed0af8"]]},{"id":"428d67f1.af24c8","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3770,"y":3540,"wires":[["b30c588b.415e18"]]},{"id":"b385f1d8.62aef","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"payload.data","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":2660,"y":3360,"wires":[["8414077a.0a9378"]]},{"id":"8414077a.0a9378","type":"function","z":"fa40001c.4d62c","name":"time divide","func":"msg.timenow = msg.payload.data/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2870,"y":3360,"wires":[["b46bc958.071e38"]]},{"id":"b46bc958.071e38","type":"function","z":"fa40001c.4d62c","name":"time difference","func":"msg.timed = msg.timenow - msg.payload.lastUpdated;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3060,"y":3360,"wires":[["866ef4c7.673048"]]},{"id":"866ef4c7.673048","type":"switch","z":"fa40001c.4d62c","name":"","property":"msg.timed","propertyType":"msg","rules":[{"t":"gt","v":"90000","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":3310,"y":3440,"wires":[["f7d23c91.9f86","e5cfc5bc.364618"],[]]},{"id":"d201e1e9.922c9","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":3330,"y":3660,"wires":[]},{"id":"f7d23c91.9f86","type":"function","z":"fa40001c.4d62c","name":"time difference","func":"msg.lastcheckin = (msg.timed/60)/60;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2620,"y":3520,"wires":[["75fabd9c.2a4b64"]]},{"id":"e155a84c.5936c8","type":"join","z":"fa40001c.4d62c","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":3190,"y":3520,"wires":[["bc483689.0324c8","d201e1e9.922c9"]]},{"id":"75fabd9c.2a4b64","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"payload.time","pt":"msg","to":"lastcheckin","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2840,"y":3520,"wires":[["40872c80.a155b4"]]},{"id":"bc483689.0324c8","type":"json","z":"fa40001c.4d62c","name":"","property":"payload","action":"","pretty":true,"x":2750,"y":3580,"wires":[["26e9dbfc.88b1f4"]]},{"id":"40872c80.a155b4","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.payload = [\n    {\n            Sensor_Id : msg.payload.mac,\n            Time_In_Hours: msg.lastcheckin,\n    },\n];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3040,"y":3520,"wires":[["e155a84c.5936c8"]]},{"id":"26e9dbfc.88b1f4","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.topic = \"Rio Heartbeat Late Sensors\";\nmsg.description = \"This is an automatied System Check RIO Perth Sigfox Sensor exceeding 24hours without a check in\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2980,"y":3620,"wires":[[]]},{"id":"f18a3aed.3de688","type":"json","z":"fa40001c.4d62c","name":"","property":"payload","action":"","pretty":true,"x":3850,"y":3460,"wires":[["b30c588b.415e18"]]},{"id":"e5cfc5bc.364618","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":3290,"y":3380,"wires":[]},{"id":"f1db2e4a.acf7b","type":"join","z":"fa40001c.4d62c","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":3870,"y":3900,"wires":[["f18a3aed.3de688"]]},{"id":"7c6e90a7.583e9","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.mac","propertyType":"msg","rules":[{"t":"eq","v":"804DA2","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":3390,"y":3300,"wires":[["f1db2e4a.acf7b"],[]]},{"id":"93a14a47.a9ac68","type":"delay","z":"fa40001c.4d62c","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":720,"y":480,"wires":[["39809aae.6f8476"]]},{"id":"e5b82c62.f859b","type":"influxdb out","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","measurement":"Rio_sigfox_data","precision":"","retentionPolicy":"","database":"rio-aus","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"rio-aus","x":1490,"y":400,"wires":[],"info":"XnRQzcg53KA2Poi69tQ79Tvi7AQRYjlSopK5FznucTFMwbAFj9X1xEqrN_qxg0u1SSMqTsMm__utvRV4KD9eMw=="},{"id":"ce4a34f0.97c198","type":"function","z":"fa40001c.4d62c","name":"sorting 2.0 Live Data","func":"msg.payload = [{\n            mac : msg.payload.sensorId,\n            status1: String(msg.payload.status),\n            lastUpdated: Number(msg.payload.lastUpdated),\n            site : \"Perth\",\n            data: String(msg.payload.status),\n        },\n        {\n            mac : msg.payload.sensorId,\n            site : \"Perth\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":740,"y":440,"wires":[["e5b82c62.f859b"]]},{"id":"399530fb.bd59a","type":"function","z":"fa40001c.4d62c","name":"sorting 2.0 Heartbeat ","func":"msg.payload = [{\n            mac : msg.payload.sensorId,\n            heartbeat: String(msg.payload.status),\n            data : \"00\",\n            site : \"Perth\",\n            lastUpdated: Number(msg.payload.lastUpdated),\n        },\n        {\n            mac : msg.payload.sensorId,\n            site : \"Perth\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":740,"y":400,"wires":[["e5b82c62.f859b"]]},{"id":"77b7dbea.b7aef4","type":"influxdb in","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":680,"y":820,"wires":[["fe79c2ca.1315c","4a31254a.43e9dc","621f3723.d39908"]]},{"id":"4d22f0d0.fdb7e","type":"inject","z":"fa40001c.4d62c","name":"midnight reboot","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"00 16 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":170,"y":880,"wires":[["72078483.69c63c"]]},{"id":"37ee768.2793b8a","type":"influxdb in","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":460,"y":720,"wires":[["731b7b9.41ae284"]]},{"id":"c34d75c9.8f0b98","type":"template","z":"fa40001c.4d62c","name":"get 1 sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\")  |> range(start:-24h, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\") |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"lastUpdated\" or r[\"_field\"] == \"status1\")|> filter(fn: (r) => r[\"mac\"] == \"{{payload.sensorId}}\") |> sort(columns: [\"_time\"], desc: true)  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":280,"y":720,"wires":[["37ee768.2793b8a"]]},{"id":"7d4a7ab.d872884","type":"template","z":"fa40001c.4d62c","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":370,"y":1160,"wires":[["c1147022.bf233"]]},{"id":"c1147022.bf233","type":"influxdb in","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":580,"y":1100,"wires":[["9f394ab0.22a288"]]},{"id":"4d23043b.7b17bc","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1060,"wires":[["20bfbd0.82a8b44"]]},{"id":"20bfbd0.82a8b44","type":"function","z":"fa40001c.4d62c","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":750,"y":1060,"wires":[["692eb84c.a39198"]]},{"id":"692eb84c.a39198","type":"function","z":"fa40001c.4d62c","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nmsg.timediff = msg.paytime0 - msg.paytime1;\nmsg.timed1 = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":740,"y":1000,"wires":[["4aca654.13ebd9c"]]},{"id":"bf0dd9a8.925168","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1050,"y":1080,"wires":[[],["cd015dea.956ea"],["4097864a.352d28"]]},{"id":"7f0422c.178f6dc","type":"function","z":"fa40001c.4d62c","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload[0]._time)\nlet timestamp = new Date(msg.payload[0]._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nmsg.paytime3 = (\"original timestamp is \" + msg.payload[1]._time)\nlet timestamp1 = new Date(msg.payload[1]._time)\nmsg.paytime1 = (timestamp1.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":400,"y":1060,"wires":[["4d23043b.7b17bc"]]},{"id":"2c418a1c.9a0426","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"600","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":210,"y":1100,"wires":[["7d4a7ab.d872884"]]},{"id":"26dbb88b.0a5868","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"Mark\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":650,"y":40,"wires":[["56d4cd93.e1dae4"]]},{"id":"56d4cd93.e1dae4","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"change","p":"payload.lastUpdated","pt":"msg","from":"timess","fromt":"str","to":"timestamp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":40,"wires":[["b8b3ede1.ecca8"]]},{"id":"845c6592.3c0358","type":"inject","z":"fa40001c.4d62c","name":"01","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"Mark\",\"lastUpdated\":\"timess\",\"status\":\"01\"}","payloadType":"json","x":650,"y":80,"wires":[["56d4cd93.e1dae4"]]},{"id":"dd7886d4.e87988","type":"inject","z":"fa40001c.4d62c","name":"Heartbeat","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"Mark\",\"lastUpdated\":\"timess\",\"status\":\"030d20\"}","payloadType":"json","x":660,"y":120,"wires":[["56d4cd93.e1dae4"]]},{"id":"b8b3ede1.ecca8","type":"function","z":"fa40001c.4d62c","name":"time divide","func":"msg.payload.lastUpdated = (msg.timestamp)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":210,"y":240,"wires":[["f4bb008c.53f02","b6550bb9.fc4cc8"]]},{"id":"955f51a0.840e6","type":"function","z":"fa40001c.4d62c","name":"sorting 2.0 Live Data","func":"msg.payload = [{\n            mac : msg.payload.mac,\n            status1: \"00\",\n            lastUpdated: Number(msg.payload._time),\n            data: \"00\",\n            site : msg.payload.site,\n        },\n        {\n            mac : msg.payload.mac,\n            site : msg.payload.site,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1660,"y":920,"wires":[["cc35a3f.567806"]]},{"id":"e0738f27.dd087","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"payload._time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1420,"y":920,"wires":[["955f51a0.840e6"]]},{"id":"4a31254a.43e9dc","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1000,"y":820,"wires":[]},{"id":"cc35a3f.567806","type":"join","z":"fa40001c.4d62c","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1890,"y":920,"wires":[["e5b82c62.f859b"]]},{"id":"1c247d8.0e5ca83","type":"inject","z":"fa40001c.4d62c","name":"midnight reboot","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"10 16 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":170,"y":920,"wires":[["72078483.69c63c"]]},{"id":"995a63da.462b1","type":"switch","z":"fa40001c.4d62c","name":"standby 8hour 1501-28800","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"1501","vt":"num","v2":"28800","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1340,"y":680,"wires":[["6c1b83b5.7615cc"],["13c0b42b.3c00cc"]]},{"id":"9022f3e3.727c4","type":"http request","z":"fa40001c.4d62c","name":"MAPIQ ENDPOINT password wuy6cEC1AlROIDtAFC1h username switchfi","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://riotinto.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":false,"proxy":"","authType":"basic","x":2830,"y":1160,"wires":[["c7ac4974.a3b5b8"]]},{"id":"72078483.69c63c","type":"template","z":"fa40001c.4d62c","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\")  |> range(start: -24h, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"_field\"] == \"site\") |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":510,"y":900,"wires":[["77b7dbea.b7aef4"]]},{"id":"8e2c7dd8.2bb25","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"7F5804\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":90,"y":100,"wires":[["56d4cd93.e1dae4"]]},{"id":"acbc42bb.f1e85","type":"inject","z":"fa40001c.4d62c","name":"midnight reboot","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"30 16 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":170,"y":800,"wires":[["72078483.69c63c"]]},{"id":"f909856a.051228","type":"inject","z":"fa40001c.4d62c","name":"midnight reboot","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"20 16 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":170,"y":840,"wires":[["72078483.69c63c"]]},{"id":"22182c95.bc0374","type":"inject","z":"fa40001c.4d62c","name":"morning reboot","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"02 20 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":960,"wires":[["72078483.69c63c"]]},{"id":"38ba4892.968b88","type":"inject","z":"fa40001c.4d62c","name":"morning reboot","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"00 20 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":1000,"wires":[["72078483.69c63c"]]},{"id":"cd015dea.956ea","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[1]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1170,"y":1020,"wires":[[],["6adf41cc.cc73"],["64e156f9.abdf88"]]},{"id":"7ad408d.f91f8f8","type":"influxdb in","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":3000,"y":3200,"wires":[["bb84cc39.67721","44145086.68041"]]},{"id":"915de357.2d958","type":"template","z":"fa40001c.4d62c","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\")  |> range(start: -7d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"_field\"] == \"heartbeat\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":2810,"y":3200,"wires":[["7ad408d.f91f8f8"]]},{"id":"ff8c6ad2.f97838","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"00 04 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":2530,"y":3200,"wires":[[]]},{"id":"6711929f.9cbecc","type":"split","z":"fa40001c.4d62c","name":"","splt":"\\n","spltType":"str","arraySplt":"2","arraySpltType":"len","stream":true,"addname":"","x":3230,"y":3300,"wires":[["117196fb.6c68b9","b385f1d8.62aef","7c6e90a7.583e9"]]},{"id":"7ab5eef.3212b1","type":"deduplicate","z":"fa40001c.4d62c","name":"","keyproperty":"payload.table","expiry":5,"x":2910,"y":2940,"wires":[["f5d713a8.bebf3"],[]]},{"id":"bb84cc39.67721","type":"split","z":"fa40001c.4d62c","name":"","splt":"\\n","spltType":"str","arraySplt":"2","arraySpltType":"len","stream":false,"addname":"","x":2990,"y":3160,"wires":[["f34cc3fb.5f534"]]},{"id":"44145086.68041","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3270,"y":3240,"wires":[]},{"id":"898f4fd5.2fa74","type":"join","z":"fa40001c.4d62c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"payload.mac","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"5","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":3790,"y":3260,"wires":[["f0df793f.ab2628"]]},{"id":"b20b49cd.8a4878","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3990,"y":3100,"wires":[]},{"id":"f0df793f.ab2628","type":"function","z":"fa40001c.4d62c","name":"","func":"msg.topic = \"RIO A SENSOR IS OFFLINE :(\"\nmsg.payload = \"Sensor ID = \" + msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3820,"y":3200,"wires":[["b20b49cd.8a4878","a353bbc0.ed0af8"]]},{"id":"773e728c.c83c6c","type":"switch","z":"fa40001c.4d62c","name":"","property":"dupvalue","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2900,"y":2880,"wires":[[],["292ad117.090b6e","466b2fe6.8c968"]]},{"id":"292ad117.090b6e","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":3110,"y":2840,"wires":[]},{"id":"466b2fe6.8c968","type":"join","z":"fa40001c.4d62c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"payload.mac","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":3400,"y":2940,"wires":[["f0df793f.ab2628"]]},{"id":"715c17ec.b262a8","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"dupvalue","targetType":"msg","statusVal":"","statusType":"auto","x":3210,"y":3100,"wires":[]},{"id":"f5d713a8.bebf3","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":3130,"y":2940,"wires":[]},{"id":"f34cc3fb.5f534","type":"function","z":"fa40001c.4d62c","name":"value","func":"msg.dupvalue = msg.payload[0].table - msg.payload[1].table\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2990,"y":3060,"wires":[["715c17ec.b262a8","773e728c.c83c6c"]]},{"id":"b6550bb9.fc4cc8","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"46A92C|46AB0A|486E8D|487B17|487F95|4888FE|48996E|494E59|49954B|499E26|7F4528|7F4558|7F46CB|7F4763|7F4944|7F4B6D|7F4CFC|7F4DCC|7F4F2A|7F4F8E|7F4FA1|7F4FA3|7F4FA4|7F4FA9|7F4FD1|7F4FD2|7F512E|7F514F|7F5163|7F5169|7F516A|7F51AC|7F51EA|7F5208|7F520C|7F5211|7F5345|7F534A|7F536E|7F5389|7F538B|7F538C|7F538F|7F53AA|7F53B5|7F53D4|7F53D5|7F53D6|7F53D7|7F53D8|7F53D9|7F53DA|7F53DB|7F53EE|7F5419|7F541B|7F541C|7F541D|7F541E|7F5425|7F5427|7F542C|7F543A|7F543B|7F5440|7F5532|7F5533|7F5534|7F5535|7F5536|7F5580|7F5587|7F5588|7F558C|7F5597|7F55C0|7F55C1|7F55FF|7F5605|7F5607|7F5636|7F564D|7F564E|7F574E|7F5750|7F5752|7F5758|7F5759|7F575A|7F5762|7F5764|7F5794|7F5796|7F5797|7F579A|7F579C|7F579D|7F579F|7F57A0|7F57A1|7F57A3|7F57A5|7F57A6|7F57A7|7F57A8|7F57A9|7F57AC|7F57AE|7F57B2|7F57B4|7F57B6|7F57B8|7F57BA|7F57BB|7F57BD|7F57BE|7F57C1|7F57C2|7F57C4|7F57C6|7F57CB|7F57CC|7F57CE|7F57CF|7F57D1|7F57D8|7F57DA|7F57E2|7F57E4|7F57E5|7F57E6|7F57E7|7F57EB|7F57F4|7F5800|7F5802|7F5803|7F5804|7F5805|7F5806|7F5807|7F581B|7F581C|7F581E|7F5820|7F5821|7F5822|7F5823|7F5825|7F582A|7F582E|7F582F|7F5833|7F5834|7F5835|7F5837|7F5839|7F583D|7F5841|7F5845|7F5848|7F584C|7F584D|7F584F|7F5850|7F5851|7F5853|7F5854|7F59CC|7F5D9B|7F6042|7F6043|7F6049|7F604C|7F604E|7F6059|7F605E|7F605F|7F6067|7F606A|7F606B|7F607F|7F6082|7F6084|7F609F|7F60A9|7F60AD|7F60C2|7F6101|7F61D2|7F61D7|7F61DB|7F61DD|7F61DE|7F61E0|7F61E3|7F61E6|7F61E7|7F61E9|7F61EE|7F61EF|7F61F0|7F61F1|7F61F5|7F61F6|7F61F8|7F61F9|7F61FC|7F6200|7F6208|7F6209|7F620B|7F620C|7F6213|7F6219|7F621A|7F621B|7F621D|7F621E|7F622A|7F627E|7F627F|7F6280|7F6281|7F6282|7F6285|7F6289|7F628A|7F6290|7F6291|7F6B29|7F6B2A|7F6B2B|7F6EA9|7F6EAA|7F6FE6|7F7049|7F704C|7F7050|7F7063|7F7064|7F706B|7F706D|7F706E|7F7073|7F7087|7F7088|7F708C|7F7090|7F7091|7F7092|7F70B8|7F70B9|7F70BD|7F70BE|7F70BF|7F70C1|7F70C3|7F70CB|7F70E2|7F70E4|7F70E8|7F70E9|7F70EA|7F70EB|7F70EC|7F70ED|7F70F0|7F7106|7F710A|7F710B|7F710E|7F7110|7F7113|7F712C|7F712D|7F712F|7F7132|7F7134|7F7135|7F7136|7F7138|7F7154|7F7157|7F7158|7F7159|7F715A|7F715B|7F715E|7F715F|7F7161|7F7164|7F7165|7F7182|7F7183|7F7185|7F7187|7F7189|7F718A|7F71A9|7F71AA|7F71AC|7F71AE|7F71B0|7F71B2|7F71B4|7F71B5|7F71B7|7F71BD|7F71D1|7F71D3|7F71D6|7F71D7|7F71D9|7F71DA|7F71DB|7F71DC|7F71DE|7F71DF|7F71E0|7F71E1|7F71E2|7F71E3|7F71E4|7F71E5|7F71E6|7F71E7|7F71E8|7F71E9|7F71EB|7F71EC|7F71ED|7F71F0|7F71F1|7F71F2|7F71F3|7F71F4|7F71F5|7F71F6|7F71F7|7F71F8|7F71F9|7F71FA|7F71FB|7F71FC|7F71FD|7F71FE|7F71FF|7F7200|7F7201|7F7202|7F7203|7F7205|7F7207|7F7220|7F7223|7F7224|7F7228|7F7229|7F722A|7F722C|7F722E|7F7230|7F7237|7F723D|7F723F|7F7240|7F7243|7F7245|7F7246|7F7248|7F724A|7F724E|7F724F|7F7251|7F7252|7F7253|7F7254|7F7255|7F7256|7F7257|7F7258|7F7259|7F725A|7F725C|7F725E|7F725F|7F7260|7F7262|7F7264|7F7265|7F7266|7F7267|7F7268|7F7269|7F726B|7F726C|7F726D|7F726E|7F726F|7F7270|7F7272|7F7273|7F7275|7F7276|7F727B|7F727C|7F727D|7F727E|7F727F|7F7280|7F7281|7F7283|7F7284|7F7287|7F7288|7F728A|7F728B|7F728C|7F728D|7F728E|7F728F|7F7290|7F7291|7F7294|7F7295|7F7296|7F7297|7F7298|7F7299|7F729A|7F729B|7F729C|7F729D|7F729E|7F729F|7F72A0|7F72A8|7F72A9|7F72AA|7F72AC|7F72AD|7F72AE|7F72AF|7F72B1|7F72B2|7F72B3|7F72B4|7F72B5|7F72B6|7F72B7|7F72B8|7F72B9|7F72BA|7F72BB|7F72BC|7F72BD|7F72BE|7F72BF|7F72C1|7F72C2|7F72C3|7F72C6|7F72C7|7F72C8|7F72C9|7F72CA|7F72CB|7F72CC|7F72CD|7F72D0|7F72D1|7F72D2|7F72D6|7F72D7|7F72D8|7F72D9|7F72DB|7F72DC|7F72DD|7F72DE|7F72DF|7F72E0|7F72E1|7F72E2|7F72E3|7F72E4|7F72E5|7F72E7|7F72E8|7F72E9|7F72EC|7F72EE|7F72F0|7F72F2|7F72F3|7F72F5|7F72F7|7F72F8|7F72FA|7F72FB|7F72FC|7F72FD|7F72FE|7F72FF|7F7300|7F7301|7FC855|7FCA07|7FCA37|7FCA4F|7FCA57|7FCA61|7FCA75|7FCAAC|7FCAB0|7FCAF1|7FCAF2|7FCAFA|7FCB19|7FCB24|7FCB26|7FCB59|7FCB5A|7FD18C|7FD1B4|8031C3|8031C5|8031C8|8031C9|8031CB|80320F|80321E|80322A|803232|803233|803242|803244|803246|803247|803248|80324D|803251|803253|803256|803257|803258|80325A|80325F|803266|803267|803268|803269|80326A|80326F|803278|803279|80327A|80327B|803284|80328B|803297|803299|8032A9|8032AD|8032B2|8032B3|8032BA|8032BB|8032BE|8032BF|8032C1|8032C5|8032C7|8032CD|8032CE|8032CF|8032D0|8032D1|8032D9|8032DB|8032DC|8032DD|8032E3|8032E4|8032E5|8032E6|8032E7|8032EC|8032F2|8032F3|8032F4|8032F6|8032FB|803307|803319|803323|80332A|80332C|80332E|80332F|803330|803331|803337|803338|803339|803344|803346|803348|80334A|80334D|803350|803352|803353|803354|803356|803358|803359|80335A|80335B|80335D|803362|803363|80336C|80336E|803373|803389|803395|803397|80339A|80339B|8033D5|8033D7|8033D8|8033D9|8033DE|8033DF|8033FC|8033FE|803400|803401|803405|803471|803501|803532|803571|803598|8035D8|8035DA|8035DB|8035F9|8035FB|803604|803606|803615|803616|803650|803651|803653|803674|803675|803676|803681|803685|8036BD|8036DD|8036E0|8036E2|8036F3|803701|803724|803728|803729|80372C|80372D|80372E|803730|803732|803733|80375D|803762|803763|80376D|80376F|803798|803799|80379A|80379B|8037A4|8037A5|8037A6|8037A8|8037A9|8037AA|8037AC|8037AE|8037B4|8037B6|8037B7|8037B8|8037B9|8037BA|8037BB|8037BC|8037BD|8037C0|8037C1|8037CD|8037E8|8037E9|8037EC|803801|803810|803811|803812|803813|803814|803815|803816|80381A|80381B|803820|803822|803823|803824|803825|803826|803827|80382E|803834|803836|803837|80383F|803856|803857|80385C|80385E|80387C|80387D|803880|803881|803882|803883|803889|80388C|80388D|80388E|80388F|803890|803891|803892|80389B|80389C|80389D|80389E|80389F|8038A0|8038A2|8038A3|8038A5|8038A7|8038B3|8038BA|8038BB|8038BC|8038BE|8038C2|8038C3|8038C5|8038D6|8038E8|8038E9|8038EA|8038F8|8038FA|8038FB|8038FC|8038FD|8038FE|803908|803909|80390A|80390B|80390C|80390D|80390E|80390F|80393D|80393E|803966|803969|80396A|80396B|803971|803974|803976|803977|803979|80397A|804A37|804A42|804AA3|804AAF|804B09|804B10|804B1E|804B2E|804B4A|804B89|804C07|804C08|804C47|804C84|804CC3|804CCE|804CD1|804D2C|804D32|804D4C|804D57|804D99|804D9F|804DA0|804DA1|804DAB|804DAC|804DAF|804DB1|804DB4|804DB6|804DB9|804DBA|804DC5|804DD5|804E1C|804E1F|804E20|804E2C|804E2E|804E2F|804E31|804E3C|804E3D|804E40|804E41|804E45|804E89|804E99|804E9B|804E9F|804EA7|804EBE|804EC7|804EC9|804ECA|804ECD|804EDB|804EDE|804EFF|804F03|804F05|804F08|804F0A|804F10|804F12|804F13|804F16|804F18|804F19|804F1D|804F24|804F25|804F2B|804F31|804F34|804F35|804F37|804F43|804F46|804F6B|804F6F|804F72|804F7B|804F7C|804F81|804F83|804F85|804F89|804F8B|804F8C|804F8E|804FE8|804FED|804FF1|805113|805124|8051E0|805200|80521C|805269|80526A|8052D1|8052F1|805DE9|805DF6|805E02|805E1E|805E20|805E2D|805E35|805E4C|805E4E|805E8F|805E97|805EA0|805EA1|805EB0|805EBF|805EC2|805EC4|805EF6|805EFD|805F04|805F44|805F5F|805F60|806022|806056|806F38|807005|80700D|80700E|807018|807027|8070D4|80712A|80735A|80744F|807496|8074D0|807510|8081B7|8084DE|8085CE|80DE9A|80DEFA|80DFF1|80DFF9|80E00B|80E010|80E011|80E020|80E025|80E026|80E033|80E037|80E039|80E27E|80E56C|80E61B|80E639|80E63D|80E696|80E6F3|80E800|80E813|80E84E|80E856|80E8AD|80E8C1|80E8C5|80E922|80E958|80E9A8|80EA57|80EAB9|80ECEC|80F3E6|80F41E|80F760|80F762|80F764|80F76A|80F76B|80F76F|80F770|80F78E|80F7C3|80F7C5|80F7C6|80F7C7|80F7C8|80F7CD|80F7D5|80F7D6|80F7D7|80F7D8|80F7DC|80F7E1|80F7E2|80F7E3|80F7F5|80F803|80F807|80F80A|80F80C|80F810|80F813|80F819|80F821|80F823|80F825|80F828|80F82C|80F82E|80F82F|80F834|80F835|80F83A|80F83E|80F83F|80F844|80F84A|80F84D|80F850|80F85C|80F85F|80F86A|80F86D|80F86E|80F87F|80F887|80F88A|80F88C|80F890|80F897|80F898|80F899|80F89E|80F89F|80F8A1|80F8A5|80F8A6|80F8AA|80F8AD|80F8B1|80F8B6|80F8B7|80F8BD|80F8CC|80F8D9|80F8E3|80F8EE|80F8F8|80F8FB|80F8FD|80F901|80F902|80F909|80F90B|80F90D|80F913|80F915|80F917|80F91B|80F927|80F928|80F929|80F92E|80F935|80F936|80F93A|80F946|80F99D|80F99F|80F9A0|80F9A2|80F9A3|80F9A5|80F9B6|80FA8C|80FAF4|80FBC9|80FE67|80FEE2|80FEEA|80FEF2|80FEF4|80FEF5|80FEFF|80FF06|80FF0E|80FF0F|80FF2C|80FF59|80FF5C|80FF5D|80FF61|80FF62|80FF6B|80FF6C|80FF73|80FF74|80FF75|80FF7A|80FF84|813742|8137FE|813875|813888|8138E0|8138F1|827FFF|82888F|828A97|82911A|82911C|829533|82979C|82ACCB|82ACCF|82B33A|82BE6C|82C194|82C72D|82D968|82D9F2|82DAA6|82DAAF","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":270,"y":360,"wires":[["f9c819e5.90b678"],["117845e8.9f5c7a"]]},{"id":"f9c819e5.90b678","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"num"},{"t":"eq","v":"01","vt":"num"}],"checkall":"true","repair":false,"outputs":3,"x":370,"y":320,"wires":[["4bc61f89.db7a8"],["769de18a.248e","18473c54.02ac54"],["769de18a.248e","18473c54.02ac54"]]},{"id":"769de18a.248e","type":"function","z":"fa40001c.4d62c","name":"sorting 2.0 Live Data","func":"msg.payload = [{\n            mac : msg.payload.sensorId,\n            status1: String(msg.payload.status),\n            lastUpdated: Number(msg.payload.lastUpdated),\n            data: String(msg.payload.status),\n            site : \"Brisbane\",\n        },\n        {\n            mac : msg.payload.sensorId,\n            site : \"Brisbane\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":740,"y":360,"wires":[["bf1c7904.d016f8"]]},{"id":"4bc61f89.db7a8","type":"function","z":"fa40001c.4d62c","name":"sorting 2.0 Heartbeat ","func":"msg.payload = [{\n            mac : msg.payload.sensorId,\n            heartbeat: String(msg.payload.status),\n            data : \"00\",\n            site : \"Brisbane\",\n            lastUpdated: Number(msg.payload.lastUpdated),\n        },\n        {\n            mac : msg.payload.sensorId,\n            site : \"Brisbane\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":740,"y":320,"wires":[["bf1c7904.d016f8"]]},{"id":"bf1c7904.d016f8","type":"influxdb out","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","measurement":"Rio_sigfox_data","precision":"","retentionPolicy":"","database":"rio-aus","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"rio-aus","x":1670,"y":320,"wires":[],"info":"XnRQzcg53KA2Poi69tQ79Tvi7AQRYjlSopK5FznucTFMwbAFj9X1xEqrN_qxg0u1SSMqTsMm__utvRV4KD9eMw=="},{"id":"32989ae9.12d486","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload.sensorId","v":"46A92C","vt":"str"},{"p":"payload.status","v":"00","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":90,"y":300,"wires":[["b6550bb9.fc4cc8","56d4cd93.e1dae4"]]},{"id":"804941f1.155f4","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1390,"y":20,"wires":[]},{"id":"d60be87f.f16558","type":"delay","z":"fa40001c.4d62c","name":"","pauseType":"rate","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2210,"y":660,"wires":[["3a52d580.99091a"]]},{"id":"2b28c42a.c7460c","type":"mqtt in","z":"9f2f3e0.64ecbc","name":"","topic":"rio/people/#","qos":"0","datatype":"auto","broker":"eebe667d.495498","x":70,"y":80,"wires":[["476308f2.9a5398","b08cf0f0.a9516"]]},{"id":"6703a39b.fbb98c","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"topic","pt":"msg","from":"rio/people/brisbane/tof/","fromt":"str","to":"","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"/people/count","fromt":"str","to":"","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":":","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":120,"wires":[["94fc5f41.b0bef","40e18a16.308b34","639a96f7.9f99a8","deeb26f7.89a4b8","b3d4842a.f0dbc8"]]},{"id":"58906fe5.4c2ff","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"5","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":80,"wires":[["6703a39b.fbb98c","b08cf0f0.a9516"],["e951828e.24fe"]]},{"id":"476308f2.9a5398","type":"split","z":"9f2f3e0.64ecbc","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":210,"y":100,"wires":[["6703a39b.fbb98c"]]},{"id":"18156920.0bb907","type":"http request","z":"9f2f3e0.64ecbc","name":"MAPIQ ENDPOINT password wuy6cEC1AlROIDtAFC1h username switchfi","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://riotinto.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":1390,"y":220,"wires":[["3496b8e9.0e97d8"]]},{"id":"79cd7bda.26c5b4","type":"template","z":"9f2f3e0.64ecbc","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"brisbane\",\"floorNumber\":0,\"sensorId\":\"{{topic}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}]","output":"json","x":530,"y":180,"wires":[["4e261b79.83d204","f019b216.1e44f"]]},{"id":"e1655ea7.8a59d","type":"template","z":"9f2f3e0.64ecbc","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"brisbane\",\"floorNumber\":0,\"sensorId\":\"{{topic}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"json","x":480,"y":260,"wires":[["6386959b.9ee40c","f019b216.1e44f"]]},{"id":"e9cbaf4d.54c05","type":"timestamp","z":"9f2f3e0.64ecbc","name":"","x":270,"y":140,"wires":[["79cd7bda.26c5b4"]]},{"id":"92286fac.12be2","type":"timestamp","z":"9f2f3e0.64ecbc","name":"","x":290,"y":260,"wires":[["e1655ea7.8a59d"]]},{"id":"40e18a16.308b34","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"1","vt":"num","v2":"5","v2t":"num"},{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":90,"y":220,"wires":[["e9cbaf4d.54c05"],["92286fac.12be2"],[]]},{"id":"cf41d79a.90fb18","type":"function","z":"9f2f3e0.64ecbc","name":"sorting 2.0 Heartbeat ","func":"msg.payload = [{\n            mac : msg.payload.sensorId,\n            data :Number(msg.payload),\n            site : \"Brisbane\",\n        },\n        {\n            mac : msg.topic,\n            site : \"Brisbane\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":860,"y":80,"wires":[["c5b62215.4c66f","ffa7bb6a.d8dd78"]]},{"id":"2499a914.201526","type":"influxdb out","z":"9f2f3e0.64ecbc","influxdb":"bbc6c1f7.7140d","name":"","measurement":"Rio_meeting-room_data","precision":"","retentionPolicy":"","database":"rio-aus","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"rio-brisbane","x":1370,"y":80,"wires":[],"info":"XnRQzcg53KA2Poi69tQ79Tvi7AQRYjlSopK5FznucTFMwbAFj9X1xEqrN_qxg0u1SSMqTsMm__utvRV4KD9eMw=="},{"id":"94fc5f41.b0bef","type":"timestamp","z":"9f2f3e0.64ecbc","name":"","x":630,"y":80,"wires":[["cf41d79a.90fb18"]]},{"id":"c5b62215.4c66f","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"120","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1100,"y":100,"wires":[["2499a914.201526"]]},{"id":"152de699.41c3f9","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F902|80F929|805E2D|7F7264|803650|803814|80F897|80332F|7F6084|80325F|803892|803248|80F8A5|7F6281|7F7272|8038C3|7F581B|7F4528|7F57AE|803674|8032CF|80390A|80ECEC|80F917|807018|803908|8038E9|7F627E|7F57A6|7F7291|80E639|8037B8|803890|7F7287|7F53D8|7F564D|7F5854|803269|80F9A2|7F57E2|803812|807496|7F71D9|80F935|8037B4|7F71E3|80E6F3|8032BF|803653|803837|80F8B7|803356|80700E|7F71FD|805F04|80F76A|7F722E|7F4FA1|7F4558|7F7288|7F72D7|7F575A|7F516A|7F72E2|7F72AE|7F70C1|7F71AA|7F72F0|7F7246|7F715E|7F727E|7F541E|7F7158|7F4763|7F53B5|7F4FD2|7F72FF|7F70E8|7F7165|7F710E|7F61F5|7F6280|7F729D|7F541D|80327A|7F7270|7F5837|7F71FC|803353|7F60AD|7F7050|7F7090|7F4FA4|7F57A5|7F72A8|7F7106|7F7251|8038A3|7F57BA|7F715F|7F57D8|7F7203|7F72D6|7F7183|7F579C|8033FE|7F70E4|7F7295|7F604E|7F7201|803251|7F60A9|7F520C|7F72E5|7F722C|7F7267|8037C0|7F70EA|803966|7F71B5|806F38|8038A7|80F86E|7F71E2|80F936|803279|813888|7F579A|8037BC|8035FB","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":990,"y":40,"wires":[["febcf879.979778"],[]]},{"id":"8758a82b.dfecc8","type":"mqtt out","z":"fa40001c.4d62c","name":"","topic":"","qos":"","retain":"","broker":"fb1189d8.7a3418","x":1590,"y":80,"wires":[]},{"id":"cc40009.9fe34","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"7F72BB|7F61D2|7F7185|7F579D|8138E0|7F7290|804E2C|80385C|8032E3|805E1E|804F37|813875|80F7C8|805E20|7F72FD|8037BB|8038A2|7F5588|7F7273|7F7073|7F7154|8036F3|7F71D7|7F5845|7F61DE|803825|82911C|82888F|7F72E9|80F7CD|7F70C3|803798|7F70BE|7F722A|82BE6C|82ACCF|7F61E6|46676A|7F72BC|7F728A|8037A5|80388E|7F606A|7F726F|7F728F|7F538B|7F7237|7F4DCC|7F558C|8037A4|80383F|46A92C|80382E|7F71ED|49954B|7F72B2|7F61E3|82DAAF|48996E|82979C|82DAA6|82D9F2|487B17|8038BB|80F3E6|7F72F8|80F88C|8032DB|80F92E|7F72FA|7F582F|80F928|7F5802|803244|82D968|82B33A|7F6B2A|827FFF|46AB0A|486E8D|82C72D|7F725A|82ACCB|487F95|828A97|80396A|4888FE|82911A|82C194|7F7134|7F6200|80F8A6|7F61EE|80F9A3|7F5536|80F87F|803799|80372E|80F909|80F8A1|805EA0|7F71F9|80EA57|8031C3|7F604C|803297|803616|7F72A0|803909|80F99F|8037B9|80F901|80E020|80E27E|80F88A|80FEFF|7F708C|7F5535|7F712D|7F6059|80F7C7|8038D6|803979|7F72D1|80F80C|80390D","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":990,"y":80,"wires":[["20cf65e7.2e384a"],[]]},{"id":"54844f63.798ab","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804ECA|804CD1|7F71B7|7F7265|8032F4|8038FC|804F72|803257|7F725F|80324D|7F7254|7F72B9|803977|80700D|7F71EC|80F823|7F582E|7F72AA|804F19|803339|7F71DA|80F819|8032D0|803598|7F57DA|7F71DE|80F834|80FF0F|8036E0|80F82C|7F7228|7FCAB0|7FCA75|80372C|7F606B|803762|804F03|804F8E|7F71F2|8032F3|805EBF|804F1D|7F5822|80376F|804F24|8032C1|7F715B|7F728C|80FF06|7FCA37|80E011|8038FD|7F57B4|803883|7FCAF1|8137FE|7F61F6|7F706E|7F723D|7FD18C|803358|804E3D|7F729C|7F57AC|7F7229|80F813|80F85F|804E1C|7F5835|7F57E7|7F70BF|803889|7F723F|7F70EB|7F729B|803400|80389B|7F72B6|7F70B9|80F803|80E037|7F7275|7F72AF|804DAF|803728|7FCAFA|7F72EE|804DA1|7F7092|804DC5|7F710A|803604|7F7283|7F7248|7F7243|7F71E6|80E856|7F4B6D|7F61F8|8037A8|8051E0|7F621A|7F5752|8038B3|804D4C|803813|803810|804B89|7F5804|7F72B1|80F7D6|80327B|8032B3|7F7063|7F57A9","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":990,"y":120,"wires":[["6537d431.8b70ac"],[]]},{"id":"94273c02.b1888","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F7E2|7F5211|7F5823|7F71E5|803571|805113|804EFF|804DBA|7F7269|804E31|7F72D9|7FCA4F|803246|804D9F|803971|7F60C2|7F72C7|803976|80F89F|7F512E|805EFD|8038BC|7FCAAC|7F7252|80F86A|7F71F3|8036BD|7F7088|7F6213|7F70B8|80FBC9|803299|80F76B|804F05|804D32|7F564E|7F7207|8032C5|8032E6|803606|804F81|804AA3|80326A|80FF62|80388F|8037BA|7F5425|7F706D|7F71E8|7F729A|7F4FD1|7F543A|80E025|7F72E4|7F5534|7F51AC|7F72C3|7F53D7|7F7266|7F72CB|803253|7F72B4|805E4E|7F727F|7F61E7|7F581E|80F807|7F7205|803826|80F770|7F6FE6|7F718A|804F85|804EBE|804DB4|807510|7F583D|7FCB24|803732|7F72BD|804F6F|80F898|829533|803354|7F582A|7F72B8|804E1F|7F7135|7F621D|8035D8|7F72B3|803834|7F5800|803856|8038FE|8038BA|80332E|8032CD|7F5636|7F4CFC|7F57B2|803258|80388D|7F7256|7F6042|7F7301|8032DC|7F57C4|803268|803232|80F90B|8033DF|7F584F|7FCA57|7F72DE|805269|7F5759|8032E5|804A42|803242|7F72F7|7F7091|8138F1|803350|7F712C|7F72BA|8032D9|80F85C|7F7189|7F538F|804DAB|804EDE|7F53DB|7F6289|80F7E3|7F715A|7F61EF|80F762|80339B|803337|8035DB|7F61DD|80F8FB|8081B7|7F71E7|80FF73|7F71F1","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":990,"y":160,"wires":[["2507f2c2.d9bbee"],[]]},{"id":"539fc1fa.26776","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F902| 80F929| 805E2D| 7F7264| 803650| 803814| 80F897| 80332F| 7F6084| 80325F| 803892| 803248| 80F8A5| 7F6281| 7F7272| 8038C3| 7F581B| 7F4528| 7F57AE| 803674| 8032CF| 80390A| 80ECEC| 80F917| 807018| 803908| 8038E9| 7F627E| 7F57A6| 7F7291| 80E639| 8037B8| 803890| 7F7287| 7F53D8| 7F564D| 7F5854| 803269| 80F9A2| 7F57E2| 803812| 807496| 7F71D9| 80F935| 8037B4| 7F71E3| 80E6F3| 8032BF| 803653| 803837| 80F8B7| 803356| 80700E| 7F71FD| 805F04| 80F76A| 7F722E| 7F4FA1| 7F4558| 7F7288| 7F72D7| 7F575A| 7F516A| 7F72E2| 7F72AE| 7F70C1| 7F71AA| 7F72F0| 7F7246| 7F715E| 7F727E| 7F541E| 7F7158| 7F4763| 7F53B5| 7F4FD2| 7F72FF| 7F70E8| 7F7165| 7F710E| 7F61F5| 7F6280| 7F729D| 7F541D| 80327A| 7F7270| 7F5837| 7F71FC| 803353| 7F60AD| 7F7050| 7F7090| 7F4FA4| 7F57A5| 7F72A8| 7F7106| 7F7251| 8038A3| 7F57BA| 7F715F| 7F57D8| 7F7203| 7F72D6| 7F7183| 7F579C| 8033FE| 7F70E4| 7F7295| 7F604E| 7F7201| 803251| 7F60A9| 7F520C| 7F72E5| 7F722C| 7F7267| 8037C0| 7F70EA| 803966| 7F71B5| 806F38| 8038A7| 80F86E| 7F71E2| 80F936| 803279| 813888| 7F579A| 8037BC| 8035FB|","vt":"str","case":false},{"t":"regex","v":"7F72BB| 7F61D2| 7F7185| 7F579D| 8138E0| 7F7290| 804E2C| 80385C| 8032E3| 805E1E| 804F37| 813875| 80F7C8| 805E20| 7F72FD| 8037BB| 8038A2| 7F5588| 7F7273| 7F7073| 7F7154| 8036F3| 7F71D7| 7F5845| 7F61DE| 803825| 82911C| 82888F| 7F72E9| 80F7CD| 7F70C3| 803798| 7F70BE| 7F722A| 82BE6C| 82ACCF| 7F61E6| 46676A| 7F72BC| 7F728A| 8037A5| 80388E| 7F606A| 7F726F| 7F728F| 7F538B| 7F7237| 7F4DCC| 7F558C| 8037A4| 80383F| 46A92C| 80382E| 7F71ED| 49954B| 7F72B2| 7F61E3| 82DAAF| 48996E| 82979C| 82DAA6| 82D9F2| 487B17| 8038BB| 80F3E6| 7F72F8| 80F88C| 8032DB| 80F92E| 7F72FA| 7F582F| 80F928| 7F5802| 803244| 82D968| 82B33A| 7F6B2A| 827FFF| 46AB0A| 486E8D| 82C72D| 7F725A| 82ACCB| 487F95| 828A97| 80396A| 4888FE| 82911A| 82C194| 7F7134| 7F6200| 80F8A6| 7F61EE| 80F9A3| 7F5536| 80F87F| 803799| 80372E| 80F909| 80F8A1| 805EA0| 7F71F9| 80EA57| 8031C3| 7F604C| 803297| 803616| 7F72A0| 803909| 80F99F| 8037B9| 80F901| 80E020| 80E27E| 80F88A| 80FEFF| 7F708C| 7F5535| 7F712D| 7F6059| 80F7C7| 8038D6| 803979| 7F72D1| 80F80C| 80390D|","vt":"str","case":false},{"t":"regex","v":"804ECA| 804CD1| 7F71B7| 7F7265| 8032F4| 8038FC| 804F72| 803257| 7F725F| 80324D| 7F7254| 7F72B9| 803977| 80700D| 7F71EC| 80F823| 7F582E| 7F72AA| 804F19| 803339| 7F71DA| 80F819| 8032D0| 803598| 7F57DA| 7F71DE| 80F834| 80FF0F| 8036E0| 80F82C| 7F7228| 7FCAB0| 7FCA75| 80372C| 7F606B| 803762| 804F03| 804F8E| 7F71F2| 8032F3| 805EBF| 804F1D| 7F5822| 80376F| 804F24| 8032C1| 7F715B| 7F728C| 80FF06| 7FCA37| 80E011| 8038FD| 7F57B4| 803883| 7FCAF1| 8137FE| 7F61F6| 7F706E| 7F723D| 7FD18C| 803358| 804E3D| 7F729C| 7F57AC| 7F7229| 80F813| 80F85F| 804E1C| 7F5835| 7F57E7| 7F70BF| 803889| 7F723F| 7F70EB| 7F729B| 803400| 80389B| 7F72B6| 7F70B9| 80F803| 80E037| 7F7275| 7F72AF| 804DAF| 803728| 7FCAFA| 7F72EE| 804DA1| 7F7092| 804DC5| 7F710A| 803604| 7F7283| 7F7248| 7F7243| 7F71E6| 80E856| 7F4B6D| 7F61F8| 8037A8| 8051E0| 7F621A| 7F5752| 8038B3| 804D4C| 803813| 803810| 804B89| 7F5804| 7F72B1| 80F7D6| 80327B| 8032B3| 7F7063| 7F57A9|","vt":"str","case":false},{"t":"regex","v":"80F7E2| 7F5211| 7F5823| 7F71E5| 803571| 805113| 804EFF| 804DBA| 7F7269| 804E31| 7F72D9| 7FCA4F| 803246| 804D9F| 803971| 7F60C2| 7F72C7| 803976| 80F89F| 7F512E| 805EFD| 8038BC| 7FCAAC| 7F7252| 80F86A| 7F71F3| 8036BD| 7F7088| 7F6213| 7F70B8| 80FBC9| 803299| 80F76B| 804F05| 804D32| 7F564E| 7F7207| 8032C5| 8032E6| 803606| 804F81| 804AA3| 80326A| 80FF62| 80388F| 8037BA| 7F5425| 7F706D| 7F71E8| 7F729A| 7F4FD1| 7F543A| 80E025| 7F72E4| 7F5534| 7F51AC| 7F72C3| 7F53D7| 7F7266| 7F72CB| 803253| 7F72B4| 805E4E| 7F727F| 7F61E7| 7F581E| 80F807| 7F7205| 803826| 80F770| 7F6FE6| 7F718A| 804F85| 804EBE| 804DB4| 807510| 7F583D| 7FCB24| 803732| 7F72BD| 804F6F| 80F898| 829533| 803354| 7F582A| 7F72B8| 804E1F| 7F7135| 7F621D| 8035D8| 7F72B3| 803834| 7F5800| 803856| 8038FE| 8038BA| 80332E| 8032CD| 7F5636| 7F4CFC| 7F57B2| 803258| 80388D| 7F7256| 7F6042| 7F7301| 8032DC| 7F57C4| 803268| 803232| 80F90B| 8033DF| 7F584F| 7FCA57| 7F72DE| 805269| 7F5759| 8032E5| 804A42| 803242| 7F72F7| 7F7091| 8138F1| 803350| 7F712C| 7F72BA| 8032D9| 80F85C| 7F7189| 7F538F| 804DAB| 804EDE| 7F53DB| 7F6289| 80F7E3| 7F715A| 7F61EF| 80F762| 80339B| 803337| 8035DB| 7F61DD| 80F8FB| 8081B7| 7F71E7| 80FF73| 7F71F1|","vt":"str","case":false},{"t":"regex","v":"804DB1| 804D2C| 804D57| 7F57B8| 80E039| 804B09| 7F605E| 7F72F2| 7F57E4| 80F844| 7F71B2| 805E8F| 7F57A7| 7F534A| 80E033| 7F53EE| 80744F| 7F57C1| 80DFF9| 7F57C2| 7F71F5| 7F727C| 804F46| 7F584C| 7FCA61| 7F5762| 804B2E| 7F7257| 80F83E| 80F828| 80389C| 80FF7A| 7F5821| 8032B2| 8038A0| 7F61D7| 8037A9| 7F6101| 7F61E9| 803815| 7F6208| 7F6209| 803730| 804F18| 7F5758| 7F5820| 7F70CB| 804F13| 80390F| 7F53D9| 7F61F9| 7F46CB| 803675| 805124| 804F7C| 80526A| 8032A9| 7F5440| 80387D| 804B10| 80334A| 7F726C| 7F728B| 804DA0| 804F7B| 804DB6| 7F57BD| 804D99| 804DD5| 7FD1B4|","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":6,"x":1390,"y":220,"wires":[[],[],[],[],[],[]]},{"id":"1bed80e7.d3bbdf","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804DB1|804D2C|804D57|7F57B8|80E039|804B09|7F605E|7F72F2|7F57E4|80F844|7F71B2|805E8F|7F57A7|7F534A|80E033|7F53EE|80744F|7F57C1|80DFF9|7F57C2|7F71F5|7F727C|804F46|7F584C|7FCA61|7F5762|804B2E|7F7257|80F83E|80F828|80389C|80FF7A|7F5821|8032B2|8038A0|7F61D7|8037A9|7F6101|7F61E9|803815|7F6208|7F6209|803730|804F18|7F5758|7F5820|7F70CB|804F13|80390F|7F53D9|7F61F9|7F46CB|803675|805124|804F7C|80526A|8032A9|7F5440|80387D|804B10|80334A|7F726C|7F728B|804DA0|804F7B|804DB6|7F57BD|804D99|804DD5|7FD1B4","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":990,"y":200,"wires":[["cdcdb51c.2d9a38"],[]]},{"id":"febcf879.979778","type":"function","z":"fa40001c.4d62c","name":"lvl 18","func":"msg.topic = \"rio/brisbane/level-18/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":40,"wires":[["804941f1.155f4","8758a82b.dfecc8"]]},{"id":"20cf65e7.2e384a","type":"function","z":"fa40001c.4d62c","name":"lvl 19","func":"msg.topic = \"rio/brisbane/level-19/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":80,"wires":[["8758a82b.dfecc8","804941f1.155f4"]]},{"id":"6537d431.8b70ac","type":"function","z":"fa40001c.4d62c","name":"lvl 22","func":"msg.topic = \"rio/brisbane/level-22/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":120,"wires":[["8758a82b.dfecc8","804941f1.155f4"]]},{"id":"2507f2c2.d9bbee","type":"function","z":"fa40001c.4d62c","name":"lvl 23","func":"msg.topic = \"rio/brisbane/level-23/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":160,"wires":[["8758a82b.dfecc8","804941f1.155f4"]]},{"id":"cdcdb51c.2d9a38","type":"function","z":"fa40001c.4d62c","name":"lvl 24","func":"msg.topic = \"rio/brisbane/level-24/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":200,"wires":[["8758a82b.dfecc8","804941f1.155f4"]]},{"id":"dfd1c4e2.30a168","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"7F72BB\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":90,"y":140,"wires":[["56d4cd93.e1dae4"]]},{"id":"91130899.3b7cb8","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"804ECA\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":90,"y":180,"wires":[["56d4cd93.e1dae4"]]},{"id":"9b9d7bab.2383a8","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"80F7E2\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":90,"y":220,"wires":[["56d4cd93.e1dae4"]]},{"id":"55eb1abf.74eeb4","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"804DB1\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":90,"y":260,"wires":[["56d4cd93.e1dae4"]]},{"id":"b4259ac0.6c51c8","type":"function","z":"fa40001c.4d62c","name":"perth","func":"msg.topic = \"rio/perth/all/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":240,"wires":[["8758a82b.dfecc8"]]},{"id":"a7ce3a6.016c6c8","type":"function","z":"fa40001c.4d62c","name":"perth","func":"msg.topic = \"rio/brisbane/all/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1130,"y":280,"wires":[["8758a82b.dfecc8"]]},{"id":"fbc70155.f8a82","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804DB1|804D2C|804D57|7F57B8|80E039|804B09|7F605E|7F72F2|7F57E4|80F844|7F71B2|805E8F|7F57A7|7F534A|80E033|7F53EE|80744F|7F57C1|80DFF9|7F57C2|7F71F5|7F727C|804F46|7F584C|7FCA61|7F5762|804B2E|7F7257|80F83E|80F828|80389C|80FF7A|7F5821|8032B2|8038A0|7F61D7|8037A9|7F6101|7F61E9|803815|7F6208|7F6209|803730|804F18|7F5758|7F5820|7F70CB|804F13|80390F|7F53D9|7F61F9|7F46CB|803675|805124|804F7C|80526A|8032A9|7F5440|80387D|804B10|80334A|7F726C|7F728B|804DA0|804F7B|804DB6|7F57BD|804D99|804DD5|7FD1B4","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":920,"wires":[["ea81135.38cfcf"],[]]},{"id":"3a712786.d540d8","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F7E2|7F5211|7F5823|7F71E5|803571|805113|804EFF|804DBA|7F7269|804E31|7F72D9|7FCA4F|803246|804D9F|803971|7F60C2|7F72C7|803976|80F89F|7F512E|805EFD|8038BC|7FCAAC|7F7252|80F86A|7F71F3|8036BD|7F7088|7F6213|7F70B8|80FBC9|803299|80F76B|804F05|804D32|7F564E|7F7207|8032C5|8032E6|803606|804F81|804AA3|80326A|80FF62|80388F|8037BA|7F5425|7F706D|7F71E8|7F729A|7F4FD1|7F543A|80E025|7F72E4|7F5534|7F51AC|7F72C3|7F53D7|7F7266|7F72CB|803253|7F72B4|805E4E|7F727F|7F61E7|7F581E|80F807|7F7205|803826|80F770|7F6FE6|7F718A|804F85|804EBE|804DB4|807510|7F583D|7FCB24|803732|7F72BD|804F6F|80F898|829533|803354|7F582A|7F72B8|804E1F|7F7135|7F621D|8035D8|7F72B3|803834|7F5800|803856|8038FE|8038BA|80332E|8032CD|7F5636|7F4CFC|7F57B2|803258|80388D|7F7256|7F6042|7F7301|8032DC|7F57C4|803268|803232|80F90B|8033DF|7F584F|7FCA57|7F72DE|805269|7F5759|8032E5|804A42|803242|7F72F7|7F7091|8138F1|803350|7F712C|7F72BA|8032D9|80F85C|7F7189|7F538F|804DAB|804EDE|7F53DB|7F6289|80F7E3|7F715A|7F61EF|80F762|80339B|803337|8035DB|7F61DD|80F8FB|8081B7|7F71E7|80FF73|7F71F1","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":880,"wires":[["c3213747.15f258"],[]]},{"id":"3ab5cdf6.cc6212","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804ECA|804CD1|7F71B7|7F7265|8032F4|8038FC|804F72|803257|7F725F|80324D|7F7254|7F72B9|803977|80700D|7F71EC|80F823|7F582E|7F72AA|804F19|803339|7F71DA|80F819|8032D0|803598|7F57DA|7F71DE|80F834|80FF0F|8036E0|80F82C|7F7228|7FCAB0|7FCA75|80372C|7F606B|803762|804F03|804F8E|7F71F2|8032F3|805EBF|804F1D|7F5822|80376F|804F24|8032C1|7F715B|7F728C|80FF06|7FCA37|80E011|8038FD|7F57B4|803883|7FCAF1|8137FE|7F61F6|7F706E|7F723D|7FD18C|803358|804E3D|7F729C|7F57AC|7F7229|80F813|80F85F|804E1C|7F5835|7F57E7|7F70BF|803889|7F723F|7F70EB|7F729B|803400|80389B|7F72B6|7F70B9|80F803|80E037|7F7275|7F72AF|804DAF|803728|7FCAFA|7F72EE|804DA1|7F7092|804DC5|7F710A|803604|7F7283|7F7248|7F7243|7F71E6|80E856|7F4B6D|7F61F8|8037A8|8051E0|7F621A|7F5752|8038B3|804D4C|803813|803810|804B89|7F5804|7F72B1|80F7D6|80327B|8032B3|7F7063|7F57A9","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":840,"wires":[["57aad7f3.c79ee8"],[]]},{"id":"314e4663.e40aaa","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"7F72BB|7F61D2|7F7185|7F579D|8138E0|7F7290|804E2C|80385C|8032E3|805E1E|804F37|813875|80F7C8|805E20|7F72FD|8037BB|8038A2|7F5588|7F7273|7F7073|7F7154|8036F3|7F71D7|7F5845|7F61DE|803825|82911C|82888F|7F72E9|80F7CD|7F70C3|803798|7F70BE|7F722A|82BE6C|82ACCF|7F61E6|46676A|7F72BC|7F728A|8037A5|80388E|7F606A|7F726F|7F728F|7F538B|7F7237|7F4DCC|7F558C|8037A4|80383F|46A92C|80382E|7F71ED|49954B|7F72B2|7F61E3|82DAAF|48996E|82979C|82DAA6|82D9F2|487B17|8038BB|80F3E6|7F72F8|80F88C|8032DB|80F92E|7F72FA|7F582F|80F928|7F5802|803244|82D968|82B33A|7F6B2A|827FFF|46AB0A|486E8D|82C72D|7F725A|82ACCB|487F95|828A97|80396A|4888FE|82911A|82C194|7F7134|7F6200|80F8A6|7F61EE|80F9A3|7F5536|80F87F|803799|80372E|80F909|80F8A1|805EA0|7F71F9|80EA57|8031C3|7F604C|803297|803616|7F72A0|803909|80F99F|8037B9|80F901|80E020|80E27E|80F88A|80FEFF|7F708C|7F5535|7F712D|7F6059|80F7C7|8038D6|803979|7F72D1|80F80C|80390D","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":800,"wires":[["37e7594e.2cc1a6"],[]]},{"id":"8973807.d0d588","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F902|80F929|805E2D|7F7264|803650|803814|80F897|80332F|7F6084|80325F|803892|803248|80F8A5|7F6281|7F7272|8038C3|7F581B|7F4528|7F57AE|803674|8032CF|80390A|80ECEC|80F917|807018|803908|8038E9|7F627E|7F57A6|7F7291|80E639|8037B8|803890|7F7287|7F53D8|7F564D|7F5854|803269|80F9A2|7F57E2|803812|807496|7F71D9|80F935|8037B4|7F71E3|80E6F3|8032BF|803653|803837|80F8B7|803356|80700E|7F71FD|805F04|80F76A|7F722E|7F4FA1|7F4558|7F7288|7F72D7|7F575A|7F516A|7F72E2|7F72AE|7F70C1|7F71AA|7F72F0|7F7246|7F715E|7F727E|7F541E|7F7158|7F4763|7F53B5|7F4FD2|7F72FF|7F70E8|7F7165|7F710E|7F61F5|7F6280|7F729D|7F541D|80327A|7F7270|7F5837|7F71FC|803353|7F60AD|7F7050|7F7090|7F4FA4|7F57A5|7F72A8|7F7106|7F7251|8038A3|7F57BA|7F715F|7F57D8|7F7203|7F72D6|7F7183|7F579C|8033FE|7F70E4|7F7295|7F604E|7F7201|803251|7F60A9|7F520C|7F72E5|7F722C|7F7267|8037C0|7F70EA|803966|7F71B5|806F38|8038A7|80F86E|7F71E2|80F936|803279|813888|7F579A|8037BC|8035FB","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":760,"wires":[["99c27d40.9c7d1"],[]]},{"id":"99c27d40.9c7d1","type":"function","z":"fa40001c.4d62c","name":"lvl 18","func":"msg.topic = \"rio/brisbane/level-18/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2510,"y":760,"wires":[["91498953.99bba8"]]},{"id":"37e7594e.2cc1a6","type":"function","z":"fa40001c.4d62c","name":"lvl 19","func":"msg.topic = \"rio/brisbane/level-19/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2510,"y":800,"wires":[["91498953.99bba8"]]},{"id":"57aad7f3.c79ee8","type":"function","z":"fa40001c.4d62c","name":"lvl 22","func":"msg.topic = \"rio/brisbane/level-22/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2510,"y":840,"wires":[["91498953.99bba8"]]},{"id":"c3213747.15f258","type":"function","z":"fa40001c.4d62c","name":"lvl 23","func":"msg.topic = \"rio/brisbane/level-23/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2510,"y":880,"wires":[["91498953.99bba8"]]},{"id":"ea81135.38cfcf","type":"function","z":"fa40001c.4d62c","name":"lvl 24","func":"msg.topic = \"rio/brisbane/level-24/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2510,"y":920,"wires":[["91498953.99bba8"]]},{"id":"2905ddc9.f03512","type":"function","z":"fa40001c.4d62c","name":"perth","func":"msg.topic = \"rio/perth/all/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2510,"y":960,"wires":[["91498953.99bba8"]]},{"id":"11d9ca6d.d650c6","type":"function","z":"fa40001c.4d62c","name":"brisbane","func":"msg.topic = \"rio/brisbane/all/\"+msg.payload.sensorId\nmsg.payload = msg.payload.status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2520,"y":1000,"wires":[["91498953.99bba8"]]},{"id":"91498953.99bba8","type":"mqtt out","z":"fa40001c.4d62c","name":"","topic":"","qos":"","retain":"","broker":"fb1189d8.7a3418","x":2810,"y":860,"wires":[]},{"id":"bda13414.ce8ea8","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"46A92C|46AB0A|486E8D|487B17|487F95|4888FE|48996E|494E59|49954B|499E26|7F4528|7F4558|7F46CB|7F4763|7F4944|7F4B6D|7F4CFC|7F4DCC|7F4F2A|7F4F8E|7F4FA1|7F4FA3|7F4FA4|7F4FA9|7F4FD1|7F4FD2|7F512E|7F514F|7F5163|7F5169|7F516A|7F51AC|7F51EA|7F5208|7F520C|7F5211|7F5345|7F534A|7F536E|7F5389|7F538B|7F538C|7F538F|7F53AA|7F53B5|7F53D4|7F53D5|7F53D6|7F53D7|7F53D8|7F53D9|7F53DA|7F53DB|7F53EE|7F5419|7F541B|7F541C|7F541D|7F541E|7F5425|7F5427|7F542C|7F543A|7F543B|7F5440|7F5532|7F5533|7F5534|7F5535|7F5536|7F5580|7F5587|7F5588|7F558C|7F5597|7F55C0|7F55C1|7F55FF|7F5605|7F5607|7F5636|7F564D|7F564E|7F574E|7F5750|7F5752|7F5758|7F5759|7F575A|7F5762|7F5764|7F5794|7F5796|7F5797|7F579A|7F579C|7F579D|7F579F|7F57A0|7F57A1|7F57A3|7F57A5|7F57A6|7F57A7|7F57A8|7F57A9|7F57AC|7F57AE|7F57B2|7F57B4|7F57B6|7F57B8|7F57BA|7F57BB|7F57BD|7F57BE|7F57C1|7F57C2|7F57C4|7F57C6|7F57CB|7F57CC|7F57CE|7F57CF|7F57D1|7F57D8|7F57DA|7F57E2|7F57E4|7F57E5|7F57E6|7F57E7|7F57EB|7F57F4|7F5800|7F5802|7F5803|7F5804|7F5805|7F5806|7F5807|7F581B|7F581C|7F581E|7F5820|7F5821|7F5822|7F5823|7F5825|7F582A|7F582E|7F582F|7F5833|7F5834|7F5835|7F5837|7F5839|7F583D|7F5841|7F5845|7F5848|7F584C|7F584D|7F584F|7F5850|7F5851|7F5853|7F5854|7F59CC|7F5D9B|7F6042|7F6043|7F6049|7F604C|7F604E|7F6059|7F605E|7F605F|7F6067|7F606A|7F606B|7F607F|7F6082|7F6084|7F609F|7F60A9|7F60AD|7F60C2|7F6101|7F61D2|7F61D7|7F61DB|7F61DD|7F61DE|7F61E0|7F61E3|7F61E6|7F61E7|7F61E9|7F61EE|7F61EF|7F61F0|7F61F1|7F61F5|7F61F6|7F61F8|7F61F9|7F61FC|7F6200|7F6208|7F6209|7F620B|7F620C|7F6213|7F6219|7F621A|7F621B|7F621D|7F621E|7F622A|7F627E|7F627F|7F6280|7F6281|7F6282|7F6285|7F6289|7F628A|7F6290|7F6291|7F6B29|7F6B2A|7F6B2B|7F6EA9|7F6EAA|7F6FE6|7F7049|7F704C|7F7050|7F7063|7F7064|7F706B|7F706D|7F706E|7F7073|7F7087|7F7088|7F708C|7F7090|7F7091|7F7092|7F70B8|7F70B9|7F70BD|7F70BE|7F70BF|7F70C1|7F70C3|7F70CB|7F70E2|7F70E4|7F70E8|7F70E9|7F70EA|7F70EB|7F70EC|7F70ED|7F70F0|7F7106|7F710A|7F710B|7F710E|7F7110|7F7113|7F712C|7F712D|7F712F|7F7132|7F7134|7F7135|7F7136|7F7138|7F7154|7F7157|7F7158|7F7159|7F715A|7F715B|7F715E|7F715F|7F7161|7F7164|7F7165|7F7182|7F7183|7F7185|7F7187|7F7189|7F718A|7F71A9|7F71AA|7F71AC|7F71AE|7F71B0|7F71B2|7F71B4|7F71B5|7F71B7|7F71BD|7F71D1|7F71D3|7F71D6|7F71D7|7F71D9|7F71DA|7F71DB|7F71DC|7F71DE|7F71DF|7F71E0|7F71E1|7F71E2|7F71E3|7F71E4|7F71E5|7F71E6|7F71E7|7F71E8|7F71E9|7F71EB|7F71EC|7F71ED|7F71F0|7F71F1|7F71F2|7F71F3|7F71F4|7F71F5|7F71F6|7F71F7|7F71F8|7F71F9|7F71FA|7F71FB|7F71FC|7F71FD|7F71FE|7F71FF|7F7200|7F7201|7F7202|7F7203|7F7205|7F7207|7F7220|7F7223|7F7224|7F7228|7F7229|7F722A|7F722C|7F722E|7F7230|7F7237|7F723D|7F723F|7F7240|7F7243|7F7245|7F7246|7F7248|7F724A|7F724E|7F724F|7F7251|7F7252|7F7253|7F7254|7F7255|7F7256|7F7257|7F7258|7F7259|7F725A|7F725C|7F725E|7F725F|7F7260|7F7262|7F7264|7F7265|7F7266|7F7267|7F7268|7F7269|7F726B|7F726C|7F726D|7F726E|7F726F|7F7270|7F7272|7F7273|7F7275|7F7276|7F727B|7F727C|7F727D|7F727E|7F727F|7F7280|7F7281|7F7283|7F7284|7F7287|7F7288|7F728A|7F728B|7F728C|7F728D|7F728E|7F728F|7F7290|7F7291|7F7294|7F7295|7F7296|7F7297|7F7298|7F7299|7F729A|7F729B|7F729C|7F729D|7F729E|7F729F|7F72A0|7F72A8|7F72A9|7F72AA|7F72AC|7F72AD|7F72AE|7F72AF|7F72B1|7F72B2|7F72B3|7F72B4|7F72B5|7F72B6|7F72B7|7F72B8|7F72B9|7F72BA|7F72BB|7F72BC|7F72BD|7F72BE|7F72BF|7F72C1|7F72C2|7F72C3|7F72C6|7F72C7|7F72C8|7F72C9|7F72CA|7F72CB|7F72CC|7F72CD|7F72D0|7F72D1|7F72D2|7F72D6|7F72D7|7F72D8|7F72D9|7F72DB|7F72DC|7F72DD|7F72DE|7F72DF|7F72E0|7F72E1|7F72E2|7F72E3|7F72E4|7F72E5|7F72E7|7F72E8|7F72E9|7F72EC|7F72EE|7F72F0|7F72F2|7F72F3|7F72F5|7F72F7|7F72F8|7F72FA|7F72FB|7F72FC|7F72FD|7F72FE|7F72FF|7F7300|7F7301|7FC855|7FCA07|7FCA37|7FCA4F|7FCA57|7FCA61|7FCA75|7FCAAC|7FCAB0|7FCAF1|7FCAF2|7FCAFA|7FCB19|7FCB24|7FCB26|7FCB59|7FCB5A|7FD18C|7FD1B4|8031C3|8031C5|8031C8|8031C9|8031CB|80320F|80321E|80322A|803232|803233|803242|803244|803246|803247|803248|80324D|803251|803253|803256|803257|803258|80325A|80325F|803266|803267|803268|803269|80326A|80326F|803278|803279|80327A|80327B|803284|80328B|803297|803299|8032A9|8032AD|8032B2|8032B3|8032BA|8032BB|8032BE|8032BF|8032C1|8032C5|8032C7|8032CD|8032CE|8032CF|8032D0|8032D1|8032D9|8032DB|8032DC|8032DD|8032E3|8032E4|8032E5|8032E6|8032E7|8032EC|8032F2|8032F3|8032F4|8032F6|8032FB|803307|803319|803323|80332A|80332C|80332E|80332F|803330|803331|803337|803338|803339|803344|803346|803348|80334A|80334D|803350|803352|803353|803354|803356|803358|803359|80335A|80335B|80335D|803362|803363|80336C|80336E|803373|803389|803395|803397|80339A|80339B|8033D5|8033D7|8033D8|8033D9|8033DE|8033DF|8033FC|8033FE|803400|803401|803405|803471|803501|803532|803571|803598|8035D8|8035DA|8035DB|8035F9|8035FB|803604|803606|803615|803616|803650|803651|803653|803674|803675|803676|803681|803685|8036BD|8036DD|8036E0|8036E2|8036F3|803701|803724|803728|803729|80372C|80372D|80372E|803730|803732|803733|80375D|803762|803763|80376D|80376F|803798|803799|80379A|80379B|8037A4|8037A5|8037A6|8037A8|8037A9|8037AA|8037AC|8037AE|8037B4|8037B6|8037B7|8037B8|8037B9|8037BA|8037BB|8037BC|8037BD|8037C0|8037C1|8037CD|8037E8|8037E9|8037EC|803801|803810|803811|803812|803813|803814|803815|803816|80381A|80381B|803820|803822|803823|803824|803825|803826|803827|80382E|803834|803836|803837|80383F|803856|803857|80385C|80385E|80387C|80387D|803880|803881|803882|803883|803889|80388C|80388D|80388E|80388F|803890|803891|803892|80389B|80389C|80389D|80389E|80389F|8038A0|8038A2|8038A3|8038A5|8038A7|8038B3|8038BA|8038BB|8038BC|8038BE|8038C2|8038C3|8038C5|8038D6|8038E8|8038E9|8038EA|8038F8|8038FA|8038FB|8038FC|8038FD|8038FE|803908|803909|80390A|80390B|80390C|80390D|80390E|80390F|80393D|80393E|803966|803969|80396A|80396B|803971|803974|803976|803977|803979|80397A|804A37|804A42|804AA3|804AAF|804B09|804B10|804B1E|804B2E|804B4A|804B89|804C07|804C08|804C47|804C84|804CC3|804CCE|804CD1|804D2C|804D32|804D4C|804D57|804D99|804D9F|804DA0|804DA1|804DAB|804DAC|804DAF|804DB1|804DB4|804DB6|804DB9|804DBA|804DC5|804DD5|804E1C|804E1F|804E20|804E2C|804E2E|804E2F|804E31|804E3C|804E3D|804E40|804E41|804E45|804E89|804E99|804E9B|804E9F|804EA7|804EBE|804EC7|804EC9|804ECA|804ECD|804EDB|804EDE|804EFF|804F03|804F05|804F08|804F0A|804F10|804F12|804F13|804F16|804F18|804F19|804F1D|804F24|804F25|804F2B|804F31|804F34|804F35|804F37|804F43|804F46|804F6B|804F6F|804F72|804F7B|804F7C|804F81|804F83|804F85|804F89|804F8B|804F8C|804F8E|804FE8|804FED|804FF1|805113|805124|8051E0|805200|80521C|805269|80526A|8052D1|8052F1|805DE9|805DF6|805E02|805E1E|805E20|805E2D|805E35|805E4C|805E4E|805E8F|805E97|805EA0|805EA1|805EB0|805EBF|805EC2|805EC4|805EF6|805EFD|805F04|805F44|805F5F|805F60|806022|806056|806F38|807005|80700D|80700E|807018|807027|8070D4|80712A|80735A|80744F|807496|8074D0|807510|8081B7|8084DE|8085CE|80DE9A|80DEFA|80DFF1|80DFF9|80E00B|80E010|80E011|80E020|80E025|80E026|80E033|80E037|80E039|80E27E|80E56C|80E61B|80E639|80E63D|80E696|80E6F3|80E800|80E813|80E84E|80E856|80E8AD|80E8C1|80E8C5|80E922|80E958|80E9A8|80EA57|80EAB9|80ECEC|80F3E6|80F41E|80F760|80F762|80F764|80F76A|80F76B|80F76F|80F770|80F78E|80F7C3|80F7C5|80F7C6|80F7C7|80F7C8|80F7CD|80F7D5|80F7D6|80F7D7|80F7D8|80F7DC|80F7E1|80F7E2|80F7E3|80F7F5|80F803|80F807|80F80A|80F80C|80F810|80F813|80F819|80F821|80F823|80F825|80F828|80F82C|80F82E|80F82F|80F834|80F835|80F83A|80F83E|80F83F|80F844|80F84A|80F84D|80F850|80F85C|80F85F|80F86A|80F86D|80F86E|80F87F|80F887|80F88A|80F88C|80F890|80F897|80F898|80F899|80F89E|80F89F|80F8A1|80F8A5|80F8A6|80F8AA|80F8AD|80F8B1|80F8B6|80F8B7|80F8BD|80F8CC|80F8D9|80F8E3|80F8EE|80F8F8|80F8FB|80F8FD|80F901|80F902|80F909|80F90B|80F90D|80F913|80F915|80F917|80F91B|80F927|80F928|80F929|80F92E|80F935|80F936|80F93A|80F946|80F99D|80F99F|80F9A0|80F9A2|80F9A3|80F9A5|80F9B6|80FA8C|80FAF4|80FBC9|80FE67|80FEE2|80FEEA|80FEF2|80FEF4|80FEF5|80FEFF|80FF06|80FF0E|80FF0F|80FF2C|80FF59|80FF5C|80FF5D|80FF61|80FF62|80FF6B|80FF6C|80FF73|80FF74|80FF75|80FF7A|80FF84|813742|8137FE|813875|813888|8138E0|8138F1|827FFF|82888F|828A97|82911A|82911C|829533|82979C|82ACCB|82ACCF|82B33A|82BE6C|82C194|82C72D|82D968|82D9F2|82DAA6|82DAAF","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":960,"wires":[[],["2905ddc9.f03512"]]},{"id":"c9188055.09cc4","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"46A92C|46AB0A|486E8D|487B17|487F95|4888FE|48996E|494E59|49954B|499E26|7F4528|7F4558|7F46CB|7F4763|7F4944|7F4B6D|7F4CFC|7F4DCC|7F4F2A|7F4F8E|7F4FA1|7F4FA3|7F4FA4|7F4FA9|7F4FD1|7F4FD2|7F512E|7F514F|7F5163|7F5169|7F516A|7F51AC|7F51EA|7F5208|7F520C|7F5211|7F5345|7F534A|7F536E|7F5389|7F538B|7F538C|7F538F|7F53AA|7F53B5|7F53D4|7F53D5|7F53D6|7F53D7|7F53D8|7F53D9|7F53DA|7F53DB|7F53EE|7F5419|7F541B|7F541C|7F541D|7F541E|7F5425|7F5427|7F542C|7F543A|7F543B|7F5440|7F5532|7F5533|7F5534|7F5535|7F5536|7F5580|7F5587|7F5588|7F558C|7F5597|7F55C0|7F55C1|7F55FF|7F5605|7F5607|7F5636|7F564D|7F564E|7F574E|7F5750|7F5752|7F5758|7F5759|7F575A|7F5762|7F5764|7F5794|7F5796|7F5797|7F579A|7F579C|7F579D|7F579F|7F57A0|7F57A1|7F57A3|7F57A5|7F57A6|7F57A7|7F57A8|7F57A9|7F57AC|7F57AE|7F57B2|7F57B4|7F57B6|7F57B8|7F57BA|7F57BB|7F57BD|7F57BE|7F57C1|7F57C2|7F57C4|7F57C6|7F57CB|7F57CC|7F57CE|7F57CF|7F57D1|7F57D8|7F57DA|7F57E2|7F57E4|7F57E5|7F57E6|7F57E7|7F57EB|7F57F4|7F5800|7F5802|7F5803|7F5804|7F5805|7F5806|7F5807|7F581B|7F581C|7F581E|7F5820|7F5821|7F5822|7F5823|7F5825|7F582A|7F582E|7F582F|7F5833|7F5834|7F5835|7F5837|7F5839|7F583D|7F5841|7F5845|7F5848|7F584C|7F584D|7F584F|7F5850|7F5851|7F5853|7F5854|7F59CC|7F5D9B|7F6042|7F6043|7F6049|7F604C|7F604E|7F6059|7F605E|7F605F|7F6067|7F606A|7F606B|7F607F|7F6082|7F6084|7F609F|7F60A9|7F60AD|7F60C2|7F6101|7F61D2|7F61D7|7F61DB|7F61DD|7F61DE|7F61E0|7F61E3|7F61E6|7F61E7|7F61E9|7F61EE|7F61EF|7F61F0|7F61F1|7F61F5|7F61F6|7F61F8|7F61F9|7F61FC|7F6200|7F6208|7F6209|7F620B|7F620C|7F6213|7F6219|7F621A|7F621B|7F621D|7F621E|7F622A|7F627E|7F627F|7F6280|7F6281|7F6282|7F6285|7F6289|7F628A|7F6290|7F6291|7F6B29|7F6B2A|7F6B2B|7F6EA9|7F6EAA|7F6FE6|7F7049|7F704C|7F7050|7F7063|7F7064|7F706B|7F706D|7F706E|7F7073|7F7087|7F7088|7F708C|7F7090|7F7091|7F7092|7F70B8|7F70B9|7F70BD|7F70BE|7F70BF|7F70C1|7F70C3|7F70CB|7F70E2|7F70E4|7F70E8|7F70E9|7F70EA|7F70EB|7F70EC|7F70ED|7F70F0|7F7106|7F710A|7F710B|7F710E|7F7110|7F7113|7F712C|7F712D|7F712F|7F7132|7F7134|7F7135|7F7136|7F7138|7F7154|7F7157|7F7158|7F7159|7F715A|7F715B|7F715E|7F715F|7F7161|7F7164|7F7165|7F7182|7F7183|7F7185|7F7187|7F7189|7F718A|7F71A9|7F71AA|7F71AC|7F71AE|7F71B0|7F71B2|7F71B4|7F71B5|7F71B7|7F71BD|7F71D1|7F71D3|7F71D6|7F71D7|7F71D9|7F71DA|7F71DB|7F71DC|7F71DE|7F71DF|7F71E0|7F71E1|7F71E2|7F71E3|7F71E4|7F71E5|7F71E6|7F71E7|7F71E8|7F71E9|7F71EB|7F71EC|7F71ED|7F71F0|7F71F1|7F71F2|7F71F3|7F71F4|7F71F5|7F71F6|7F71F7|7F71F8|7F71F9|7F71FA|7F71FB|7F71FC|7F71FD|7F71FE|7F71FF|7F7200|7F7201|7F7202|7F7203|7F7205|7F7207|7F7220|7F7223|7F7224|7F7228|7F7229|7F722A|7F722C|7F722E|7F7230|7F7237|7F723D|7F723F|7F7240|7F7243|7F7245|7F7246|7F7248|7F724A|7F724E|7F724F|7F7251|7F7252|7F7253|7F7254|7F7255|7F7256|7F7257|7F7258|7F7259|7F725A|7F725C|7F725E|7F725F|7F7260|7F7262|7F7264|7F7265|7F7266|7F7267|7F7268|7F7269|7F726B|7F726C|7F726D|7F726E|7F726F|7F7270|7F7272|7F7273|7F7275|7F7276|7F727B|7F727C|7F727D|7F727E|7F727F|7F7280|7F7281|7F7283|7F7284|7F7287|7F7288|7F728A|7F728B|7F728C|7F728D|7F728E|7F728F|7F7290|7F7291|7F7294|7F7295|7F7296|7F7297|7F7298|7F7299|7F729A|7F729B|7F729C|7F729D|7F729E|7F729F|7F72A0|7F72A8|7F72A9|7F72AA|7F72AC|7F72AD|7F72AE|7F72AF|7F72B1|7F72B2|7F72B3|7F72B4|7F72B5|7F72B6|7F72B7|7F72B8|7F72B9|7F72BA|7F72BB|7F72BC|7F72BD|7F72BE|7F72BF|7F72C1|7F72C2|7F72C3|7F72C6|7F72C7|7F72C8|7F72C9|7F72CA|7F72CB|7F72CC|7F72CD|7F72D0|7F72D1|7F72D2|7F72D6|7F72D7|7F72D8|7F72D9|7F72DB|7F72DC|7F72DD|7F72DE|7F72DF|7F72E0|7F72E1|7F72E2|7F72E3|7F72E4|7F72E5|7F72E7|7F72E8|7F72E9|7F72EC|7F72EE|7F72F0|7F72F2|7F72F3|7F72F5|7F72F7|7F72F8|7F72FA|7F72FB|7F72FC|7F72FD|7F72FE|7F72FF|7F7300|7F7301|7FC855|7FCA07|7FCA37|7FCA4F|7FCA57|7FCA61|7FCA75|7FCAAC|7FCAB0|7FCAF1|7FCAF2|7FCAFA|7FCB19|7FCB24|7FCB26|7FCB59|7FCB5A|7FD18C|7FD1B4|8031C3|8031C5|8031C8|8031C9|8031CB|80320F|80321E|80322A|803232|803233|803242|803244|803246|803247|803248|80324D|803251|803253|803256|803257|803258|80325A|80325F|803266|803267|803268|803269|80326A|80326F|803278|803279|80327A|80327B|803284|80328B|803297|803299|8032A9|8032AD|8032B2|8032B3|8032BA|8032BB|8032BE|8032BF|8032C1|8032C5|8032C7|8032CD|8032CE|8032CF|8032D0|8032D1|8032D9|8032DB|8032DC|8032DD|8032E3|8032E4|8032E5|8032E6|8032E7|8032EC|8032F2|8032F3|8032F4|8032F6|8032FB|803307|803319|803323|80332A|80332C|80332E|80332F|803330|803331|803337|803338|803339|803344|803346|803348|80334A|80334D|803350|803352|803353|803354|803356|803358|803359|80335A|80335B|80335D|803362|803363|80336C|80336E|803373|803389|803395|803397|80339A|80339B|8033D5|8033D7|8033D8|8033D9|8033DE|8033DF|8033FC|8033FE|803400|803401|803405|803471|803501|803532|803571|803598|8035D8|8035DA|8035DB|8035F9|8035FB|803604|803606|803615|803616|803650|803651|803653|803674|803675|803676|803681|803685|8036BD|8036DD|8036E0|8036E2|8036F3|803701|803724|803728|803729|80372C|80372D|80372E|803730|803732|803733|80375D|803762|803763|80376D|80376F|803798|803799|80379A|80379B|8037A4|8037A5|8037A6|8037A8|8037A9|8037AA|8037AC|8037AE|8037B4|8037B6|8037B7|8037B8|8037B9|8037BA|8037BB|8037BC|8037BD|8037C0|8037C1|8037CD|8037E8|8037E9|8037EC|803801|803810|803811|803812|803813|803814|803815|803816|80381A|80381B|803820|803822|803823|803824|803825|803826|803827|80382E|803834|803836|803837|80383F|803856|803857|80385C|80385E|80387C|80387D|803880|803881|803882|803883|803889|80388C|80388D|80388E|80388F|803890|803891|803892|80389B|80389C|80389D|80389E|80389F|8038A0|8038A2|8038A3|8038A5|8038A7|8038B3|8038BA|8038BB|8038BC|8038BE|8038C2|8038C3|8038C5|8038D6|8038E8|8038E9|8038EA|8038F8|8038FA|8038FB|8038FC|8038FD|8038FE|803908|803909|80390A|80390B|80390C|80390D|80390E|80390F|80393D|80393E|803966|803969|80396A|80396B|803971|803974|803976|803977|803979|80397A|804A37|804A42|804AA3|804AAF|804B09|804B10|804B1E|804B2E|804B4A|804B89|804C07|804C08|804C47|804C84|804CC3|804CCE|804CD1|804D2C|804D32|804D4C|804D57|804D99|804D9F|804DA0|804DA1|804DAB|804DAC|804DAF|804DB1|804DB4|804DB6|804DB9|804DBA|804DC5|804DD5|804E1C|804E1F|804E20|804E2C|804E2E|804E2F|804E31|804E3C|804E3D|804E40|804E41|804E45|804E89|804E99|804E9B|804E9F|804EA7|804EBE|804EC7|804EC9|804ECA|804ECD|804EDB|804EDE|804EFF|804F03|804F05|804F08|804F0A|804F10|804F12|804F13|804F16|804F18|804F19|804F1D|804F24|804F25|804F2B|804F31|804F34|804F35|804F37|804F43|804F46|804F6B|804F6F|804F72|804F7B|804F7C|804F81|804F83|804F85|804F89|804F8B|804F8C|804F8E|804FE8|804FED|804FF1|805113|805124|8051E0|805200|80521C|805269|80526A|8052D1|8052F1|805DE9|805DF6|805E02|805E1E|805E20|805E2D|805E35|805E4C|805E4E|805E8F|805E97|805EA0|805EA1|805EB0|805EBF|805EC2|805EC4|805EF6|805EFD|805F04|805F44|805F5F|805F60|806022|806056|806F38|807005|80700D|80700E|807018|807027|8070D4|80712A|80735A|80744F|807496|8074D0|807510|8081B7|8084DE|8085CE|80DE9A|80DEFA|80DFF1|80DFF9|80E00B|80E010|80E011|80E020|80E025|80E026|80E033|80E037|80E039|80E27E|80E56C|80E61B|80E639|80E63D|80E696|80E6F3|80E800|80E813|80E84E|80E856|80E8AD|80E8C1|80E8C5|80E922|80E958|80E9A8|80EA57|80EAB9|80ECEC|80F3E6|80F41E|80F760|80F762|80F764|80F76A|80F76B|80F76F|80F770|80F78E|80F7C3|80F7C5|80F7C6|80F7C7|80F7C8|80F7CD|80F7D5|80F7D6|80F7D7|80F7D8|80F7DC|80F7E1|80F7E2|80F7E3|80F7F5|80F803|80F807|80F80A|80F80C|80F810|80F813|80F819|80F821|80F823|80F825|80F828|80F82C|80F82E|80F82F|80F834|80F835|80F83A|80F83E|80F83F|80F844|80F84A|80F84D|80F850|80F85C|80F85F|80F86A|80F86D|80F86E|80F87F|80F887|80F88A|80F88C|80F890|80F897|80F898|80F899|80F89E|80F89F|80F8A1|80F8A5|80F8A6|80F8AA|80F8AD|80F8B1|80F8B6|80F8B7|80F8BD|80F8CC|80F8D9|80F8E3|80F8EE|80F8F8|80F8FB|80F8FD|80F901|80F902|80F909|80F90B|80F90D|80F913|80F915|80F917|80F91B|80F927|80F928|80F929|80F92E|80F935|80F936|80F93A|80F946|80F99D|80F99F|80F9A0|80F9A2|80F9A3|80F9A5|80F9B6|80FA8C|80FAF4|80FBC9|80FE67|80FEE2|80FEEA|80FEF2|80FEF4|80FEF5|80FEFF|80FF06|80FF0E|80FF0F|80FF2C|80FF59|80FF5C|80FF5D|80FF61|80FF62|80FF6B|80FF6C|80FF73|80FF74|80FF75|80FF7A|80FF84|813742|8137FE|813875|813888|8138E0|8138F1|827FFF|82888F|828A97|82911A|82911C|829533|82979C|82ACCB|82ACCF|82B33A|82BE6C|82C194|82C72D|82D968|82D9F2|82DAA6|82DAAF","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2370,"y":1000,"wires":[["11d9ca6d.d650c6"],[]]},{"id":"18473c54.02ac54","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"eq","v":"01","vt":"num"},{"t":"eq","v":"00","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":560,"wires":[["93a14a47.a9ac68"],["53879920.cca288"]]},{"id":"f4bb008c.53f02","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.lastUpdated","targetType":"msg","statusVal":"","statusType":"auto","x":530,"y":280,"wires":[]},{"id":"7313cfba.1a1f4","type":"inject","z":"fa40001c.4d62c","name":"01","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"7F5804\",\"lastUpdated\":\"timess\",\"status\":\"01\"}","payloadType":"json","x":250,"y":140,"wires":[["56d4cd93.e1dae4"]]},{"id":"30d2477c.5fd558","type":"inject","z":"fa40001c.4d62c","name":"00","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"mark01\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":250,"y":280,"wires":[["56d4cd93.e1dae4"]]},{"id":"1aa0c257.1dbcae","type":"function","z":"fa40001c.4d62c","name":"compare with previous value","func":"/* SPEC\n    The comparison should return previous value if the subsequent\n    is 2 times smaller or 2x larger than the previous one.\n*/\n\n\nvar current = msg.payload; //get current value\nvar previous = context.get(\"previous\"); //get previous value\n\n\n\n\nif (current > (previous*2.0) || current < (previous/2.0)) {\n    msg.payload = previous;\n} \ncontext.set(\"previous\", msg.payload); //update previous\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3960,"y":1700,"wires":[["7273ca7d.6b4724"]]},{"id":"a9119b8c.6a7ca8","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"2","payloadType":"num","x":3650,"y":1640,"wires":[["1aa0c257.1dbcae"]]},{"id":"cfe890f8.e3391","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"num","x":3650,"y":1680,"wires":[["1aa0c257.1dbcae"]]},{"id":"f4e8b324.2e2d8","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"5","payloadType":"num","x":3650,"y":1720,"wires":[["1aa0c257.1dbcae"]]},{"id":"e8e16ba7.d9ca18","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"10","payloadType":"num","x":3650,"y":1760,"wires":[["1aa0c257.1dbcae"]]},{"id":"32728a5d.c44736","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"50","payloadType":"num","x":3650,"y":1880,"wires":[["1aa0c257.1dbcae"]]},{"id":"7e6fbb4a.7a0024","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"150","payloadType":"num","x":3650,"y":1960,"wires":[["1aa0c257.1dbcae"]]},{"id":"7273ca7d.6b4724","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","targetType":"full","statusVal":"payload","statusType":"auto","x":4010,"y":1760,"wires":[]},{"id":"8fecad08.51c79","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"100","payloadType":"num","x":3650,"y":1920,"wires":[["1aa0c257.1dbcae"]]},{"id":"a3692ebe.49052","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"40","payloadType":"num","x":3650,"y":1840,"wires":[["1aa0c257.1dbcae"]]},{"id":"a998a90a.90e108","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"20","payloadType":"num","x":3650,"y":1800,"wires":[["1aa0c257.1dbcae"]]},{"id":"c6ed3263.711a9","type":"rbe","z":"fa40001c.4d62c","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":2660,"y":2820,"wires":[[]]},{"id":"37070d24.c300c2","type":"function","z":"fa40001c.4d62c","name":"sorting 2.0 Live Data","func":"msg.payload = [{\n            mac : msg.payload.mac,\n            status1: msg.payload._value,\n            lastUpdated: Number(msg.payload._time),\n            data: msg.payload_value,\n            site : msg.payload.site,\n        },\n        {\n            mac : msg.payload.mac,\n            site : msg.payload.site,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1660,"y":960,"wires":[["cc35a3f.567806"]]},{"id":"c4829fd7.33986","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"payload._time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1420,"y":960,"wires":[["37070d24.c300c2"]]},{"id":"621f3723.d39908","type":"split","z":"fa40001c.4d62c","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":850,"y":900,"wires":[[]]},{"id":"91dd339c.756b","type":"join","z":"fa40001c.4d62c","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":2290,"y":1240,"wires":[["9022f3e3.727c4","2d517ac3.4f7d16"]]},{"id":"2d517ac3.4f7d16","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2890,"y":1240,"wires":[]},{"id":"31841b7a.b34644","type":"template","z":"fa40001c.4d62c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1720,"y":880,"wires":[["4a5c5b7.8b364a4"]]},{"id":"ffa7bb6a.d8dd78","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1050,"y":160,"wires":[]},{"id":"58bddeb4.33c43","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1060,"y":940,"wires":[["bf0dd9a8.925168"]]},{"id":"4aca654.13ebd9c","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"change","p":"payload[1]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":940,"wires":[["58bddeb4.33c43"]]},{"id":"c7ac4974.a3b5b8","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3260,"y":1160,"wires":[]},{"id":"4a5c5b7.8b364a4","type":"join","z":"fa40001c.4d62c","name":"","mode":"auto","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":2210,"y":1160,"wires":[["dbf23f8a.f84c1","9022f3e3.727c4"]]},{"id":"dbf23f8a.f84c1","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2380,"y":1100,"wires":[]},{"id":"8c48c5ca.a544b8","type":"http request","z":"9f2f3e0.64ecbc","name":"dnb MAPIQ ENDPOINT password 27EVf2zej0u3goJAbnjQ username svc_event_data","method":"POST","ret":"obj","paytoqs":"ignore","url":"https://dnb.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":1160,"y":540,"wires":[["73002cba.8dd9b4"]]},{"id":"2b801a90.db0fc6","type":"http request","z":"fa40001c.4d62c","name":"dnb MAPIQ ENDPOINT password 27EVf2zej0u3goJAbnjQ username svc_event_data","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://dnb.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":3080,"y":580,"wires":[["36143266.a21abe"]]},{"id":"73002cba.8dd9b4","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1410,"y":480,"wires":[]},{"id":"3496b8e9.0e97d8","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1790,"y":220,"wires":[]},{"id":"e831348.85a78c8","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2980,"y":680,"wires":[]},{"id":"192c8b6d.e9f555","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":320,"y":520,"wires":[]},{"id":"70608190.0197f","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804DB1|804D2C|804D57|7F57B8|80E039|804B09|7F605E|7F72F2|7F57E4|80F844|7F71B2|805E8F|7F57A7|7F534A|80E033|7F53EE|80744F|7F57C1|80DFF9|7F57C2|7F71F5|7F727C|804F46|7F584C|7FCA61|7F5762|804B2E|7F7257|80F83E|80F828|80389C|80FF7A|7F5821|8032B2|8038A0|7F61D7|8037A9|7F6101|7F61E9|803815|7F6208|7F6209|803730|804F18|7F5758|7F5820|7F70CB|804F13|80390F|7F53D9|7F61F9|7F46CB|803675|805124|804F7C|80526A|8032A9|7F5440|80387D|804B10|80334A|7F726C|7F728B|804DA0|804F7B|804DB6|7F57BD|804D99|804DD5|7FD1B4","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":500,"wires":[["6a303e93.7125a"],[]]},{"id":"fe82faf7.0db6d8","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F7E2|7F5211|7F5823|7F71E5|803571|805113|804EFF|804DBA|7F7269|804E31|7F72D9|7FCA4F|803246|804D9F|803971|7F60C2|7F72C7|803976|80F89F|7F512E|805EFD|8038BC|7FCAAC|7F7252|80F86A|7F71F3|8036BD|7F7088|7F6213|7F70B8|80FBC9|803299|80F76B|804F05|804D32|7F564E|7F7207|8032C5|8032E6|803606|804F81|804AA3|80326A|80FF62|80388F|8037BA|7F5425|7F706D|7F71E8|7F729A|7F4FD1|7F543A|80E025|7F72E4|7F5534|7F51AC|7F72C3|7F53D7|7F7266|7F72CB|803253|7F72B4|805E4E|7F727F|7F61E7|7F581E|80F807|7F7205|803826|80F770|7F6FE6|7F718A|804F85|804EBE|804DB4|807510|7F583D|7FCB24|803732|7F72BD|804F6F|80F898|829533|803354|7F582A|7F72B8|804E1F|7F7135|7F621D|8035D8|7F72B3|803834|7F5800|803856|8038FE|8038BA|80332E|8032CD|7F5636|7F4CFC|7F57B2|803258|80388D|7F7256|7F6042|7F7301|8032DC|7F57C4|803268|803232|80F90B|8033DF|7F584F|7FCA57|7F72DE|805269|7F5759|8032E5|804A42|803242|7F72F7|7F7091|8138F1|803350|7F712C|7F72BA|8032D9|80F85C|7F7189|7F538F|804DAB|804EDE|7F53DB|7F6289|80F7E3|7F715A|7F61EF|80F762|80339B|803337|8035DB|7F61DD|80F8FB|8081B7|7F71E7|80FF73|7F71F1","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":460,"wires":[["dd31eb7f.9b8e28"],[]]},{"id":"8b05ce0c.44dea","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804ECA|804CD1|7F71B7|7F7265|8032F4|8038FC|804F72|803257|7F725F|80324D|7F7254|7F72B9|803977|80700D|7F71EC|80F823|7F582E|7F72AA|804F19|803339|7F71DA|80F819|8032D0|803598|7F57DA|7F71DE|80F834|80FF0F|8036E0|80F82C|7F7228|7FCAB0|7FCA75|80372C|7F606B|803762|804F03|804F8E|7F71F2|8032F3|805EBF|804F1D|7F5822|80376F|804F24|8032C1|7F715B|7F728C|80FF06|7FCA37|80E011|8038FD|7F57B4|803883|7FCAF1|8137FE|7F61F6|7F706E|7F723D|7FD18C|803358|804E3D|7F729C|7F57AC|7F7229|80F813|80F85F|804E1C|7F5835|7F57E7|7F70BF|803889|7F723F|7F70EB|7F729B|803400|80389B|7F72B6|7F70B9|80F803|80E037|7F7275|7F72AF|804DAF|803728|7FCAFA|7F72EE|804DA1|7F7092|804DC5|7F710A|803604|7F7283|7F7248|7F7243|7F71E6|80E856|7F4B6D|7F61F8|8037A8|8051E0|7F621A|7F5752|8038B3|804D4C|803813|803810|804B89|7F5804|7F72B1|80F7D6|80327B|8032B3|7F7063|7F57A9","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":420,"wires":[["fe6c6e84.5372"],[]]},{"id":"43251e6e.00fbc","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"7F72BB|7F61D2|7F7185|7F579D|8138E0|7F7290|804E2C|80385C|8032E3|805E1E|804F37|813875|80F7C8|805E20|7F72FD|8037BB|8038A2|7F5588|7F7273|7F7073|7F7154|8036F3|7F71D7|7F5845|7F61DE|803825|82911C|82888F|7F72E9|80F7CD|7F70C3|803798|7F70BE|7F722A|82BE6C|82ACCF|7F61E6|46676A|7F72BC|7F728A|8037A5|80388E|7F606A|7F726F|7F728F|7F538B|7F7237|7F4DCC|7F558C|8037A4|80383F|46A92C|80382E|7F71ED|49954B|7F72B2|7F61E3|82DAAF|48996E|82979C|82DAA6|82D9F2|487B17|8038BB|80F3E6|7F72F8|80F88C|8032DB|80F92E|7F72FA|7F582F|80F928|7F5802|803244|82D968|82B33A|7F6B2A|827FFF|46AB0A|486E8D|82C72D|7F725A|82ACCB|487F95|828A97|80396A|4888FE|82911A|82C194|7F7134|7F6200|80F8A6|7F61EE|80F9A3|7F5536|80F87F|803799|80372E|80F909|80F8A1|805EA0|7F71F9|80EA57|8031C3|7F604C|803297|803616|7F72A0|803909|80F99F|8037B9|80F901|80E020|80E27E|80F88A|80FEFF|7F708C|7F5535|7F712D|7F6059|80F7C7|8038D6|803979|7F72D1|80F80C|80390D","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":380,"wires":[["9ce1d488.fc5d28"],[]]},{"id":"f8082c60.5927d","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"80F902|80F929|805E2D|7F7264|803650|803814|80F897|80332F|7F6084|80325F|803892|803248|80F8A5|7F6281|7F7272|8038C3|7F581B|7F4528|7F57AE|803674|8032CF|80390A|80ECEC|80F917|807018|803908|8038E9|7F627E|7F57A6|7F7291|80E639|8037B8|803890|7F7287|7F53D8|7F564D|7F5854|803269|80F9A2|7F57E2|803812|807496|7F71D9|80F935|8037B4|7F71E3|80E6F3|8032BF|803653|803837|80F8B7|803356|80700E|7F71FD|805F04|80F76A|7F722E|7F4FA1|7F4558|7F7288|7F72D7|7F575A|7F516A|7F72E2|7F72AE|7F70C1|7F71AA|7F72F0|7F7246|7F715E|7F727E|7F541E|7F7158|7F4763|7F53B5|7F4FD2|7F72FF|7F70E8|7F7165|7F710E|7F61F5|7F6280|7F729D|7F541D|80327A|7F7270|7F5837|7F71FC|803353|7F60AD|7F7050|7F7090|7F4FA4|7F57A5|7F72A8|7F7106|7F7251|8038A3|7F57BA|7F715F|7F57D8|7F7203|7F72D6|7F7183|7F579C|8033FE|7F70E4|7F7295|7F604E|7F7201|803251|7F60A9|7F520C|7F72E5|7F722C|7F7267|8037C0|7F70EA|803966|7F71B5|806F38|8038A7|80F86E|7F71E2|80F936|803279|813888|7F579A|8037BC|8035FB","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":340,"wires":[["20a50b37.f02414"],[]]},{"id":"20a50b37.f02414","type":"function","z":"fa40001c.4d62c","name":"lvl 18","func":"msg.topic = \"rio/brisbane/level-18/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2370,"y":340,"wires":[["12315b53.2e7635"]]},{"id":"9ce1d488.fc5d28","type":"function","z":"fa40001c.4d62c","name":"lvl 19","func":"msg.topic = \"rio/brisbane/level-19/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2370,"y":380,"wires":[["12315b53.2e7635"]]},{"id":"fe6c6e84.5372","type":"function","z":"fa40001c.4d62c","name":"lvl 22","func":"msg.topic = \"rio/brisbane/level-22/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2370,"y":420,"wires":[["12315b53.2e7635"]]},{"id":"dd31eb7f.9b8e28","type":"function","z":"fa40001c.4d62c","name":"lvl 23","func":"msg.topic = \"rio/brisbane/level-23/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2370,"y":460,"wires":[["12315b53.2e7635"]]},{"id":"6a303e93.7125a","type":"function","z":"fa40001c.4d62c","name":"lvl 24","func":"msg.topic = \"rio/brisbane/level-24/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2370,"y":500,"wires":[["12315b53.2e7635"]]},{"id":"e5811ea5.1ba08","type":"function","z":"fa40001c.4d62c","name":"perth","func":"msg.topic = \"rio/perth/all/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2370,"y":540,"wires":[["12315b53.2e7635"]]},{"id":"5e904ba2.e3c894","type":"function","z":"fa40001c.4d62c","name":"brisbane","func":"msg.topic = \"rio/brisbane/all/\"+msg.payload[0].sensorId\nmsg.payload = msg.payload[0].status;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2380,"y":580,"wires":[["12315b53.2e7635"]]},{"id":"12315b53.2e7635","type":"mqtt out","z":"fa40001c.4d62c","name":"","topic":"","qos":"","retain":"","broker":"fb1189d8.7a3418","x":2670,"y":440,"wires":[]},{"id":"f6048b75.557718","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"46A92C|46AB0A|486E8D|487B17|487F95|4888FE|48996E|494E59|49954B|499E26|7F4528|7F4558|7F46CB|7F4763|7F4944|7F4B6D|7F4CFC|7F4DCC|7F4F2A|7F4F8E|7F4FA1|7F4FA3|7F4FA4|7F4FA9|7F4FD1|7F4FD2|7F512E|7F514F|7F5163|7F5169|7F516A|7F51AC|7F51EA|7F5208|7F520C|7F5211|7F5345|7F534A|7F536E|7F5389|7F538B|7F538C|7F538F|7F53AA|7F53B5|7F53D4|7F53D5|7F53D6|7F53D7|7F53D8|7F53D9|7F53DA|7F53DB|7F53EE|7F5419|7F541B|7F541C|7F541D|7F541E|7F5425|7F5427|7F542C|7F543A|7F543B|7F5440|7F5532|7F5533|7F5534|7F5535|7F5536|7F5580|7F5587|7F5588|7F558C|7F5597|7F55C0|7F55C1|7F55FF|7F5605|7F5607|7F5636|7F564D|7F564E|7F574E|7F5750|7F5752|7F5758|7F5759|7F575A|7F5762|7F5764|7F5794|7F5796|7F5797|7F579A|7F579C|7F579D|7F579F|7F57A0|7F57A1|7F57A3|7F57A5|7F57A6|7F57A7|7F57A8|7F57A9|7F57AC|7F57AE|7F57B2|7F57B4|7F57B6|7F57B8|7F57BA|7F57BB|7F57BD|7F57BE|7F57C1|7F57C2|7F57C4|7F57C6|7F57CB|7F57CC|7F57CE|7F57CF|7F57D1|7F57D8|7F57DA|7F57E2|7F57E4|7F57E5|7F57E6|7F57E7|7F57EB|7F57F4|7F5800|7F5802|7F5803|7F5804|7F5805|7F5806|7F5807|7F581B|7F581C|7F581E|7F5820|7F5821|7F5822|7F5823|7F5825|7F582A|7F582E|7F582F|7F5833|7F5834|7F5835|7F5837|7F5839|7F583D|7F5841|7F5845|7F5848|7F584C|7F584D|7F584F|7F5850|7F5851|7F5853|7F5854|7F59CC|7F5D9B|7F6042|7F6043|7F6049|7F604C|7F604E|7F6059|7F605E|7F605F|7F6067|7F606A|7F606B|7F607F|7F6082|7F6084|7F609F|7F60A9|7F60AD|7F60C2|7F6101|7F61D2|7F61D7|7F61DB|7F61DD|7F61DE|7F61E0|7F61E3|7F61E6|7F61E7|7F61E9|7F61EE|7F61EF|7F61F0|7F61F1|7F61F5|7F61F6|7F61F8|7F61F9|7F61FC|7F6200|7F6208|7F6209|7F620B|7F620C|7F6213|7F6219|7F621A|7F621B|7F621D|7F621E|7F622A|7F627E|7F627F|7F6280|7F6281|7F6282|7F6285|7F6289|7F628A|7F6290|7F6291|7F6B29|7F6B2A|7F6B2B|7F6EA9|7F6EAA|7F6FE6|7F7049|7F704C|7F7050|7F7063|7F7064|7F706B|7F706D|7F706E|7F7073|7F7087|7F7088|7F708C|7F7090|7F7091|7F7092|7F70B8|7F70B9|7F70BD|7F70BE|7F70BF|7F70C1|7F70C3|7F70CB|7F70E2|7F70E4|7F70E8|7F70E9|7F70EA|7F70EB|7F70EC|7F70ED|7F70F0|7F7106|7F710A|7F710B|7F710E|7F7110|7F7113|7F712C|7F712D|7F712F|7F7132|7F7134|7F7135|7F7136|7F7138|7F7154|7F7157|7F7158|7F7159|7F715A|7F715B|7F715E|7F715F|7F7161|7F7164|7F7165|7F7182|7F7183|7F7185|7F7187|7F7189|7F718A|7F71A9|7F71AA|7F71AC|7F71AE|7F71B0|7F71B2|7F71B4|7F71B5|7F71B7|7F71BD|7F71D1|7F71D3|7F71D6|7F71D7|7F71D9|7F71DA|7F71DB|7F71DC|7F71DE|7F71DF|7F71E0|7F71E1|7F71E2|7F71E3|7F71E4|7F71E5|7F71E6|7F71E7|7F71E8|7F71E9|7F71EB|7F71EC|7F71ED|7F71F0|7F71F1|7F71F2|7F71F3|7F71F4|7F71F5|7F71F6|7F71F7|7F71F8|7F71F9|7F71FA|7F71FB|7F71FC|7F71FD|7F71FE|7F71FF|7F7200|7F7201|7F7202|7F7203|7F7205|7F7207|7F7220|7F7223|7F7224|7F7228|7F7229|7F722A|7F722C|7F722E|7F7230|7F7237|7F723D|7F723F|7F7240|7F7243|7F7245|7F7246|7F7248|7F724A|7F724E|7F724F|7F7251|7F7252|7F7253|7F7254|7F7255|7F7256|7F7257|7F7258|7F7259|7F725A|7F725C|7F725E|7F725F|7F7260|7F7262|7F7264|7F7265|7F7266|7F7267|7F7268|7F7269|7F726B|7F726C|7F726D|7F726E|7F726F|7F7270|7F7272|7F7273|7F7275|7F7276|7F727B|7F727C|7F727D|7F727E|7F727F|7F7280|7F7281|7F7283|7F7284|7F7287|7F7288|7F728A|7F728B|7F728C|7F728D|7F728E|7F728F|7F7290|7F7291|7F7294|7F7295|7F7296|7F7297|7F7298|7F7299|7F729A|7F729B|7F729C|7F729D|7F729E|7F729F|7F72A0|7F72A8|7F72A9|7F72AA|7F72AC|7F72AD|7F72AE|7F72AF|7F72B1|7F72B2|7F72B3|7F72B4|7F72B5|7F72B6|7F72B7|7F72B8|7F72B9|7F72BA|7F72BB|7F72BC|7F72BD|7F72BE|7F72BF|7F72C1|7F72C2|7F72C3|7F72C6|7F72C7|7F72C8|7F72C9|7F72CA|7F72CB|7F72CC|7F72CD|7F72D0|7F72D1|7F72D2|7F72D6|7F72D7|7F72D8|7F72D9|7F72DB|7F72DC|7F72DD|7F72DE|7F72DF|7F72E0|7F72E1|7F72E2|7F72E3|7F72E4|7F72E5|7F72E7|7F72E8|7F72E9|7F72EC|7F72EE|7F72F0|7F72F2|7F72F3|7F72F5|7F72F7|7F72F8|7F72FA|7F72FB|7F72FC|7F72FD|7F72FE|7F72FF|7F7300|7F7301|7FC855|7FCA07|7FCA37|7FCA4F|7FCA57|7FCA61|7FCA75|7FCAAC|7FCAB0|7FCAF1|7FCAF2|7FCAFA|7FCB19|7FCB24|7FCB26|7FCB59|7FCB5A|7FD18C|7FD1B4|8031C3|8031C5|8031C8|8031C9|8031CB|80320F|80321E|80322A|803232|803233|803242|803244|803246|803247|803248|80324D|803251|803253|803256|803257|803258|80325A|80325F|803266|803267|803268|803269|80326A|80326F|803278|803279|80327A|80327B|803284|80328B|803297|803299|8032A9|8032AD|8032B2|8032B3|8032BA|8032BB|8032BE|8032BF|8032C1|8032C5|8032C7|8032CD|8032CE|8032CF|8032D0|8032D1|8032D9|8032DB|8032DC|8032DD|8032E3|8032E4|8032E5|8032E6|8032E7|8032EC|8032F2|8032F3|8032F4|8032F6|8032FB|803307|803319|803323|80332A|80332C|80332E|80332F|803330|803331|803337|803338|803339|803344|803346|803348|80334A|80334D|803350|803352|803353|803354|803356|803358|803359|80335A|80335B|80335D|803362|803363|80336C|80336E|803373|803389|803395|803397|80339A|80339B|8033D5|8033D7|8033D8|8033D9|8033DE|8033DF|8033FC|8033FE|803400|803401|803405|803471|803501|803532|803571|803598|8035D8|8035DA|8035DB|8035F9|8035FB|803604|803606|803615|803616|803650|803651|803653|803674|803675|803676|803681|803685|8036BD|8036DD|8036E0|8036E2|8036F3|803701|803724|803728|803729|80372C|80372D|80372E|803730|803732|803733|80375D|803762|803763|80376D|80376F|803798|803799|80379A|80379B|8037A4|8037A5|8037A6|8037A8|8037A9|8037AA|8037AC|8037AE|8037B4|8037B6|8037B7|8037B8|8037B9|8037BA|8037BB|8037BC|8037BD|8037C0|8037C1|8037CD|8037E8|8037E9|8037EC|803801|803810|803811|803812|803813|803814|803815|803816|80381A|80381B|803820|803822|803823|803824|803825|803826|803827|80382E|803834|803836|803837|80383F|803856|803857|80385C|80385E|80387C|80387D|803880|803881|803882|803883|803889|80388C|80388D|80388E|80388F|803890|803891|803892|80389B|80389C|80389D|80389E|80389F|8038A0|8038A2|8038A3|8038A5|8038A7|8038B3|8038BA|8038BB|8038BC|8038BE|8038C2|8038C3|8038C5|8038D6|8038E8|8038E9|8038EA|8038F8|8038FA|8038FB|8038FC|8038FD|8038FE|803908|803909|80390A|80390B|80390C|80390D|80390E|80390F|80393D|80393E|803966|803969|80396A|80396B|803971|803974|803976|803977|803979|80397A|804A37|804A42|804AA3|804AAF|804B09|804B10|804B1E|804B2E|804B4A|804B89|804C07|804C08|804C47|804C84|804CC3|804CCE|804CD1|804D2C|804D32|804D4C|804D57|804D99|804D9F|804DA0|804DA1|804DAB|804DAC|804DAF|804DB1|804DB4|804DB6|804DB9|804DBA|804DC5|804DD5|804E1C|804E1F|804E20|804E2C|804E2E|804E2F|804E31|804E3C|804E3D|804E40|804E41|804E45|804E89|804E99|804E9B|804E9F|804EA7|804EBE|804EC7|804EC9|804ECA|804ECD|804EDB|804EDE|804EFF|804F03|804F05|804F08|804F0A|804F10|804F12|804F13|804F16|804F18|804F19|804F1D|804F24|804F25|804F2B|804F31|804F34|804F35|804F37|804F43|804F46|804F6B|804F6F|804F72|804F7B|804F7C|804F81|804F83|804F85|804F89|804F8B|804F8C|804F8E|804FE8|804FED|804FF1|805113|805124|8051E0|805200|80521C|805269|80526A|8052D1|8052F1|805DE9|805DF6|805E02|805E1E|805E20|805E2D|805E35|805E4C|805E4E|805E8F|805E97|805EA0|805EA1|805EB0|805EBF|805EC2|805EC4|805EF6|805EFD|805F04|805F44|805F5F|805F60|806022|806056|806F38|807005|80700D|80700E|807018|807027|8070D4|80712A|80735A|80744F|807496|8074D0|807510|8081B7|8084DE|8085CE|80DE9A|80DEFA|80DFF1|80DFF9|80E00B|80E010|80E011|80E020|80E025|80E026|80E033|80E037|80E039|80E27E|80E56C|80E61B|80E639|80E63D|80E696|80E6F3|80E800|80E813|80E84E|80E856|80E8AD|80E8C1|80E8C5|80E922|80E958|80E9A8|80EA57|80EAB9|80ECEC|80F3E6|80F41E|80F760|80F762|80F764|80F76A|80F76B|80F76F|80F770|80F78E|80F7C3|80F7C5|80F7C6|80F7C7|80F7C8|80F7CD|80F7D5|80F7D6|80F7D7|80F7D8|80F7DC|80F7E1|80F7E2|80F7E3|80F7F5|80F803|80F807|80F80A|80F80C|80F810|80F813|80F819|80F821|80F823|80F825|80F828|80F82C|80F82E|80F82F|80F834|80F835|80F83A|80F83E|80F83F|80F844|80F84A|80F84D|80F850|80F85C|80F85F|80F86A|80F86D|80F86E|80F87F|80F887|80F88A|80F88C|80F890|80F897|80F898|80F899|80F89E|80F89F|80F8A1|80F8A5|80F8A6|80F8AA|80F8AD|80F8B1|80F8B6|80F8B7|80F8BD|80F8CC|80F8D9|80F8E3|80F8EE|80F8F8|80F8FB|80F8FD|80F901|80F902|80F909|80F90B|80F90D|80F913|80F915|80F917|80F91B|80F927|80F928|80F929|80F92E|80F935|80F936|80F93A|80F946|80F99D|80F99F|80F9A0|80F9A2|80F9A3|80F9A5|80F9B6|80FA8C|80FAF4|80FBC9|80FE67|80FEE2|80FEEA|80FEF2|80FEF4|80FEF5|80FEFF|80FF06|80FF0E|80FF0F|80FF2C|80FF59|80FF5C|80FF5D|80FF61|80FF62|80FF6B|80FF6C|80FF73|80FF74|80FF75|80FF7A|80FF84|813742|8137FE|813875|813888|8138E0|8138F1|827FFF|82888F|828A97|82911A|82911C|829533|82979C|82ACCB|82ACCF|82B33A|82BE6C|82C194|82C72D|82D968|82D9F2|82DAA6|82DAAF","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":540,"wires":[[],["e5811ea5.1ba08"]]},{"id":"558d9d64.1af124","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0].sensorId","propertyType":"msg","rules":[{"t":"regex","v":"46A92C|46AB0A|486E8D|487B17|487F95|4888FE|48996E|494E59|49954B|499E26|7F4528|7F4558|7F46CB|7F4763|7F4944|7F4B6D|7F4CFC|7F4DCC|7F4F2A|7F4F8E|7F4FA1|7F4FA3|7F4FA4|7F4FA9|7F4FD1|7F4FD2|7F512E|7F514F|7F5163|7F5169|7F516A|7F51AC|7F51EA|7F5208|7F520C|7F5211|7F5345|7F534A|7F536E|7F5389|7F538B|7F538C|7F538F|7F53AA|7F53B5|7F53D4|7F53D5|7F53D6|7F53D7|7F53D8|7F53D9|7F53DA|7F53DB|7F53EE|7F5419|7F541B|7F541C|7F541D|7F541E|7F5425|7F5427|7F542C|7F543A|7F543B|7F5440|7F5532|7F5533|7F5534|7F5535|7F5536|7F5580|7F5587|7F5588|7F558C|7F5597|7F55C0|7F55C1|7F55FF|7F5605|7F5607|7F5636|7F564D|7F564E|7F574E|7F5750|7F5752|7F5758|7F5759|7F575A|7F5762|7F5764|7F5794|7F5796|7F5797|7F579A|7F579C|7F579D|7F579F|7F57A0|7F57A1|7F57A3|7F57A5|7F57A6|7F57A7|7F57A8|7F57A9|7F57AC|7F57AE|7F57B2|7F57B4|7F57B6|7F57B8|7F57BA|7F57BB|7F57BD|7F57BE|7F57C1|7F57C2|7F57C4|7F57C6|7F57CB|7F57CC|7F57CE|7F57CF|7F57D1|7F57D8|7F57DA|7F57E2|7F57E4|7F57E5|7F57E6|7F57E7|7F57EB|7F57F4|7F5800|7F5802|7F5803|7F5804|7F5805|7F5806|7F5807|7F581B|7F581C|7F581E|7F5820|7F5821|7F5822|7F5823|7F5825|7F582A|7F582E|7F582F|7F5833|7F5834|7F5835|7F5837|7F5839|7F583D|7F5841|7F5845|7F5848|7F584C|7F584D|7F584F|7F5850|7F5851|7F5853|7F5854|7F59CC|7F5D9B|7F6042|7F6043|7F6049|7F604C|7F604E|7F6059|7F605E|7F605F|7F6067|7F606A|7F606B|7F607F|7F6082|7F6084|7F609F|7F60A9|7F60AD|7F60C2|7F6101|7F61D2|7F61D7|7F61DB|7F61DD|7F61DE|7F61E0|7F61E3|7F61E6|7F61E7|7F61E9|7F61EE|7F61EF|7F61F0|7F61F1|7F61F5|7F61F6|7F61F8|7F61F9|7F61FC|7F6200|7F6208|7F6209|7F620B|7F620C|7F6213|7F6219|7F621A|7F621B|7F621D|7F621E|7F622A|7F627E|7F627F|7F6280|7F6281|7F6282|7F6285|7F6289|7F628A|7F6290|7F6291|7F6B29|7F6B2A|7F6B2B|7F6EA9|7F6EAA|7F6FE6|7F7049|7F704C|7F7050|7F7063|7F7064|7F706B|7F706D|7F706E|7F7073|7F7087|7F7088|7F708C|7F7090|7F7091|7F7092|7F70B8|7F70B9|7F70BD|7F70BE|7F70BF|7F70C1|7F70C3|7F70CB|7F70E2|7F70E4|7F70E8|7F70E9|7F70EA|7F70EB|7F70EC|7F70ED|7F70F0|7F7106|7F710A|7F710B|7F710E|7F7110|7F7113|7F712C|7F712D|7F712F|7F7132|7F7134|7F7135|7F7136|7F7138|7F7154|7F7157|7F7158|7F7159|7F715A|7F715B|7F715E|7F715F|7F7161|7F7164|7F7165|7F7182|7F7183|7F7185|7F7187|7F7189|7F718A|7F71A9|7F71AA|7F71AC|7F71AE|7F71B0|7F71B2|7F71B4|7F71B5|7F71B7|7F71BD|7F71D1|7F71D3|7F71D6|7F71D7|7F71D9|7F71DA|7F71DB|7F71DC|7F71DE|7F71DF|7F71E0|7F71E1|7F71E2|7F71E3|7F71E4|7F71E5|7F71E6|7F71E7|7F71E8|7F71E9|7F71EB|7F71EC|7F71ED|7F71F0|7F71F1|7F71F2|7F71F3|7F71F4|7F71F5|7F71F6|7F71F7|7F71F8|7F71F9|7F71FA|7F71FB|7F71FC|7F71FD|7F71FE|7F71FF|7F7200|7F7201|7F7202|7F7203|7F7205|7F7207|7F7220|7F7223|7F7224|7F7228|7F7229|7F722A|7F722C|7F722E|7F7230|7F7237|7F723D|7F723F|7F7240|7F7243|7F7245|7F7246|7F7248|7F724A|7F724E|7F724F|7F7251|7F7252|7F7253|7F7254|7F7255|7F7256|7F7257|7F7258|7F7259|7F725A|7F725C|7F725E|7F725F|7F7260|7F7262|7F7264|7F7265|7F7266|7F7267|7F7268|7F7269|7F726B|7F726C|7F726D|7F726E|7F726F|7F7270|7F7272|7F7273|7F7275|7F7276|7F727B|7F727C|7F727D|7F727E|7F727F|7F7280|7F7281|7F7283|7F7284|7F7287|7F7288|7F728A|7F728B|7F728C|7F728D|7F728E|7F728F|7F7290|7F7291|7F7294|7F7295|7F7296|7F7297|7F7298|7F7299|7F729A|7F729B|7F729C|7F729D|7F729E|7F729F|7F72A0|7F72A8|7F72A9|7F72AA|7F72AC|7F72AD|7F72AE|7F72AF|7F72B1|7F72B2|7F72B3|7F72B4|7F72B5|7F72B6|7F72B7|7F72B8|7F72B9|7F72BA|7F72BB|7F72BC|7F72BD|7F72BE|7F72BF|7F72C1|7F72C2|7F72C3|7F72C6|7F72C7|7F72C8|7F72C9|7F72CA|7F72CB|7F72CC|7F72CD|7F72D0|7F72D1|7F72D2|7F72D6|7F72D7|7F72D8|7F72D9|7F72DB|7F72DC|7F72DD|7F72DE|7F72DF|7F72E0|7F72E1|7F72E2|7F72E3|7F72E4|7F72E5|7F72E7|7F72E8|7F72E9|7F72EC|7F72EE|7F72F0|7F72F2|7F72F3|7F72F5|7F72F7|7F72F8|7F72FA|7F72FB|7F72FC|7F72FD|7F72FE|7F72FF|7F7300|7F7301|7FC855|7FCA07|7FCA37|7FCA4F|7FCA57|7FCA61|7FCA75|7FCAAC|7FCAB0|7FCAF1|7FCAF2|7FCAFA|7FCB19|7FCB24|7FCB26|7FCB59|7FCB5A|7FD18C|7FD1B4|8031C3|8031C5|8031C8|8031C9|8031CB|80320F|80321E|80322A|803232|803233|803242|803244|803246|803247|803248|80324D|803251|803253|803256|803257|803258|80325A|80325F|803266|803267|803268|803269|80326A|80326F|803278|803279|80327A|80327B|803284|80328B|803297|803299|8032A9|8032AD|8032B2|8032B3|8032BA|8032BB|8032BE|8032BF|8032C1|8032C5|8032C7|8032CD|8032CE|8032CF|8032D0|8032D1|8032D9|8032DB|8032DC|8032DD|8032E3|8032E4|8032E5|8032E6|8032E7|8032EC|8032F2|8032F3|8032F4|8032F6|8032FB|803307|803319|803323|80332A|80332C|80332E|80332F|803330|803331|803337|803338|803339|803344|803346|803348|80334A|80334D|803350|803352|803353|803354|803356|803358|803359|80335A|80335B|80335D|803362|803363|80336C|80336E|803373|803389|803395|803397|80339A|80339B|8033D5|8033D7|8033D8|8033D9|8033DE|8033DF|8033FC|8033FE|803400|803401|803405|803471|803501|803532|803571|803598|8035D8|8035DA|8035DB|8035F9|8035FB|803604|803606|803615|803616|803650|803651|803653|803674|803675|803676|803681|803685|8036BD|8036DD|8036E0|8036E2|8036F3|803701|803724|803728|803729|80372C|80372D|80372E|803730|803732|803733|80375D|803762|803763|80376D|80376F|803798|803799|80379A|80379B|8037A4|8037A5|8037A6|8037A8|8037A9|8037AA|8037AC|8037AE|8037B4|8037B6|8037B7|8037B8|8037B9|8037BA|8037BB|8037BC|8037BD|8037C0|8037C1|8037CD|8037E8|8037E9|8037EC|803801|803810|803811|803812|803813|803814|803815|803816|80381A|80381B|803820|803822|803823|803824|803825|803826|803827|80382E|803834|803836|803837|80383F|803856|803857|80385C|80385E|80387C|80387D|803880|803881|803882|803883|803889|80388C|80388D|80388E|80388F|803890|803891|803892|80389B|80389C|80389D|80389E|80389F|8038A0|8038A2|8038A3|8038A5|8038A7|8038B3|8038BA|8038BB|8038BC|8038BE|8038C2|8038C3|8038C5|8038D6|8038E8|8038E9|8038EA|8038F8|8038FA|8038FB|8038FC|8038FD|8038FE|803908|803909|80390A|80390B|80390C|80390D|80390E|80390F|80393D|80393E|803966|803969|80396A|80396B|803971|803974|803976|803977|803979|80397A|804A37|804A42|804AA3|804AAF|804B09|804B10|804B1E|804B2E|804B4A|804B89|804C07|804C08|804C47|804C84|804CC3|804CCE|804CD1|804D2C|804D32|804D4C|804D57|804D99|804D9F|804DA0|804DA1|804DAB|804DAC|804DAF|804DB1|804DB4|804DB6|804DB9|804DBA|804DC5|804DD5|804E1C|804E1F|804E20|804E2C|804E2E|804E2F|804E31|804E3C|804E3D|804E40|804E41|804E45|804E89|804E99|804E9B|804E9F|804EA7|804EBE|804EC7|804EC9|804ECA|804ECD|804EDB|804EDE|804EFF|804F03|804F05|804F08|804F0A|804F10|804F12|804F13|804F16|804F18|804F19|804F1D|804F24|804F25|804F2B|804F31|804F34|804F35|804F37|804F43|804F46|804F6B|804F6F|804F72|804F7B|804F7C|804F81|804F83|804F85|804F89|804F8B|804F8C|804F8E|804FE8|804FED|804FF1|805113|805124|8051E0|805200|80521C|805269|80526A|8052D1|8052F1|805DE9|805DF6|805E02|805E1E|805E20|805E2D|805E35|805E4C|805E4E|805E8F|805E97|805EA0|805EA1|805EB0|805EBF|805EC2|805EC4|805EF6|805EFD|805F04|805F44|805F5F|805F60|806022|806056|806F38|807005|80700D|80700E|807018|807027|8070D4|80712A|80735A|80744F|807496|8074D0|807510|8081B7|8084DE|8085CE|80DE9A|80DEFA|80DFF1|80DFF9|80E00B|80E010|80E011|80E020|80E025|80E026|80E033|80E037|80E039|80E27E|80E56C|80E61B|80E639|80E63D|80E696|80E6F3|80E800|80E813|80E84E|80E856|80E8AD|80E8C1|80E8C5|80E922|80E958|80E9A8|80EA57|80EAB9|80ECEC|80F3E6|80F41E|80F760|80F762|80F764|80F76A|80F76B|80F76F|80F770|80F78E|80F7C3|80F7C5|80F7C6|80F7C7|80F7C8|80F7CD|80F7D5|80F7D6|80F7D7|80F7D8|80F7DC|80F7E1|80F7E2|80F7E3|80F7F5|80F803|80F807|80F80A|80F80C|80F810|80F813|80F819|80F821|80F823|80F825|80F828|80F82C|80F82E|80F82F|80F834|80F835|80F83A|80F83E|80F83F|80F844|80F84A|80F84D|80F850|80F85C|80F85F|80F86A|80F86D|80F86E|80F87F|80F887|80F88A|80F88C|80F890|80F897|80F898|80F899|80F89E|80F89F|80F8A1|80F8A5|80F8A6|80F8AA|80F8AD|80F8B1|80F8B6|80F8B7|80F8BD|80F8CC|80F8D9|80F8E3|80F8EE|80F8F8|80F8FB|80F8FD|80F901|80F902|80F909|80F90B|80F90D|80F913|80F915|80F917|80F91B|80F927|80F928|80F929|80F92E|80F935|80F936|80F93A|80F946|80F99D|80F99F|80F9A0|80F9A2|80F9A3|80F9A5|80F9B6|80FA8C|80FAF4|80FBC9|80FE67|80FEE2|80FEEA|80FEF2|80FEF4|80FEF5|80FEFF|80FF06|80FF0E|80FF0F|80FF2C|80FF59|80FF5C|80FF5D|80FF61|80FF62|80FF6B|80FF6C|80FF73|80FF74|80FF75|80FF7A|80FF84|813742|8137FE|813875|813888|8138E0|8138F1|827FFF|82888F|828A97|82911A|82911C|829533|82979C|82ACCB|82ACCF|82B33A|82BE6C|82C194|82C72D|82D968|82D9F2|82DAA6|82DAAF","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2230,"y":580,"wires":[["5e904ba2.e3c894"],[]]},{"id":"62730fff.9f4d4","type":"mqtt in","z":"9f2f3e0.64ecbc","name":"","topic":"sensor/#","qos":"0","datatype":"auto","broker":"fb1189d8.7a3418","x":300,"y":1120,"wires":[["697effb8.46c2d"]]},{"id":"697effb8.46c2d","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"C4:DD:57:8E:90:74","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:BC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:0C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:48","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:B0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:E0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:E4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:FC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:DC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:7C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:B0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:D0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:94","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:AC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:A4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:30","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:44","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:DC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:54","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:B8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:18","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:78","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:91:00","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:48","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:44","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:10","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:B8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:C4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:A0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:64","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:54","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:F0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:E4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:98","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:70","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:7C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:C8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:8C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:84","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:48","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:44","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:E0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:3C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:7C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:F4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:E8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:68","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:2C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:40","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:91:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:40","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:14","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:38","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:D4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:EC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:B4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:F0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:08","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:64","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:D8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:F8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:91:14","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:D8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:24","vt":"str"},{"t":"cont","v":"08:3A:F2:37:43:0C","vt":"str"},{"t":"cont","v":"08:3A:F2:37:34:60","vt":"str"},{"t":"cont","v":"08:3A:F2:37:42:AC","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:08","vt":"str"},{"t":"cont","v":"08:3A:F2:31:33:48","vt":"str"},{"t":"cont","v":"08:3A:F2:37:34:48","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:4C","vt":"str"},{"t":"cont","v":"08:3A:F2:37:42:80","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:28","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:04","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":82,"x":430,"y":1120,"wires":[["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],["d01b156e.fb3a18"],[]]},{"id":"d01b156e.fb3a18","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"topic","propertyType":"msg","rules":[{"t":"else"},{"t":"cont","v":"rangingPeriod","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":830,"y":1080,"wires":[[],["c1b096b.f163568"]]},{"id":"c1b096b.f163568","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"topic","pt":"msg","from":"rangingPeriod","fromt":"str","to":"online","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1020,"wires":[["edec8162.f7177"]]},{"id":"f7d65441.9453c8","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"topic","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"30","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1590,"y":900,"wires":[["d9020508.9f8e28"]]},{"id":"b3b0db52.20b7c8","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1350,"y":1040,"wires":[]},{"id":"edec8162.f7177","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"OK","vt":"str"},{"t":"eq","v":"50000","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":1050,"y":1100,"wires":[["1e22eda9.826c62"],["1e22eda9.826c62"],[]]},{"id":"1e22eda9.826c62","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"topic","pt":"msg","from":"sensor/","fromt":"str","to":"","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"/online","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1120,"y":1000,"wires":[["f7d65441.9453c8","e3ff6f06.5e09f"]]},{"id":"9365b9f4.9fde98","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.topic = \"RIO DESK SENSORS OFFLINE\"\nmsg.payload = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2940,"y":1500,"wires":[["72cd777a.58d6b8","df291be.20dbee8"]]},{"id":"df291be.20dbee8","type":"e-mail","z":"9f2f3e0.64ecbc","server":"smtp.gmail.com","port":"587","secure":false,"tls":true,"name":"justin@zeplin.com.au,mark@intuitive.works","dname":"ucdldrjdwegrpgev justin@zeplin.com.au,","x":3280,"y":1380,"wires":[]},{"id":"d9020508.9f8e28","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"move","p":"topic","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1260,"y":1080,"wires":[["b3b0db52.20b7c8","d4306bee.eb6a58"]]},{"id":"c8f2d794.881ca8","type":"csv","z":"9f2f3e0.64ecbc","name":"","sep":",","hdrin":"","hdrout":"none","multi":"mult","ret":"\\n","temp":"","skip":"0","strings":true,"include_empty_strings":"","include_null_values":"","x":1440,"y":1180,"wires":[[]]},{"id":"d48527cd.23fb88","type":"rbe","z":"9f2f3e0.64ecbc","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1180,"y":880,"wires":[[]]},{"id":"ed164a78.fa55e8","type":"timeframerlt","z":"9f2f3e0.64ecbc","name":"","throttleType":"count","timeLimit":"1","timeLimitType":"seconds","countLimit":"1","byresetcountLimit":0,"x":770,"y":920,"wires":[[]]},{"id":"ed18ed3f.af5d2","type":"delay","z":"9f2f3e0.64ecbc","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":830,"y":1260,"wires":[[]]},{"id":"e0eead15.52a6a","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":860,"wires":[]},{"id":"95ca4590.761f48","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1870,"y":1000,"wires":[]},{"id":"d4306bee.eb6a58","type":"split","z":"9f2f3e0.64ecbc","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1510,"y":1080,"wires":[["5fb5287e.8608e8"]]},{"id":"5fb5287e.8608e8","type":"deduplicate","z":"9f2f3e0.64ecbc","name":"","expiry":5,"x":1700,"y":1080,"wires":[["95ca4590.761f48"],[]]},{"id":"ee8dd04e.87f95","type":"excel","z":"9f2f3e0.64ecbc","name":"","file":"","x":1360,"y":1240,"wires":[[]]},{"id":"e3ff6f06.5e09f","type":"timestamp","z":"9f2f3e0.64ecbc","name":"","x":1550,"y":840,"wires":[["1f6c2530.40d13b"]]},{"id":"1f6c2530.40d13b","type":"function","z":"9f2f3e0.64ecbc","name":"sorting 2.0 Heartbeat ","func":"msg.payload = [{\n            mac : msg.topic,\n            status :msg.payload,\n            site : \"Brisbane\",\n        },\n        {\n            online1 : msg.topic,\n            site : \"Brisbane\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1780,"y":840,"wires":[["71c2331b.304cbc"]]},{"id":"71c2331b.304cbc","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"15","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":2020,"y":860,"wires":[["d29e6178.8de1a"]]},{"id":"d29e6178.8de1a","type":"influxdb out","z":"9f2f3e0.64ecbc","influxdb":"bbc6c1f7.7140d","name":"","measurement":"Rio_meeting-room_data","precision":"","retentionPolicy":"","database":"rio-aus","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"rio-brisbane","x":2290,"y":840,"wires":[],"info":"XnRQzcg53KA2Poi69tQ79Tvi7AQRYjlSopK5FznucTFMwbAFj9X1xEqrN_qxg0u1SSMqTsMm__utvRV4KD9eMw=="},{"id":"e4f96bf2.449198","type":"influxdb in","z":"9f2f3e0.64ecbc","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":1420,"y":1340,"wires":[["1a3804e4.462f8b"]]},{"id":"5d44f14f.eadd7","type":"template","z":"9f2f3e0.64ecbc","name":"get 1 sensor live desk","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\")   |> range(start:-48h, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"_field\"] == \"heartbeat\")  |> sort(columns: [\"_time\"], desc: true)   |> limit(n:1, offset: 0)   |> yield(name: \"last\")\n","output":"str","x":1200,"y":1340,"wires":[["e4f96bf2.449198"]]},{"id":"4d66ac9.805b754","type":"inject","z":"9f2f3e0.64ecbc","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"00 20 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1030,"y":1300,"wires":[["5d44f14f.eadd7"]]},{"id":"170dce77.a71932","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.payload.online1","targetType":"msg","statusVal":"","statusType":"auto","x":2340,"y":1160,"wires":[]},{"id":"1a3804e4.462f8b","type":"split","z":"9f2f3e0.64ecbc","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":false,"addname":"","x":1550,"y":1300,"wires":[["64320374.37e02c"]]},{"id":"13937f59.2d8251","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"timed","propertyType":"msg","rules":[{"t":"gt","v":"172800","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2250,"y":1440,"wires":[["8d092933.a06018"],[]]},{"id":"72cd777a.58d6b8","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":3090,"y":1300,"wires":[]},{"id":"d3e1ddac.c3ccb","type":"mqtt out","z":"9f2f3e0.64ecbc","name":"","topic":"","qos":"","retain":"","broker":"d72c99e7.e5b118","x":3270,"y":2440,"wires":[]},{"id":"47afd99.1b5c728","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"reset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2760,"wires":[["8d4156b6.26f938"]]},{"id":"8d4156b6.26f938","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"true\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2760,"wires":[["30035773.416e68"]]},{"id":"30035773.416e68","type":"delay","z":"9f2f3e0.64ecbc","name":"","pauseType":"rate","timeout":"2","timeoutUnits":"seconds","rate":"4","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2290,"y":2520,"wires":[["d3e1ddac.c3ccb"]]},{"id":"f4280a92.e083e8","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/people/count\"\nreturn msg;","outputs":1,"noerr":0,"x":1650,"y":2760,"wires":[["47afd99.1b5c728"]]},{"id":"3b82190.22845e8","type":"split","z":"9f2f3e0.64ecbc","name":"People/reset","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1250,"y":2760,"wires":[["fcf2aa16.c902d8"]]},{"id":"fcf2aa16.c902d8","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2760,"wires":[["f4280a92.e083e8"]]},{"id":"729de611.12f3d8","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2720,"wires":[["867acd9c.86603"]]},{"id":"867acd9c.86603","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/reset\"\nreturn msg;","outputs":1,"noerr":0,"x":1650,"y":2720,"wires":[["a489daa1.388d18"]]},{"id":"a489daa1.388d18","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"reset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2720,"wires":[["4deb40de.e2a22"]]},{"id":"4deb40de.e2a22","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"true\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2720,"wires":[["f0e47c33.1c415"]]},{"id":"f0e47c33.1c415","type":"delay","z":"9f2f3e0.64ecbc","name":"","pauseType":"delay","timeout":"20","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":3770,"y":1960,"wires":[["1dea6f90.a819e","d3e1ddac.c3ccb"]]},{"id":"ad006c20.711c7","type":"split","z":"9f2f3e0.64ecbc","name":"reset","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1270,"y":2720,"wires":[["729de611.12f3d8"]]},{"id":"ffe85d44.18deb","type":"split","z":"9f2f3e0.64ecbc","name":"flash","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":990,"y":2880,"wires":[["1d0e811c.a04d5f"]]},{"id":"93353584.272618","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2640,"wires":[["db1b556f.b0fc68"]]},{"id":"db1b556f.b0fc68","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/flashUpdate\"\nreturn msg;","outputs":1,"noerr":0,"x":1650,"y":2640,"wires":[["e5633b5a.b59be8"]]},{"id":"e5633b5a.b59be8","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"flashUpdate","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2640,"wires":[["27bf2e34.66fed2"]]},{"id":"27bf2e34.66fed2","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"1\"\nreturn msg;","outputs":1,"noerr":0,"x":2000,"y":2640,"wires":[["f0e47c33.1c415"]]},{"id":"b4edf2ec.ae1fd","type":"split","z":"9f2f3e0.64ecbc","name":"rangingPeriod","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1240,"y":2600,"wires":[["937ba400.bee708"]]},{"id":"937ba400.bee708","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2600,"wires":[["436346ca.a6a448"]]},{"id":"436346ca.a6a448","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/rangingPeriod\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2600,"wires":[["3a5ba5d5.4c025a"]]},{"id":"3a5ba5d5.4c025a","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"rangingPeriod","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2600,"wires":[["74d6a41c.68207c"]]},{"id":"74d6a41c.68207c","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"50000\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2600,"wires":[["f0e47c33.1c415"]]},{"id":"2bb286da.e2848a","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2680,"wires":[["2d55e570.232bfa"]]},{"id":"2d55e570.232bfa","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/reboot\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2680,"wires":[["3e1e3472.b48b3c"]]},{"id":"3e1e3472.b48b3c","type":"change","z":"9f2f3e0.64ecbc","name":"reboot all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2680,"wires":[["ec6ecec5.7b469"]]},{"id":"b0c36747.60bc78","type":"split","z":"9f2f3e0.64ecbc","name":"reboot","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1270,"y":2680,"wires":[["2bb286da.e2848a"]]},{"id":"ec6ecec5.7b469","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"true\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2680,"wires":[["f0e47c33.1c415"]]},{"id":"138e409f.34009f","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"getSensorConfig","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2520,"wires":[["ef316983.a2dc88"]]},{"id":"36dd4f93.449f2","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/getSensorConfig\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2520,"wires":[["138e409f.34009f"]]},{"id":"aecc2717.8fa948","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2520,"wires":[["36dd4f93.449f2"]]},{"id":"37a70d60.34ace2","type":"split","z":"9f2f3e0.64ecbc","name":"getsensorconfig","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1240,"y":2520,"wires":[["aecc2717.8fa948"]]},{"id":"ef316983.a2dc88","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"1\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2520,"wires":[["f0e47c33.1c415"]]},{"id":"fac8f5bd.866d48","type":"split","z":"9f2f3e0.64ecbc","name":"wifimangager","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1240,"y":2560,"wires":[["d4a2784c.f71428"]]},{"id":"d4a2784c.f71428","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2560,"wires":[["cd0fe9c6.fdd678"]]},{"id":"cd0fe9c6.fdd678","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/wifiManagerEnable\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2560,"wires":[["f3de93d4.f23ee"]]},{"id":"f3de93d4.f23ee","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"wifiManagerEnable","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2560,"wires":[["216cf716.eec388"]]},{"id":"216cf716.eec388","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"0\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2560,"wires":[["f0e47c33.1c415"]]},{"id":"1ee7d5c.bf5682a","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"restoreSensorConfig","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2480,"wires":[["4ad84c9c.2db464"]]},{"id":"cba613cc.9e1c7","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/restoreSensorConfig\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2480,"wires":[["1ee7d5c.bf5682a"]]},{"id":"fd17ea6e.c2abe8","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2480,"wires":[["cba613cc.9e1c7"]]},{"id":"b72ee7c.7aa6818","type":"split","z":"9f2f3e0.64ecbc","name":"restoresensorconfig","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1220,"y":2480,"wires":[["fd17ea6e.c2abe8"]]},{"id":"46b0838c.b7b71c","type":"split","z":"9f2f3e0.64ecbc","name":"measurementBudget","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1220,"y":2240,"wires":[["c4e2693.1513398"]]},{"id":"c4e2693.1513398","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2240,"wires":[["13bb1eb3.778281"]]},{"id":"13bb1eb3.778281","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/measurementBudget\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2240,"wires":[["f07e0ddf.25f5f"]]},{"id":"f07e0ddf.25f5f","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"measurementBudget","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2240,"wires":[["6ab8eb13.905a54"]]},{"id":"6ab8eb13.905a54","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"20\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2240,"wires":[["f0e47c33.1c415"]]},{"id":"a3326874.465518","type":"split","z":"9f2f3e0.64ecbc","name":"measurementPeriod","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1220,"y":2280,"wires":[["2e4043d0.67083c"]]},{"id":"2e4043d0.67083c","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2280,"wires":[["2fcec146.4989ce"]]},{"id":"2fcec146.4989ce","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/measurementPeriod\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2280,"wires":[["f96bc3f1.d117a"]]},{"id":"f96bc3f1.d117a","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"measurementPeriod","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2280,"wires":[["f0344a4d.3212d8"]]},{"id":"f0344a4d.3212d8","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"20\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2280,"wires":[["f0e47c33.1c415"]]},{"id":"cf01ed8c.edbf5","type":"split","z":"9f2f3e0.64ecbc","name":"roiConfig default","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1240,"y":2360,"wires":[["58961ccf.eeb324"]]},{"id":"58961ccf.eeb324","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2360,"wires":[["d6275a83.8b98d8"]]},{"id":"d6275a83.8b98d8","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/roiConfig\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2360,"wires":[["cebaa680.489498"]]},{"id":"cebaa680.489498","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"roiConfig","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2360,"wires":[["55a2bc9b.28f704"]]},{"id":"55a2bc9b.28f704","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"8,8,229,93,29,165\"\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2360,"wires":[["f0e47c33.1c415"]]},{"id":"e2c6762.b211d88","type":"split","z":"9f2f3e0.64ecbc","name":"maxdistance","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1250,"y":2400,"wires":[["1e65552d.7655fb"]]},{"id":"1e65552d.7655fb","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2400,"wires":[["faff09d5.716868"]]},{"id":"faff09d5.716868","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/maxDistance\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2400,"wires":[["7e94c334.9f46ac"]]},{"id":"7e94c334.9f46ac","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"maxDistance","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2400,"wires":[["b207bc6d.26618"]]},{"id":"b207bc6d.26618","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"25\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2400,"wires":[["f0e47c33.1c415"]]},{"id":"3a4833e.4c9ddcc","type":"split","z":"9f2f3e0.64ecbc","name":"distancesArraySize","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1230,"y":2200,"wires":[["9f048141.fa8f"]]},{"id":"9f048141.fa8f","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2200,"wires":[["930c761f.c567a8"]]},{"id":"930c761f.c567a8","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/distancesArraySize\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2200,"wires":[["f4ba93f1.700a8"]]},{"id":"f4ba93f1.700a8","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"distancesArraySize","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2200,"wires":[["1e0a1ef4.5b87d1"]]},{"id":"1e0a1ef4.5b87d1","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"2\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2200,"wires":[["f0e47c33.1c415"]]},{"id":"6b71299f.360bb8","type":"split","z":"9f2f3e0.64ecbc","name":"threshold","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1260,"y":2440,"wires":[["17f934ec.47e52b"]]},{"id":"17f934ec.47e52b","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2440,"wires":[["899b19ea.9cda98"]]},{"id":"899b19ea.9cda98","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/threshold\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2440,"wires":[["bb0c104b.21d8a"]]},{"id":"bb0c104b.21d8a","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"threshold","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2440,"wires":[["a1be2b26.b0b998"]]},{"id":"a1be2b26.b0b998","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"2100,2100\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2440,"wires":[["f0e47c33.1c415"]]},{"id":"4ad84c9c.2db464","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"1\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2480,"wires":[["f0e47c33.1c415"]]},{"id":"ea66a892.510958","type":"inject","z":"9f2f3e0.64ecbc","name":"RIO 1 sensor","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:8D:30\"]","payloadType":"json","x":870,"y":2120,"wires":[[]]},{"id":"94f075f0.888798","type":"split","z":"9f2f3e0.64ecbc","name":"roiConfig flipped","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1240,"y":2320,"wires":[["c9975724.22f8b8"]]},{"id":"c9975724.22f8b8","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2320,"wires":[["44dd0634.2f37b8"]]},{"id":"44dd0634.2f37b8","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/roiConfig\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2320,"wires":[["9d281c21.26eee"]]},{"id":"9d281c21.26eee","type":"change","z":"9f2f3e0.64ecbc","name":"Reset all sensors","rules":[{"t":"change","p":"topic","pt":"msg","from":"count","fromt":"str","to":"roiConfig","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2320,"wires":[["c753decc.1b348"]]},{"id":"c753decc.1b348","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"8,8,93,229,165,29\"\nreturn msg;\n\n\t\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2320,"wires":[["f0e47c33.1c415"]]},{"id":"639a96f7.9f99a8","type":"switch","z":"9f2f3e0.64ecbc","name":"room 20.02","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"C4DD578E8CB8","vt":"str"},{"t":"eq","v":"C4DD578E90EC","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":360,"wires":[["f996dffb.959fa"],["f996dffb.959fa"]]},{"id":"deeb26f7.89a4b8","type":"switch","z":"9f2f3e0.64ecbc","name":"room 21.04","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"C4DD578E9564","vt":"str"},{"t":"eq","v":"C4DD578E914C","vt":"str"},{"t":"eq","v":"083AF2313348","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":450,"y":400,"wires":[["e8da2da0.2d258"],["e8da2da0.2d258"],[]]},{"id":"ed54d4e1.b71488","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":360,"wires":[["471f7ed8.42e99"]]},{"id":"3e6185f0.3c546a","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":400,"wires":[["cf874ec3.d5f52"]]},{"id":"560ce1a9.6540a","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"1","vt":"num","v2":"25","v2t":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":420,"wires":[["e9cbaf4d.54c05"],["92286fac.12be2"]]},{"id":"471f7ed8.42e99","type":"function","z":"9f2f3e0.64ecbc","name":"20.02","func":"msg.topic =\"ROOM2002\"\nmsg.payload = (msg.payload[0] + msg.payload[1])\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":870,"y":360,"wires":[["66b9e4c2.05980c","560ce1a9.6540a"]]},{"id":"cf874ec3.d5f52","type":"function","z":"9f2f3e0.64ecbc","name":"21.04","func":"msg.topic =\"ROOM2104\"\nmsg.payload = (msg.payload[0] + msg.payload[1] + msg.payload[2])\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":870,"y":400,"wires":[["66b9e4c2.05980c","560ce1a9.6540a"]]},{"id":"66b9e4c2.05980c","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":320,"wires":[]},{"id":"e8da2da0.2d258","type":"function","z":"9f2f3e0.64ecbc","name":"num","func":"msg.payload = Number(msg.payload)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":610,"y":400,"wires":[["3e6185f0.3c546a"]]},{"id":"f996dffb.959fa","type":"function","z":"9f2f3e0.64ecbc","name":"num","func":"msg.payload = Number(msg.payload)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":610,"y":360,"wires":[["ed54d4e1.b71488"]]},{"id":"3f29255b.49228a","type":"debug","z":"fa40001c.4d62c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":340,"y":480,"wires":[]},{"id":"c187e24.6204a2","type":"http in","z":"9f2f3e0.64ecbc","name":"","url":"/sigfox2","method":"post","upload":false,"swaggerDoc":"","x":450,"y":40,"wires":[["b209fad7.53e468"]]},{"id":"b209fad7.53e468","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":640,"y":40,"wires":[]},{"id":"722a408d.fc592","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 18","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:8D:A4\",\"C4:DD:57:8E:95:DC\"]","payloadType":"json","x":790,"y":2340,"wires":[[]]},{"id":"a8c5bc2c.7ffdd","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 19","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:8E:40\",\"C4:DD:57:8E:90:24\",\"C4:DD:57:8E:90:94\",\"C4:DD:57:8E:90:14\"]","payloadType":"json","x":790,"y":2380,"wires":[[]]},{"id":"c4bfa521.ed1a98","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 22","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:8E:3C\",\"C4:DD:57:8E:8D:6C\",\"C4:DD:57:8E:8D:C4\",\"C4:DD:57:8E:90:DC\"]","payloadType":"json","x":790,"y":2500,"wires":[[]]},{"id":"58bee273.d7797c","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 23","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:95:AC\",\"C4:DD:57:8E:90:F0\",\"C4:DD:57:8E:90:78\"]","payloadType":"json","x":790,"y":2540,"wires":[[]]},{"id":"17c2b518.6fb5eb","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 24","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:8E:6C\",\"C4:DD:57:8E:95:6C\"]","payloadType":"json","x":790,"y":2580,"wires":[[]]},{"id":"176f1d5a.ad19a3","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 25","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:8D:84\",\"C4:DD:57:8E:8D:7C\",\"C4:DD:57:8E:8D:38\",\"C4:DD:57:8E:8E:B8\",\"C4:DD:57:8E:90:70\"]","payloadType":"json","x":790,"y":2620,"wires":[[]]},{"id":"15f4155e.93d48b","type":"inject","z":"9f2f3e0.64ecbc","name":"Rio All","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:90:74\",\"C4:DD:57:8E:90:BC\",\"C4:DD:57:8E:95:6C\",\"C4:DD:57:8E:8E:0C\",\"C4:DD:57:8E:8C:48\",\"C4:DD:57:8E:90:B0\",\"C4:DD:57:8E:8D:E0\",\"C4:DD:57:8E:90:E4\",\"C4:DD:57:8E:8E:6C\",\"C4:DD:57:8E:8C:FC\",\"C4:DD:57:8E:90:DC\",\"C4:DD:57:8E:8E:7C\",\"C4:DD:57:8E:95:B0\",\"C4:DD:57:8E:8D:D0\",\"C4:DD:57:8E:90:94\",\"C4:DD:57:8E:95:AC\",\"C4:DD:57:8E:8D:A4\",\"C4:DD:57:8E:8D:30\",\"C4:DD:57:8E:8D:44\",\"C4:DD:57:8E:95:DC\",\"C4:DD:57:8E:90:6C\",\"C4:DD:57:8E:8D:6C\",\"C4:DD:57:8E:8E:58\",\"C4:DD:57:8E:8E:54\",\"C4:DD:57:8E:8E:B8\",\"C4:DD:57:8E:8E:18\",\"C4:DD:57:8E:90:78\",\"C4:DD:57:8E:91:00\",\"C4:DD:57:8E:8E:48\",\"C4:DD:57:8E:8C:44\",\"C4:DD:57:8E:8D:10\",\"C4:DD:57:8E:8C:B8\",\"C4:DD:57:8E:95:58\",\"C4:DD:57:8E:8D:C4\",\"C4:DD:57:8E:90:A0\",\"C4:DD:57:8E:90:64\",\"C4:DD:57:8E:90:58\",\"C4:DD:57:8E:90:54\",\"C4:DD:57:8E:90:F0\",\"C4:DD:57:8E:8D:E4\",\"C4:DD:57:8E:90:98\",\"C4:DD:57:8E:90:70\",\"C4:DD:57:8E:95:7C\",\"C4:DD:57:8E:90:C8\",\"C4:DD:57:8E:8E:8C\",\"C4:DD:57:8E:8D:84\",\"C4:DD:57:8E:90:48\",\"C4:DD:57:8E:8E:44\",\"C4:DD:57:8E:95:E0\",\"C4:DD:57:8E:8E:3C\",\"C4:DD:57:8E:8D:7C\",\"C4:DD:57:8E:95:F4\",\"C4:DD:57:8E:8D:E8\",\"C4:DD:57:8E:8D:68\",\"C4:DD:57:8E:8E:2C\",\"C4:DD:57:8E:90:40\",\"C4:DD:57:8E:91:58\",\"C4:DD:57:8E:8E:40\",\"C4:DD:57:8E:90:14\",\"C4:DD:57:8E:8D:38\",\"C4:DD:57:8E:95:D4\",\"C4:DD:57:8E:90:EC\",\"C4:DD:57:8E:8D:B4\",\"C4:DD:57:8E:8C:F0\",\"C4:DD:57:8E:8E:08\",\"C4:DD:57:8E:95:64\",\"C4:DD:57:8E:8C:D8\",\"C4:DD:57:8E:90:F8\",\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:95:D8\",\"C4:DD:57:8E:90:24\",\"08:3A:F2:37:43:0C\",\"08:3A:F2:37:34:60\",\"08:3A:F2:37:42:AC\",\"08:3A:F2:37:42:80\",\"C4:5B:BE:8C:8D:04\",\"C4:5B:BE:8C:8D:28\",\"C4:5B:BE:8C:8D:08\",\"08:3A:F2:31:33:48\",\"08:3A:F2:37:34:48\",\"C4:5B:BE:8C:8D:4C\"]","payloadType":"json","x":830,"y":2940,"wires":[["ffe85d44.18deb"]]},{"id":"a77664b7.e08318","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 21","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:91:4C\",\"C4:DD:57:8E:90:E4\"]","payloadType":"json","x":790,"y":2460,"wires":[[]]},{"id":"62080420.c7b9bc","type":"inject","z":"9f2f3e0.64ecbc","name":"RIo 20","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:8C:B8\",\"C4:DD:57:8E:8C:F0\",\"C4:DD:57:8E:90:58\"]","payloadType":"json","x":790,"y":2420,"wires":[[]]},{"id":"5d9111bb.9d458","type":"inject","z":"9f2f3e0.64ecbc","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":670,"y":520,"wires":[["8c48c5ca.a544b8"]]},{"id":"e951828e.24fe","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"topic","pt":"msg","from":"rio/people/brisbane/tof/","fromt":"str","to":"","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"/people/count","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":160,"y":500,"wires":[[]]},{"id":"9a74cea2.450af","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"1","vt":"num","v2":"6","v2t":"num"},{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":810,"y":2720,"wires":[[],[],["3b82190.22845e8"]]},{"id":"4e5e9ec6.ad9bc","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":950,"y":260,"wires":[]},{"id":"344bf938.531f16","type":"inject","z":"9f2f3e0.64ecbc","name":"Rio","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:90:74\",\"C4:DD:57:8E:90:BC\",\"C4:DD:57:8E:95:6C\",\"C4:DD:57:8E:8E:0C\",\"C4:DD:57:8E:8C:48\",\"C4:DD:57:8E:90:B0\",\"C4:DD:57:8E:8D:E0\",\"C4:DD:57:8E:90:E4\",\"C4:DD:57:8E:8E:6C\",\"C4:DD:57:8E:8C:FC\",\"C4:DD:57:8E:90:DC\",\"C4:DD:57:8E:8E:7C\",\"C4:DD:57:8E:95:B0\",\"C4:DD:57:8E:8D:D0\",\"C4:DD:57:8E:90:94\",\"C4:DD:57:8E:95:AC\",\"C4:DD:57:8E:8D:A4\",\"C4:DD:57:8E:8D:30\",\"C4:DD:57:8E:8D:44\",\"C4:DD:57:8E:95:DC\",\"C4:DD:57:8E:90:6C\",\"C4:DD:57:8E:8D:6C\",\"C4:DD:57:8E:8E:58\",\"C4:DD:57:8E:8E:54\",\"C4:DD:57:8E:8E:B8\",\"C4:DD:57:8E:8E:18\",\"C4:DD:57:8E:90:78\",\"C4:DD:57:8E:91:00\",\"C4:DD:57:8E:8E:48\",\"C4:DD:57:8E:8C:44\",\"C4:DD:57:8E:8D:10\",\"C4:DD:57:8E:8C:B8\",\"C4:DD:57:8E:95:58\",\"C4:DD:57:8E:8D:C4\",\"C4:DD:57:8E:90:A0\",\"C4:DD:57:8E:90:64\",\"C4:DD:57:8E:90:58\",\"C4:DD:57:8E:90:54\",\"C4:DD:57:8E:90:F0\",\"C4:DD:57:8E:8D:E4\",\"C4:DD:57:8E:90:98\",\"C4:DD:57:8E:90:70\",\"C4:DD:57:8E:95:7C\",\"C4:DD:57:8E:90:C8\",\"C4:DD:57:8E:8E:8C\",\"C4:DD:57:8E:8D:84\",\"C4:DD:57:8E:90:48\",\"C4:DD:57:8E:8E:44\",\"C4:DD:57:8E:95:E0\",\"C4:DD:57:8E:8E:3C\",\"C4:DD:57:8E:8D:7C\",\"C4:DD:57:8E:95:F4\",\"C4:DD:57:8E:8D:E8\",\"C4:DD:57:8E:8D:68\",\"C4:DD:57:8E:8E:2C\",\"C4:DD:57:8E:90:40\",\"C4:DD:57:8E:91:58\",\"C4:DD:57:8E:8E:40\",\"C4:DD:57:8E:90:14\",\"C4:DD:57:8E:8D:38\",\"C4:DD:57:8E:95:D4\",\"C4:DD:57:8E:90:EC\",\"C4:DD:57:8E:8D:B4\",\"C4:DD:57:8E:8C:F0\",\"C4:DD:57:8E:8E:08\",\"C4:DD:57:8E:95:64\",\"C4:DD:57:8E:8C:D8\",\"C4:DD:57:8E:90:F8\",\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:95:D8\",\"C4:DD:57:8E:90:24\",\"C4:DD:57:8E:8D:E4\",\"C4:DD:57:8E:90:78\",\"C4:DD:57:8E:90:C8\",\"C4:DD:57:8E:8E:6C\",\"08:3A:F2:37:42:AC\",\"08:3A:F2:37:43:0C\",\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:91:4C\",\"C4:DD:57:8E:8D:44\"]","payloadType":"json","x":830,"y":2780,"wires":[["16530016.9cdad"]]},{"id":"16530016.9cdad","type":"split","z":"9f2f3e0.64ecbc","name":"People=1","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1240,"y":2800,"wires":[["8ffdecb0.63768"]]},{"id":"8ffdecb0.63768","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":2800,"wires":[["c035a2b3.75d05"]]},{"id":"c035a2b3.75d05","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/people/count\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1650,"y":2800,"wires":[["cb52c7e8.d70838"]]},{"id":"cb52c7e8.d70838","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"0,889797\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2000,"y":2800,"wires":[["30035773.416e68"]]},{"id":"ba08ac4d.dbee6","type":"inject","z":"9f2f3e0.64ecbc","name":"Rio","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:90:74\",\"C4:DD:57:8E:90:BC\",\"C4:DD:57:8E:95:6C\",\"C4:DD:57:8E:8E:0C\",\"C4:DD:57:8E:8C:48\",\"C4:DD:57:8E:90:B0\",\"C4:DD:57:8E:8D:E0\",\"C4:DD:57:8E:90:E4\",\"C4:DD:57:8E:8E:6C\",\"C4:DD:57:8E:8C:FC\",\"C4:DD:57:8E:90:DC\",\"C4:DD:57:8E:8E:7C\",\"C4:DD:57:8E:95:B0\",\"C4:DD:57:8E:8D:D0\",\"C4:DD:57:8E:90:94\",\"C4:DD:57:8E:95:AC\",\"C4:DD:57:8E:8D:A4\",\"C4:DD:57:8E:8D:30\",\"C4:DD:57:8E:8D:44\",\"C4:DD:57:8E:95:DC\",\"C4:DD:57:8E:90:6C\",\"C4:DD:57:8E:8D:6C\",\"C4:DD:57:8E:8E:58\",\"C4:DD:57:8E:8E:54\",\"C4:DD:57:8E:8E:B8\",\"C4:DD:57:8E:8E:18\",\"C4:DD:57:8E:90:78\",\"C4:DD:57:8E:91:00\",\"C4:DD:57:8E:8E:48\",\"C4:DD:57:8E:8C:44\",\"C4:DD:57:8E:8D:10\",\"C4:DD:57:8E:8C:B8\",\"C4:DD:57:8E:95:58\",\"C4:DD:57:8E:8D:C4\",\"C4:DD:57:8E:90:A0\",\"C4:DD:57:8E:90:64\",\"C4:DD:57:8E:90:58\",\"C4:DD:57:8E:90:54\",\"C4:DD:57:8E:90:F0\",\"C4:DD:57:8E:8D:E4\",\"C4:DD:57:8E:90:98\",\"C4:DD:57:8E:90:70\",\"C4:DD:57:8E:95:7C\",\"C4:DD:57:8E:90:C8\",\"C4:DD:57:8E:8E:8C\",\"C4:DD:57:8E:8D:84\",\"C4:DD:57:8E:90:48\",\"C4:DD:57:8E:8E:44\",\"C4:DD:57:8E:95:E0\",\"C4:DD:57:8E:8E:3C\",\"C4:DD:57:8E:8D:7C\",\"C4:DD:57:8E:95:F4\",\"C4:DD:57:8E:8D:E8\",\"C4:DD:57:8E:8D:68\",\"C4:DD:57:8E:8E:2C\",\"C4:DD:57:8E:90:40\",\"C4:DD:57:8E:91:58\",\"C4:DD:57:8E:8E:40\",\"C4:DD:57:8E:90:14\",\"C4:DD:57:8E:8D:38\",\"C4:DD:57:8E:95:D4\",\"C4:DD:57:8E:90:EC\",\"C4:DD:57:8E:8D:B4\",\"C4:DD:57:8E:8C:F0\",\"C4:DD:57:8E:8E:08\",\"C4:DD:57:8E:95:64\",\"C4:DD:57:8E:8C:D8\",\"C4:DD:57:8E:90:F8\",\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:95:D8\",\"C4:DD:57:8E:90:24\"]","payloadType":"json","x":830,"y":2820,"wires":[["3b82190.22845e8"]]},{"id":"59888c01.ed5c44","type":"inject","z":"fa40001c.4d62c","name":"7F6281","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"7F6281\",\"lastUpdated\":\"timess\",\"status\":\"01\"}","payloadType":"json","x":830,"y":40,"wires":[["56d4cd93.e1dae4"]]},{"id":"9dcb5c5e.522cf","type":"inject","z":"fa40001c.4d62c","name":"8038A7","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"8038A7\",\"lastUpdated\":\"timess\",\"status\":\"01\"}","payloadType":"json","x":830,"y":80,"wires":[["56d4cd93.e1dae4"]]},{"id":"7d8f6f2e.c2763","type":"inject","z":"fa40001c.4d62c","name":"80F936","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"80F936\",\"lastUpdated\":\"timess\",\"status\":\"01\"}","payloadType":"json","x":830,"y":120,"wires":[["56d4cd93.e1dae4"]]},{"id":"1482c3ea.787e7c","type":"inject","z":"fa40001c.4d62c","name":"803279","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"803279\",\"lastUpdated\":\"timess\",\"status\":\"01\"}","payloadType":"json","x":830,"y":160,"wires":[["56d4cd93.e1dae4"]]},{"id":"656101bb.6051","type":"inject","z":"fa40001c.4d62c","name":"7F6281","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"7F6281\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":690,"y":80,"wires":[["56d4cd93.e1dae4"]]},{"id":"396b29b7.d73406","type":"inject","z":"fa40001c.4d62c","name":"8038A7","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"8038A7\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":690,"y":120,"wires":[["56d4cd93.e1dae4"]]},{"id":"59aeb40b.efb55c","type":"inject","z":"fa40001c.4d62c","name":"80F936","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"80F936\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":690,"y":160,"wires":[["56d4cd93.e1dae4"]]},{"id":"119fb4e3.a2929b","type":"inject","z":"fa40001c.4d62c","name":"803279","props":[{"p":"payload"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"sensorId\":\"803279\",\"lastUpdated\":\"timess\",\"status\":\"00\"}","payloadType":"json","x":690,"y":200,"wires":[["56d4cd93.e1dae4"]]},{"id":"f10ee249.50607","type":"inject","z":"fa40001c.4d62c","name":"","props":[{"p":"mac","v":"mark2","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":2110,"y":720,"wires":[["27b2f3c0.8b4a4c"]]},{"id":"27b2f3c0.8b4a4c","type":"timestamp","z":"fa40001c.4d62c","name":"","x":2270,"y":720,"wires":[["1c730596.828b5a"]]},{"id":"1c730596.828b5a","type":"template","z":"fa40001c.4d62c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"dnb\",\"floorNumber\":0,\"sensorId\":\"{{mac}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"str","x":2470,"y":720,"wires":[["2b801a90.db0fc6"]]},{"id":"36143266.a21abe","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3420,"y":720,"wires":[]},{"id":"f019b216.1e44f","type":"delay","z":"9f2f3e0.64ecbc","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"5","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":950,"y":200,"wires":[["18156920.0bb907","4e5e9ec6.ad9bc"]]},{"id":"35c1b70e.678718","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":410,"y":320,"wires":[["aec529a7.b816b8"]]},{"id":"aec529a7.b816b8","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":600,"y":320,"wires":[["2acebf64.6a0a"]]},{"id":"2acebf64.6a0a","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"2","arraySpltType":"len","stream":false,"addname":"","x":770,"y":320,"wires":[["b3ee69d8.a022f8"]]},{"id":"a95e705b.01eab","type":"function","z":"67acb05d.f4a47","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":770,"y":280,"wires":[["d9952939.e92408"]]},{"id":"f69a3eea.1ec62","type":"change","z":"67acb05d.f4a47","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":280,"wires":[["a95e705b.01eab"]]},{"id":"b3ee69d8.a022f8","type":"function","z":"67acb05d.f4a47","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload[0]._time)\nlet timestamp = new Date(msg.payload[0]._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nmsg.paytime3 = (\"original timestamp is \" + msg.payload[1]._time)\nlet timestamp1 = new Date(msg.payload[1]._time)\nmsg.paytime1 = (timestamp1.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":420,"y":280,"wires":[["f69a3eea.1ec62"]]},{"id":"d9952939.e92408","type":"function","z":"67acb05d.f4a47","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nmsg.timediff = msg.paytime0 - msg.paytime1;\nmsg.timed1 = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":500,"y":380,"wires":[["50fe7e75.b918b"]]},{"id":"50fe7e75.b918b","type":"change","z":"67acb05d.f4a47","name":"","rules":[{"t":"change","p":"payload[1]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":380,"wires":[["b65cf07e.b96a3"]]},{"id":"b65cf07e.b96a3","type":"change","z":"67acb05d.f4a47","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":380,"wires":[["ad21d697.5935e8"]]},{"id":"ad21d697.5935e8","type":"switch","z":"67acb05d.f4a47","name":"","property":"payload[0]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1090,"y":380,"wires":[[],["631186f1.764988"],[]]},{"id":"631186f1.764988","type":"switch","z":"67acb05d.f4a47","name":"","property":"payload[1]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1210,"y":380,"wires":[[],["2f4714b.5d847ec"],["c4d59816.068948"]]},{"id":"c4d59816.068948","type":"switch","z":"67acb05d.f4a47","name":"false trigger 1500","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"1500","v2t":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1310,"y":300,"wires":[["2f4714b.5d847ec"],["8858849d.69c518"]]},{"id":"2f4714b.5d847ec","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1530,"y":240,"wires":[["8af6ced0.976bb"]]},{"id":"8858849d.69c518","type":"switch","z":"67acb05d.f4a47","name":"standby 8hour 1501-28800","property":"timed1","propertyType":"msg","rules":[{"t":"btwn","v":"1501","vt":"num","v2":"28800","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1440,"y":360,"wires":[["9e2f7a29.696598"],[]]},{"id":"9e2f7a29.696598","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1550,"y":480,"wires":[["814366ef.790c38"]]},{"id":"7cc8f4d6.0139fc","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":600,"wires":[["47e16699.61b548"]]},{"id":"8af6ced0.976bb","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1720,"y":440,"wires":[["a240eeca.22db"]]},{"id":"814366ef.790c38","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1720,"y":480,"wires":[["2c554b94.bd0d24"]]},{"id":"47e16699.61b548","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":600,"wires":[["114611f.01f21ee"]]},{"id":"a240eeca.22db","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1910,"y":440,"wires":[[]]},{"id":"2c554b94.bd0d24","type":"template","z":"67acb05d.f4a47","name":"AWAY","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"away\"}","output":"json","x":1890,"y":480,"wires":[[]]},{"id":"114611f.01f21ee","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":600,"wires":[["3d85ade4.8dd232"]]},{"id":"565877ca.3c3498","type":"http request","z":"67acb05d.f4a47","name":"MAPIQ ENDPOINT password wuy6cEC1AlROIDtAFC1h username switchfi","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://riotinto.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":false,"proxy":"","authType":"basic","x":1310,"y":1720,"wires":[["b0f272aa.ae0ad"]]},{"id":"b0f272aa.ae0ad","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2370,"y":680,"wires":[]},{"id":"39cc43e4.dc365c","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":600,"wires":[["3abc20ef.3e9c6"]]},{"id":"3abc20ef.3e9c6","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":600,"wires":[["47c3e48a.1f487c"]]},{"id":"47c3e48a.1f487c","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":600,"wires":[["dd3e542b.78bef8"]]},{"id":"66ef1ed6.4b555","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":600,"wires":[["39cc43e4.dc365c"]]},{"id":"dd3e542b.78bef8","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"10","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":600,"wires":[["7cc8f4d6.0139fc"]]},{"id":"3d85ade4.8dd232","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":600,"wires":[]},{"id":"eb786b89.db9e58","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1610,"y":540,"wires":[["483925f0.5100cc"]]},{"id":"483925f0.5100cc","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1780,"y":540,"wires":[["422dd9c3.975e48"]]},{"id":"422dd9c3.975e48","type":"template","z":"67acb05d.f4a47","name":"AWAY","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"away\"}","output":"json","x":1950,"y":540,"wires":[[]]},{"id":"aec24cc7.1d0ba","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":640,"wires":[["1a183741.17b229"]]},{"id":"61985a82.3e8f24","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":640,"wires":[["aec24cc7.1d0ba"]]},{"id":"46977314.536e4c","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":640,"wires":[["61985a82.3e8f24"]]},{"id":"55ec445.9e9dbbc","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":640,"wires":[["5af41e33.201ce"]]},{"id":"5af41e33.201ce","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":640,"wires":[["a5db6df5.3d551"]]},{"id":"a5db6df5.3d551","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":640,"wires":[["18577b99.894f54"]]},{"id":"71dcaf1e.756a1","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":640,"wires":[["55ec445.9e9dbbc"]]},{"id":"18577b99.894f54","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"20","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":640,"wires":[["46977314.536e4c"]]},{"id":"1a183741.17b229","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":640,"wires":[]},{"id":"3ce2ed2.7809d12","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":680,"wires":[["74360dc1.74bb04"]]},{"id":"74360dc1.74bb04","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":680,"wires":[["855731e5.d8faf"]]},{"id":"855731e5.d8faf","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":680,"wires":[["9be04ca2.2765f"]]},{"id":"f27a5e06.43bb","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":680,"wires":[["4ba73e79.c92d2"]]},{"id":"4ba73e79.c92d2","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":680,"wires":[["34548b1b.df1aa4"]]},{"id":"34548b1b.df1aa4","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":680,"wires":[["40d5a9ff.69e828"]]},{"id":"8bd423e8.c37ed","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":680,"wires":[["f27a5e06.43bb"]]},{"id":"40d5a9ff.69e828","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"30","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":680,"wires":[["3ce2ed2.7809d12"]]},{"id":"9be04ca2.2765f","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":680,"wires":[]},{"id":"ee7e446a.a91ac8","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":720,"wires":[["d740f9f1.f65e28"]]},{"id":"1875ae9.314a451","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":720,"wires":[["ee7e446a.a91ac8"]]},{"id":"1f5739e2.3d49f6","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":720,"wires":[["1875ae9.314a451"]]},{"id":"4654eab1.c2b8b4","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":720,"wires":[["31b604d2.3a401c"]]},{"id":"31b604d2.3a401c","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":720,"wires":[["bb980f99.3a1bf"]]},{"id":"bb980f99.3a1bf","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":720,"wires":[["292a64b2.3a183c"]]},{"id":"ca03f280.9175f","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":720,"wires":[["4654eab1.c2b8b4"]]},{"id":"292a64b2.3a183c","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"40","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":720,"wires":[["1f5739e2.3d49f6"]]},{"id":"d740f9f1.f65e28","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":720,"wires":[]},{"id":"f455a4c6.0a0908","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":760,"wires":[["3852b837.5796a8"]]},{"id":"3852b837.5796a8","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":760,"wires":[["1ebac9a6.5cabe6"]]},{"id":"1ebac9a6.5cabe6","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":760,"wires":[["dab57006.8477b"]]},{"id":"36b5c421.8497bc","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":760,"wires":[["9c7e5769.461f68"]]},{"id":"9c7e5769.461f68","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":760,"wires":[["9e56e669.9be9d8"]]},{"id":"9e56e669.9be9d8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":760,"wires":[["a4ca848f.f37078"]]},{"id":"7d500eff.742d8","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":760,"wires":[["36b5c421.8497bc"]]},{"id":"a4ca848f.f37078","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"50","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":760,"wires":[["f455a4c6.0a0908"]]},{"id":"dab57006.8477b","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":760,"wires":[]},{"id":"24328eb5.7657d2","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":800,"wires":[["4baca195.b9666"]]},{"id":"3b44bd8c.4b3422","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":800,"wires":[["24328eb5.7657d2"]]},{"id":"7b19f0c9.647e9","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":800,"wires":[["3b44bd8c.4b3422"]]},{"id":"88a17f92.6f844","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":800,"wires":[["e7e5ae28.d2cb6"]]},{"id":"e7e5ae28.d2cb6","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":800,"wires":[["f3395139.0834e"]]},{"id":"f3395139.0834e","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":800,"wires":[["b35c08e4.7b5668"]]},{"id":"3272604e.2ab7b","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":800,"wires":[["88a17f92.6f844"]]},{"id":"b35c08e4.7b5668","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"60","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":800,"wires":[["7b19f0c9.647e9"]]},{"id":"4baca195.b9666","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":800,"wires":[]},{"id":"46b1977d.3bd328","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":840,"wires":[["67bb54d5.e50dec"]]},{"id":"67bb54d5.e50dec","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":840,"wires":[["3db1123a.39d0fe"]]},{"id":"3db1123a.39d0fe","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":840,"wires":[["bb94b3ab.bf95b"]]},{"id":"91131596.a1e9c8","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":840,"wires":[["e3c87a9e.f08e08"]]},{"id":"e3c87a9e.f08e08","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":840,"wires":[["d84c1b55.564df8"]]},{"id":"d84c1b55.564df8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":840,"wires":[["23d8c76d.a6a768"]]},{"id":"4df1d6ed.9d63c8","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":840,"wires":[["91131596.a1e9c8"]]},{"id":"23d8c76d.a6a768","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"70","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":840,"wires":[["46b1977d.3bd328"]]},{"id":"bb94b3ab.bf95b","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":840,"wires":[]},{"id":"bb844847.d55cc8","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":880,"wires":[["6986c70.a5d9438"]]},{"id":"f04625e0.bd7628","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":880,"wires":[["bb844847.d55cc8"]]},{"id":"38d0bce6.ed1874","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":880,"wires":[["f04625e0.bd7628"]]},{"id":"84355099.c3266","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":880,"wires":[["96a0ca54.f45028"]]},{"id":"96a0ca54.f45028","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":880,"wires":[["e25ef7e1.b46988"]]},{"id":"e25ef7e1.b46988","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":880,"wires":[["8e61f5a6.92c888"]]},{"id":"bf2fb997.e44d08","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":880,"wires":[["84355099.c3266"]]},{"id":"8e61f5a6.92c888","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"80","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":880,"wires":[["38d0bce6.ed1874"]]},{"id":"6986c70.a5d9438","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":880,"wires":[]},{"id":"c22b1095.e36f3","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":920,"wires":[["181dadba.4548a2"]]},{"id":"181dadba.4548a2","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":920,"wires":[["2e0197e9.408e18"]]},{"id":"2e0197e9.408e18","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":920,"wires":[["4153bc84.84d364"]]},{"id":"f7bb273.bfaa8d8","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":920,"wires":[["67145e8d.75c2f"]]},{"id":"67145e8d.75c2f","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":920,"wires":[["a8841f82.2f0a8"]]},{"id":"a8841f82.2f0a8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":920,"wires":[["db2e5d50.8de42"]]},{"id":"db9ef228.420a9","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":920,"wires":[["f7bb273.bfaa8d8"]]},{"id":"db2e5d50.8de42","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"90","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":920,"wires":[["c22b1095.e36f3"]]},{"id":"4153bc84.84d364","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":920,"wires":[]},{"id":"e2e3bef1.59405","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":960,"wires":[["8bf16644.c9e088"]]},{"id":"46d0150.b638aec","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":960,"wires":[["e2e3bef1.59405"]]},{"id":"f99f123e.2a1e7","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":960,"wires":[["46d0150.b638aec"]]},{"id":"d1f06e58.32176","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":960,"wires":[["d6e0a1fd.48b29"]]},{"id":"d6e0a1fd.48b29","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":960,"wires":[["370bd460.ff251c"]]},{"id":"370bd460.ff251c","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":960,"wires":[["e1ba2d3d.bea92"]]},{"id":"4861f753.cd8268","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":960,"wires":[["d1f06e58.32176"]]},{"id":"e1ba2d3d.bea92","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"100","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":960,"wires":[["f99f123e.2a1e7"]]},{"id":"8bf16644.c9e088","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":960,"wires":[]},{"id":"c982edfb.aa4ef","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1000,"wires":[["f208b544.56a1a8"]]},{"id":"f208b544.56a1a8","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1000,"wires":[["fc707f8f.f8051"]]},{"id":"fc707f8f.f8051","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1000,"wires":[["ba53a9dd.de6ae8"]]},{"id":"f45b9ff4.5248d","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1000,"wires":[["cef0eb8d.e72ec8"]]},{"id":"cef0eb8d.e72ec8","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1000,"wires":[["3bdae73.29d1218"]]},{"id":"3bdae73.29d1218","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1000,"wires":[["b73294ae.8cd2c8"]]},{"id":"e3ad485d.dd28b8","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1000,"wires":[["f45b9ff4.5248d"]]},{"id":"b73294ae.8cd2c8","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"110","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1000,"wires":[["c982edfb.aa4ef"]]},{"id":"ba53a9dd.de6ae8","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1000,"wires":[]},{"id":"2277e85f.0b2f78","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1040,"wires":[["1cb7cf28.58de31"]]},{"id":"8b7dda27.283198","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1040,"wires":[["2277e85f.0b2f78"]]},{"id":"8ca8ae4b.b8e87","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1040,"wires":[["8b7dda27.283198"]]},{"id":"287f1460.2c48dc","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1040,"wires":[["d308bcef.eba07"]]},{"id":"d308bcef.eba07","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1040,"wires":[["e28d3a34.1350d8"]]},{"id":"e28d3a34.1350d8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1040,"wires":[["178c8db.ff26c72"]]},{"id":"8e758b80.51b528","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1040,"wires":[["287f1460.2c48dc"]]},{"id":"178c8db.ff26c72","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"120","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1040,"wires":[["8ca8ae4b.b8e87"]]},{"id":"1cb7cf28.58de31","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1040,"wires":[]},{"id":"9c99b303.10da8","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1080,"wires":[["8b783e17.208bc"]]},{"id":"8b783e17.208bc","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1080,"wires":[["5898089f.9a84a8"]]},{"id":"5898089f.9a84a8","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1080,"wires":[["f93997ab.d4caa8"]]},{"id":"a2049b4.760d668","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1080,"wires":[["cb186533.750218"]]},{"id":"cb186533.750218","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1080,"wires":[["8fb7909d.9001d"]]},{"id":"8fb7909d.9001d","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1080,"wires":[["3e614147.945a9e"]]},{"id":"12bfc2ad.0d6b1d","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1080,"wires":[["a2049b4.760d668"]]},{"id":"3e614147.945a9e","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"130","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1080,"wires":[["9c99b303.10da8"]]},{"id":"f93997ab.d4caa8","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1080,"wires":[]},{"id":"83d879f.c228388","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1120,"wires":[["80d909b3.f7d168"]]},{"id":"158a05ca.0750ea","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1120,"wires":[["83d879f.c228388"]]},{"id":"e520f1f1.49da","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1120,"wires":[["158a05ca.0750ea"]]},{"id":"401f1762.2b1748","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1120,"wires":[["9603759.b5a6488"]]},{"id":"9603759.b5a6488","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1120,"wires":[["c6043b1f.307af8"]]},{"id":"c6043b1f.307af8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1120,"wires":[["144d913f.adcfaf"]]},{"id":"4d28e105.4beca","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1120,"wires":[["401f1762.2b1748"]]},{"id":"144d913f.adcfaf","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"140","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1120,"wires":[["e520f1f1.49da"]]},{"id":"80d909b3.f7d168","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1120,"wires":[]},{"id":"4f7a51b8.8d8c5","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1160,"wires":[["dc64d227.b376f"]]},{"id":"dc64d227.b376f","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1160,"wires":[["f80734d6.3bf6b8"]]},{"id":"f80734d6.3bf6b8","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1160,"wires":[["9e2275d8.fe0768"]]},{"id":"516abeea.c1296","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1160,"wires":[["af339a0d.0d5588"]]},{"id":"af339a0d.0d5588","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1160,"wires":[["d4aade56.12608"]]},{"id":"d4aade56.12608","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1160,"wires":[["b671134d.d6ab"]]},{"id":"c41d4b7f.444868","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1160,"wires":[["516abeea.c1296"]]},{"id":"b671134d.d6ab","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"150","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1160,"wires":[["4f7a51b8.8d8c5"]]},{"id":"9e2275d8.fe0768","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1160,"wires":[]},{"id":"22594014.f20bd","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1200,"wires":[["df530125.e1171"]]},{"id":"4bd35bf0.048cc4","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1200,"wires":[["22594014.f20bd"]]},{"id":"99238de1.ba22","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1200,"wires":[["4bd35bf0.048cc4"]]},{"id":"cbe58832.5e8938","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1200,"wires":[["158ba88f.857c67"]]},{"id":"158ba88f.857c67","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1200,"wires":[["f86d2a4c.0e5e58"]]},{"id":"f86d2a4c.0e5e58","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1200,"wires":[["7973905c.35033"]]},{"id":"5636f378.49d7fc","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1200,"wires":[["cbe58832.5e8938"]]},{"id":"7973905c.35033","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"160","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1200,"wires":[["99238de1.ba22"]]},{"id":"df530125.e1171","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1200,"wires":[]},{"id":"9596ba67.d759b8","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1240,"wires":[["d5ab853f.068ae8"]]},{"id":"d5ab853f.068ae8","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1240,"wires":[["62ff5046.219f1"]]},{"id":"62ff5046.219f1","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1240,"wires":[["5d0232b8.62359c"]]},{"id":"e5da42a5.37be9","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1240,"wires":[["cd870895.772ca8"]]},{"id":"cd870895.772ca8","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1240,"wires":[["dc6221e8.a29d6"]]},{"id":"dc6221e8.a29d6","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1240,"wires":[["ce5007b5.b0b348"]]},{"id":"c88dadb3.088a6","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1240,"wires":[["e5da42a5.37be9"]]},{"id":"ce5007b5.b0b348","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"170","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1240,"wires":[["9596ba67.d759b8"]]},{"id":"5d0232b8.62359c","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1240,"wires":[]},{"id":"521a8f83.3fcbe","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1280,"wires":[["a82ea506.895dc8"]]},{"id":"76d0e8f4.19d3c8","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1280,"wires":[["521a8f83.3fcbe"]]},{"id":"aeee4b14.998de8","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1280,"wires":[["76d0e8f4.19d3c8"]]},{"id":"c1bd5e33.45666","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1280,"wires":[["fbf30929.446418"]]},{"id":"fbf30929.446418","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1280,"wires":[["e13a91b7.087cd"]]},{"id":"e13a91b7.087cd","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1280,"wires":[["bff03194.59cb9"]]},{"id":"94c6471c.8adf68","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1280,"wires":[["c1bd5e33.45666"]]},{"id":"bff03194.59cb9","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"180","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1280,"wires":[["aeee4b14.998de8"]]},{"id":"a82ea506.895dc8","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1280,"wires":[]},{"id":"8881764a.e00108","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1320,"wires":[["d71cfd03.86707"]]},{"id":"d71cfd03.86707","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1320,"wires":[["6f329061.ef371"]]},{"id":"6f329061.ef371","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1320,"wires":[["a5212892.149938"]]},{"id":"e436cab8.4dc0d8","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1320,"wires":[["5ece51ac.35cf4"]]},{"id":"5ece51ac.35cf4","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1320,"wires":[["1d4ca750.4b75b9"]]},{"id":"1d4ca750.4b75b9","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1320,"wires":[["ec0567e1.764f78"]]},{"id":"1f8e485.f26e5b8","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1320,"wires":[["e436cab8.4dc0d8"]]},{"id":"ec0567e1.764f78","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"190","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1320,"wires":[["8881764a.e00108"]]},{"id":"a5212892.149938","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1320,"wires":[]},{"id":"f19dcb71.81a3a8","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1360,"wires":[["c2e1cc2c.72e1b"]]},{"id":"be66edd5.f5e1b","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1360,"wires":[["f19dcb71.81a3a8"]]},{"id":"84da4596.bdaf78","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1360,"wires":[["be66edd5.f5e1b"]]},{"id":"353cd21f.cb916e","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1360,"wires":[["2779eb2e.16cec4"]]},{"id":"2779eb2e.16cec4","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1360,"wires":[["3fd3c85b.ee1cb8"]]},{"id":"3fd3c85b.ee1cb8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1360,"wires":[["dd50b16e.e0a6d"]]},{"id":"997bc104.0a609","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1360,"wires":[["353cd21f.cb916e"]]},{"id":"dd50b16e.e0a6d","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"200","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1360,"wires":[["84da4596.bdaf78"]]},{"id":"c2e1cc2c.72e1b","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1360,"wires":[]},{"id":"db9ffb88.817248","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1400,"wires":[["f56927d8.38d0b8"]]},{"id":"f56927d8.38d0b8","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1400,"wires":[["fa7b3fa9.216e3"]]},{"id":"fa7b3fa9.216e3","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1400,"wires":[["2854771b.2d35d8"]]},{"id":"e73ba1d0.6c408","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1400,"wires":[["3d335641.aa59ea"]]},{"id":"3d335641.aa59ea","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1400,"wires":[["de1e6e08.4fcab"]]},{"id":"de1e6e08.4fcab","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1400,"wires":[["76dc2cf7.4a34b4"]]},{"id":"d3a2cc61.4b684","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1400,"wires":[["e73ba1d0.6c408"]]},{"id":"76dc2cf7.4a34b4","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"210","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1400,"wires":[["db9ffb88.817248"]]},{"id":"2854771b.2d35d8","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1400,"wires":[]},{"id":"841c5fb5.a439c","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1440,"wires":[["cbe8b804.885608"]]},{"id":"56f0f1f6.1a2dc","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1440,"wires":[["841c5fb5.a439c"]]},{"id":"8f7b5b5.2ded6a8","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1440,"wires":[["56f0f1f6.1a2dc"]]},{"id":"5897700d.c79f2","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1440,"wires":[["9a87cd96.33b84"]]},{"id":"9a87cd96.33b84","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1440,"wires":[["27d533cc.6409bc"]]},{"id":"27d533cc.6409bc","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1440,"wires":[["50ddf5dc.de803c"]]},{"id":"991f3649.020e28","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1440,"wires":[["5897700d.c79f2"]]},{"id":"50ddf5dc.de803c","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"220","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1440,"wires":[["8f7b5b5.2ded6a8"]]},{"id":"cbe8b804.885608","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1440,"wires":[]},{"id":"1fb6fb09.e83ff5","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1480,"wires":[["4d069b33.645d84"]]},{"id":"4d069b33.645d84","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1480,"wires":[["f48d8f4c.86fee"]]},{"id":"f48d8f4c.86fee","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1480,"wires":[["db4b6aeb.712738"]]},{"id":"d20aecd7.313db","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1480,"wires":[["2364340c.a3258c"]]},{"id":"2364340c.a3258c","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1480,"wires":[["b28e1e88.0eefa"]]},{"id":"b28e1e88.0eefa","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1480,"wires":[["4e9e4a39.77c7e4"]]},{"id":"e0734ee3.51e61","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1480,"wires":[["d20aecd7.313db"]]},{"id":"4e9e4a39.77c7e4","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"230","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1480,"wires":[["1fb6fb09.e83ff5"]]},{"id":"db4b6aeb.712738","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1480,"wires":[]},{"id":"e6bfcee6.ee8a","type":"template","z":"67acb05d.f4a47","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1410,"y":1520,"wires":[["91712545.69eb28","565877ca.3c3498"]]},{"id":"a79ead35.2c914","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":1520,"wires":[["e6bfcee6.ee8a"]]},{"id":"c6e33f0f.be158","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1070,"y":1520,"wires":[["a79ead35.2c914"]]},{"id":"838f03c6.61b3e","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":370,"y":1520,"wires":[["4c51b413.2f02dc"]]},{"id":"4c51b413.2f02dc","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1520,"wires":[["78d0a76e.a41dd8"]]},{"id":"78d0a76e.a41dd8","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1520,"wires":[["3f63da98.78bbc6"]]},{"id":"c6f4872.d013578","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1520,"wires":[["838f03c6.61b3e"]]},{"id":"3f63da98.78bbc6","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"2000","nbRateUnits":"5","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":890,"y":1520,"wires":[["c6e33f0f.be158"]]},{"id":"91712545.69eb28","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1590,"y":1520,"wires":[]},{"id":"28cbc815.a99058","type":"timestamp","z":"67acb05d.f4a47","name":"","x":1110,"y":1560,"wires":[["8e32902a.c75c7"]]},{"id":"8e32902a.c75c7","type":"function","z":"67acb05d.f4a47","name":"","func":"msg.payload.sensorId = msg.payload.mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1560,"wires":[["efdbe892.55ebf8"]]},{"id":"efdbe892.55ebf8","type":"template","z":"67acb05d.f4a47","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1410,"y":1560,"wires":[["7f5969f3.77fa68","565877ca.3c3498"]]},{"id":"356ccc6.7bb2934","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":370,"y":1560,"wires":[["a04c6899.e228a8"]]},{"id":"a04c6899.e228a8","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":560,"y":1560,"wires":[["f9a738b5.81f358"]]},{"id":"f9a738b5.81f358","type":"split","z":"67acb05d.f4a47","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":true,"addname":"","x":710,"y":1560,"wires":[["28cbc815.a99058"]]},{"id":"a6f415fe.97de18","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":1560,"wires":[["356ccc6.7bb2934"]]},{"id":"20d696ff.ea51ca","type":"delay","z":"67acb05d.f4a47","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"4000","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":860,"y":1640,"wires":[["28cbc815.a99058"]]},{"id":"7f5969f3.77fa68","type":"debug","z":"67acb05d.f4a47","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1570,"y":1560,"wires":[]},{"id":"4d1a2e14.0d067","type":"influxdb in","z":"67acb05d.f4a47","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":500,"y":480,"wires":[["a4617aa.8178088"]]},{"id":"4843aafe.80b124","type":"template","z":"67acb05d.f4a47","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\") |> range(start:-90d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\")  |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:1, offset: 0)","output":"str","x":310,"y":480,"wires":[["4d1a2e14.0d067"]]},{"id":"96c00d27.9c56d","type":"inject","z":"67acb05d.f4a47","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":140,"y":480,"wires":[["4843aafe.80b124"]]},{"id":"a4617aa.8178088","type":"debug","z":"67acb05d.f4a47","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":760,"y":460,"wires":[]},{"id":"b08cf0f0.a9516","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":250,"y":40,"wires":[]},{"id":"4e261b79.83d204","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":710,"y":160,"wires":[]},{"id":"6386959b.9ee40c","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":590,"y":300,"wires":[]},{"id":"4d197f07.6ab8f","type":"mqtt in","z":"9f2f3e0.64ecbc","name":"","topic":"dnb-1","qos":"2","datatype":"json","broker":"eebe667d.495498","x":720,"y":640,"wires":[["a19f3fbf.25996","85283f32.2a267"]]},{"id":"a19f3fbf.25996","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1010,"y":600,"wires":[]},{"id":"85283f32.2a267","type":"json","z":"9f2f3e0.64ecbc","name":"","property":"payload","action":"","pretty":false,"x":850,"y":680,"wires":[["8c48c5ca.a544b8","a19f3fbf.25996"]]},{"id":"89d9becf.e8192","type":"http request","z":"9f2f3e0.64ecbc","name":"dnb MAPIQ ENDPOINT password 27EVf2zej0u3goJAbnjQ username svc_event_data","method":"GET","ret":"txt","paytoqs":"ignore","url":"https://dnb.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":1600,"y":680,"wires":[["4710cbb3.6670e4"]]},{"id":"8177759e.3ddaf8","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2110,"y":640,"wires":[]},{"id":"59d3b8a3.a11b48","type":"inject","z":"9f2f3e0.64ecbc","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1110,"y":660,"wires":[["89d9becf.e8192"]]},{"id":"4710cbb3.6670e4","type":"json","z":"9f2f3e0.64ecbc","name":"","property":"payload","action":"","pretty":false,"x":1990,"y":660,"wires":[["8177759e.3ddaf8"]]},{"id":"b3d4842a.f0dbc8","type":"switch","z":"9f2f3e0.64ecbc","name":"room 21.0607","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"C4DD578E90F8","vt":"str"},{"t":"eq","v":"C4DD578E8DE0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":460,"y":460,"wires":[["fa78df7c.25e07"],["fa78df7c.25e07"]]},{"id":"8f60163c.de3558","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":460,"wires":[["cb08c7ef.ad8e38"]]},{"id":"cb08c7ef.ad8e38","type":"function","z":"9f2f3e0.64ecbc","name":"21.04","func":"msg.topic =\"ROOM210607\"\nmsg.payload = (msg.payload[0] + msg.payload[1])\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":870,"y":460,"wires":[["560ce1a9.6540a"]]},{"id":"fa78df7c.25e07","type":"function","z":"9f2f3e0.64ecbc","name":"num","func":"msg.payload = Number(msg.payload)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":610,"y":460,"wires":[["8f60163c.de3558"]]},{"id":"53879920.cca288","type":"switch","z":"fa40001c.4d62c","name":"meeting rooms","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"regex","v":"804C07|803247|804E89|80F84D|806F38|8038A7|80F86E|7F71E2|80F936|803279|813888|7F579A|8037BC|8035FB|7F7297|804E40|805200|804E45|80F7C7|8038D6|803979|7F72D1|80F80C|80390D|7F726B|80F8F8|804F43|804E41|803810|804B89|7F5804|7F72B1|80F7D6|80327B|8032B3|7F7063|7F57A9|804DB9|804B1E|7F584D|804AAF|7F61EF|80F762|80339B|803337|8035DB|7F61DD|80F8FB|8081B7|7F71E7|80FF73|7F71F1|7F7245|805F60|804DD5|7FD1B4|804DAC|8032C7|804F6B|804E9B|7F72B7|7F7224|7F706B|7F72FE|80388C|80F7DC|80336E|7F579F|7F71DC|80F9A5|7F71F0|8052F1|7FCA07|804F31|803816|80F82F|806056|805DE9|803471|805EC4|7F5419|80FF59|80F7E1|80E63D","vt":"str","case":false},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":440,"y":680,"wires":[["bfb0a491.ea8948"],["b973387a.0b4ba8"]]},{"id":"8629a849.8359f8","type":"function","z":"fa40001c.4d62c","name":"time difference","func":"msg.timed = msg.timenow - msg.payload[0]._value;\nmsg.timediff = msg.payload[0]._value - msg.payload[1]._value;\nmsg.timed1 = msg.timenow - msg.payload[1]._value;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":800,"y":680,"wires":[["4f10d013.c57c4"]]},{"id":"534a6d13.fb9b04","type":"function","z":"fa40001c.4d62c","name":"time divide","func":"msg.timenow = msg.time/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":790,"y":640,"wires":[["8629a849.8359f8"]]},{"id":"a42faee2.f3d28","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":640,"wires":[["534a6d13.fb9b04"]]},{"id":"bfb0a491.ea8948","type":"delay","z":"fa40001c.4d62c","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":110,"y":640,"wires":[["45321ff3.0f6c9"]]},{"id":"3a8aa31.6bb295c","type":"influxdb in","z":"fa40001c.4d62c","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":460,"y":640,"wires":[["a42faee2.f3d28"]]},{"id":"45321ff3.0f6c9","type":"template","z":"fa40001c.4d62c","name":"get 1 sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-aus\")  |> range(start:-24h, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_sigfox_data\") |> filter(fn: (r) => r[\"site\"] == \"Brisbane\" or r[\"site\"] == \"Perth\")  |> filter(fn: (r) => r[\"_field\"] == \"lastUpdated\" or r[\"_field\"] == \"status1\")|> filter(fn: (r) => r[\"mac\"] == \"{{payload.sensorId}}\") |> sort(columns: [\"_time\"], desc: true)  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":280,"y":640,"wires":[["3a8aa31.6bb295c"]]},{"id":"4f10d013.c57c4","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[2]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":970,"y":620,"wires":[[],["eff461cb.bd61f"],[]]},{"id":"eff461cb.bd61f","type":"switch","z":"fa40001c.4d62c","name":"standby 5min 0-300","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"120","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1320,"y":760,"wires":[["13c0b42b.3c00cc"],["13c0b42b.3c00cc"]]},{"id":"80f72440.a69478","type":"switch","z":"fa40001c.4d62c","name":"false trigger 600","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"600","v2t":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1280,"y":580,"wires":[["d70c3f22.180a"],["eff461cb.bd61f"]]},{"id":"2b43f7b.4bb9d08","type":"function","z":"fa40001c.4d62c","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload[0]._time)\nlet timestamp = new Date(msg.payload[0]._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nmsg.paytime3 = (\"original timestamp is \" + msg.payload[1]._time)\nlet timestamp1 = new Date(msg.payload[1]._time)\nmsg.paytime1 = (timestamp1.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":1380,"wires":[["beecdc30.27cc5"]]},{"id":"beecdc30.27cc5","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1380,"wires":[["d43ed8d0.f88c28"]]},{"id":"d43ed8d0.f88c28","type":"function","z":"fa40001c.4d62c","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":1380,"wires":[["4d2f468d.1a91c8"]]},{"id":"4d2f468d.1a91c8","type":"function","z":"fa40001c.4d62c","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nmsg.timediff = msg.paytime0 - msg.paytime1;\nmsg.timed1 = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":660,"y":1320,"wires":[["ee290af8.5ad308"]]},{"id":"ee290af8.5ad308","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"change","p":"payload[1]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1260,"wires":[["3dd3513e.6cc68e"]]},{"id":"3dd3513e.6cc68e","type":"change","z":"fa40001c.4d62c","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1260,"wires":[["578da709.979cc8"]]},{"id":"578da709.979cc8","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[0]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":970,"y":1400,"wires":[[],["82e8edd1.e974c"],["4097864a.352d28"]]},{"id":"82e8edd1.e974c","type":"switch","z":"fa40001c.4d62c","name":"","property":"payload[1]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1090,"y":1340,"wires":[[],["6adf41cc.cc73"],["2959d408.9416ac"]]},{"id":"a86f94fa.6cf9c8","type":"switch","z":"fa40001c.4d62c","name":"false trigger 600","property":"timediff","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"600","v2t":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1180,"y":1260,"wires":[["6adf41cc.cc73"],["2959d408.9416ac"]]},{"id":"2959d408.9416ac","type":"switch","z":"fa40001c.4d62c","name":"standby 5min 0-300","property":"timed1","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"120","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1320,"y":1460,"wires":[["f54e4b7.139d2b8"],["6adf41cc.cc73"]]},{"id":"12936d28.384723","type":"switch","z":"fa40001c.4d62c","name":"meeting rooms","property":"payload[0].mac","propertyType":"msg","rules":[{"t":"regex","v":"804C07|803247|804E89|80F84D|806F38|8038A7|80F86E|7F71E2|80F936|803279|813888|7F579A|8037BC|8035FB|7F7297|804E40|805200|804E45|80F7C7|8038D6|803979|7F72D1|80F80C|80390D|7F726B|80F8F8|804F43|804E41|803810|804B89|7F5804|7F72B1|80F7D6|80327B|8032B3|7F7063|7F57A9|804DB9|804B1E|7F584D|804AAF|7F61EF|80F762|80339B|803337|8035DB|7F61DD|80F8FB|8081B7|7F71E7|80FF73|7F71F1|7F7245|805F60|804DD5|7FD1B4|804DAC|8032C7|804F6B|804E9B|7F72B7|7F7224|7F706B|7F72FE|80388C|80F7DC|80336E|7F579F|7F71DC|80F9A5|7F71F0|8052F1|7FCA07|804F31|803816|80F82F|806056|805DE9|803471|805EC4|7F5419|80FF59|80F7E1|80E63D","vt":"str","case":true},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":720,"y":1180,"wires":[["2b43f7b.4bb9d08","2e722c2c.429fa4"],["7f0422c.178f6dc"]]},{"id":"2e722c2c.429fa4","type":"debug","z":"fa40001c.4d62c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1000,"y":1180,"wires":[]},{"id":"9d522824.f7bf28","type":"template","z":"9f2f3e0.64ecbc","name":"get 1 sensor live meeting","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"rio-brisbane\")   |> range(start:-30d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Rio_meeting-room_data\")  |> filter(fn: (r) => r[\"_field\"] == \"data\")  |> sort(columns: [\"_time\"], desc: true)   |> limit(n:1, offset: 0)   |> yield(name: \"last\")\n","output":"str","x":1230,"y":1500,"wires":[["c7da6e6b.373fa"]]},{"id":"64320374.37e02c","type":"function","z":"9f2f3e0.64ecbc","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload._time)\nlet timestamp = new Date(msg.payload._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1700,"y":1340,"wires":[["dbcb0aee.ac0708"]]},{"id":"f5098026.dfdf6","type":"function","z":"9f2f3e0.64ecbc","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2020,"y":1400,"wires":[["13937f59.2d8251"]]},{"id":"59813595.02069c","type":"function","z":"9f2f3e0.64ecbc","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2030,"y":1460,"wires":[["f5098026.dfdf6"]]},{"id":"dbcb0aee.ac0708","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1870,"y":1460,"wires":[["59813595.02069c"]]},{"id":"efc9b640.5b9248","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":2670,"y":1420,"wires":[["9365b9f4.9fde98","5e10b911.8c9088"]]},{"id":"c7da6e6b.373fa","type":"influxdb in","z":"9f2f3e0.64ecbc","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":1460,"y":1500,"wires":[["66ca6a2b.7d1574"]]},{"id":"66ca6a2b.7d1574","type":"split","z":"9f2f3e0.64ecbc","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":false,"addname":"","x":1610,"y":1500,"wires":[["e6819b48.223ca8"]]},{"id":"244f8f0b.9b682","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"timed","propertyType":"msg","rules":[{"t":"gt","v":"3600","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2390,"y":1580,"wires":[["6bfc6ed2.427ff"],[]]},{"id":"e6819b48.223ca8","type":"function","z":"9f2f3e0.64ecbc","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload._time)\nlet timestamp = new Date(msg.payload._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1780,"y":1500,"wires":[["ce3b02fc.ea8c9"]]},{"id":"1ab4587.c8b5ea8","type":"function","z":"9f2f3e0.64ecbc","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2100,"y":1580,"wires":[["7408f36a.dc2a1c"]]},{"id":"b1cc7cae.1bd76","type":"function","z":"9f2f3e0.64ecbc","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2110,"y":1640,"wires":[["1ab4587.c8b5ea8"]]},{"id":"ce3b02fc.ea8c9","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1640,"wires":[["b1cc7cae.1bd76"]]},{"id":"a8dbb5ae.b10ca8","type":"join","z":"9f2f3e0.64ecbc","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":2690,"y":1580,"wires":[["b63550eb.123f2","72cd777a.58d6b8"]]},{"id":"d5482767.7bfea8","type":"inject","z":"9f2f3e0.64ecbc","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"05 20 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1010,"y":1500,"wires":[["9d522824.f7bf28"]]},{"id":"19835035.ecea6","type":"join","z":"fd6b1e47.3eff","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1990,"y":380,"wires":[["e37100ae.9cba9","cbff333b.c78e"]]},{"id":"e2070491.5761f8","type":"template","z":"fd6b1e47.3eff","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}","output":"json","x":1790,"y":340,"wires":[["19835035.ecea6"]]},{"id":"e5a0dc3c.6449e","type":"template","z":"fd6b1e47.3eff","name":"AWAY","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"away\"}","output":"json","x":1770,"y":380,"wires":[["19835035.ecea6"]]},{"id":"6ac010db.64d72","type":"template","z":"fd6b1e47.3eff","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}","output":"json","x":1770,"y":420,"wires":[["19835035.ecea6"]]},{"id":"d562e4b4.2f7d08","type":"function","z":"fd6b1e47.3eff","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1600,"y":340,"wires":[["e2070491.5761f8"]]},{"id":"5be1b1c9.2a52d","type":"function","z":"fd6b1e47.3eff","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1600,"y":380,"wires":[["e5a0dc3c.6449e"]]},{"id":"249b5b55.0bf794","type":"function","z":"fd6b1e47.3eff","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1600,"y":420,"wires":[["6ac010db.64d72"]]},{"id":"dfd9a741.670b28","type":"timestamp","z":"fd6b1e47.3eff","name":"","x":1430,"y":380,"wires":[["5be1b1c9.2a52d"]]},{"id":"bd92ee8d.e34b2","type":"timestamp","z":"fd6b1e47.3eff","name":"","x":1430,"y":420,"wires":[["249b5b55.0bf794"]]},{"id":"9dbc4a00.50a628","type":"switch","z":"fd6b1e47.3eff","name":"standby 1hour 0-3600","property":"timed1","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"3600","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":920,"y":380,"wires":[["36d94cc8.72fda4"],[]]},{"id":"560c0d04.33b3a4","type":"timestamp","z":"fd6b1e47.3eff","name":"","x":950,"y":340,"wires":[["23b41227.47b60e"]]},{"id":"cfaed5a7.dc9dd8","type":"switch","z":"fd6b1e47.3eff","name":"","property":"payload[1]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":730,"y":360,"wires":[[],["560c0d04.33b3a4"],["9dbc4a00.50a628"]]},{"id":"f3b0a6d4.30b478","type":"switch","z":"fd6b1e47.3eff","name":"","property":"payload[0]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":590,"y":360,"wires":[[],["cfaed5a7.dc9dd8"],["d91f4bc8.1bc538"]]},{"id":"9ec4bd46.16db4","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":60,"wires":[["f3b0a6d4.30b478"]]},{"id":"f25a5b3e.6a9208","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"payload[1]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":40,"wires":[["9ec4bd46.16db4"]]},{"id":"c24dff5d.e410a","type":"function","z":"fd6b1e47.3eff","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nmsg.timediff = msg.paytime0 - msg.paytime1;\nmsg.timed1 = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":120,"wires":[["f25a5b3e.6a9208"]]},{"id":"4c878cf9.d3d9b4","type":"function","z":"fd6b1e47.3eff","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":650,"y":180,"wires":[["c24dff5d.e410a"]]},{"id":"85a36e17.4d121","type":"split","z":"fd6b1e47.3eff","name":"","splt":"\\n","spltType":"str","arraySplt":"2","arraySpltType":"len","stream":false,"addname":"","x":370,"y":100,"wires":[["ddb82248.939b6"]]},{"id":"affd56ce.03a3c8","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":180,"wires":[["4c878cf9.d3d9b4"]]},{"id":"72d67ab1.9dd854","type":"influxdb in","z":"fd6b1e47.3eff","influxdb":"76d13def.f56924","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":470,"y":220,"wires":[["cfb5f80.833e008","85a36e17.4d121"]]},{"id":"45e5b732.5805c8","type":"template","z":"fd6b1e47.3eff","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"dnb\") |> range(start:-1d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"dnb_dt_data\")  |> filter(fn: (r) => r[\"site\"] == \"dnb\") |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":290,"y":220,"wires":[["72d67ab1.9dd854"]]},{"id":"16990044.3f139","type":"function","z":"fd6b1e47.3eff","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload[0]._time)\nlet timestamp = new Date(msg.payload[0]._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nmsg.paytime3 = (\"original timestamp is \" + msg.payload[1]._time)\nlet timestamp1 = new Date(msg.payload[1]._time)\nmsg.paytime1 = (timestamp1.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":300,"y":180,"wires":[["affd56ce.03a3c8"]]},{"id":"d0456f06.a39e2","type":"inject","z":"fd6b1e47.3eff","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"120","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":110,"y":220,"wires":[["45e5b732.5805c8"]]},{"id":"e37100ae.9cba9","type":"http request","z":"fd6b1e47.3eff","name":"dnb MAPIQ ENDPOINT password 27EVf2zej0u3goJAbnjQ username svc_event_data","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://dnb.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":2440,"y":380,"wires":[["e1c52f3b.1c9f3"]]},{"id":"e1c52f3b.1c9f3","type":"debug","z":"fd6b1e47.3eff","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2840,"y":380,"wires":[]},{"id":"fdbfb684.f138e8","type":"debug","z":"fd6b1e47.3eff","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1430,"y":600,"wires":[]},{"id":"cfb5f80.833e008","type":"debug","z":"fd6b1e47.3eff","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":410,"y":440,"wires":[]},{"id":"ddb82248.939b6","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"available","fromt":"str","to":"00","tot":"num"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"occupied","fromt":"str","to":"01","tot":"num"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"occupied","fromt":"str","to":"01","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"available","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":140,"wires":[["16990044.3f139"]]},{"id":"7408f36a.dc2a1c","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload.mac","propertyType":"msg","rules":[{"t":"cont","v":"people","vt":"str"},{"t":"cont","v":"reset","vt":"str"},{"t":"cont","v":"C4DD578E8D10","vt":"str"},{"t":"cont","v":"C4DD578E8E08","vt":"str"},{"t":"cont","v":"C4DD578E9070","vt":"str"},{"t":"cont","v":"C4DD578E8E7C","vt":"str"},{"t":"cont","v":"C4DD578E9114","vt":"str"},{"t":"cont","v":"C4DD578E8E6C","vt":"str"},{"t":"cont","v":"083AF237430C","vt":"str"},{"t":"cont","v":"C4DD578E8DD0","vt":"str"},{"t":"cont","v":"C4DD578E8EB8","vt":"str"},{"t":"cont","v":"C4DD578E8CF0","vt":"str"},{"t":"cont","v":"C4DD578E9054","vt":"str"},{"t":"cont","v":"C4DD578E957C","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":15,"x":2250,"y":1580,"wires":[[],[],[],[],[],[],[],[],[],[],[],[],[],[],["244f8f0b.9b682"]]},{"id":"8d092933.a06018","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = [{\n            mac : msg.payload.mac,\n            site : msg.payload.site,\n            lastupdate : msg.timed,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2500,"y":1440,"wires":[["efc9b640.5b9248","5e10b911.8c9088"]]},{"id":"6bfc6ed2.427ff","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = [{\n            mac : msg.payload.mac,\n            site : msg.payload.site,\n            lastupdate : msg.timed,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2540,"y":1580,"wires":[["a8dbb5ae.b10ca8"]]},{"id":"b63550eb.123f2","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.topic = \"RIO MEETING ROOM SENSORS OFFLINE\"\nmsg.payload = msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2940,"y":1580,"wires":[["72cd777a.58d6b8","df291be.20dbee8"]]},{"id":"d91f4bc8.1bc538","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"payload[0].mac","pt":"msg","from":"DTE_","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":420,"wires":[["bd92ee8d.e34b2","fdbfb684.f138e8"]]},{"id":"36d94cc8.72fda4","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"payload[0].mac","pt":"msg","from":"DTE_","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":380,"wires":[["dfd9a741.670b28","fdbfb684.f138e8"]]},{"id":"23b41227.47b60e","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"payload[0].mac","pt":"msg","from":"DTE_","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":340,"wires":[["d562e4b4.2f7d08","fdbfb684.f138e8"]]},{"id":"cbff333b.c78e","type":"debug","z":"fd6b1e47.3eff","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2190,"y":560,"wires":[]},{"id":"1d0e811c.a04d5f","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":2880,"wires":[["94c1f122.616c4"]]},{"id":"94c1f122.616c4","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/flashUpdate\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1390,"y":2880,"wires":[["f33119d3.39a5f8"]]},{"id":"f33119d3.39a5f8","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"1\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1540,"y":2880,"wires":[["a135a7b8.f46c08","cabd6ce8.35eb2"]]},{"id":"a135a7b8.f46c08","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1960,"y":2900,"wires":[]},{"id":"cabd6ce8.35eb2","type":"delay","z":"9f2f3e0.64ecbc","name":"","pauseType":"rate","timeout":"20","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2150,"y":2840,"wires":[["d3e1ddac.c3ccb"]]},{"id":"73314bac.3033a4","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"1\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1540,"y":2940,"wires":[["cabd6ce8.35eb2"]]},{"id":"ed4d867a.96f318","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/getSensorConfig\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1390,"y":2940,"wires":[["73314bac.3033a4"]]},{"id":"1c1d540.78edfac","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":2940,"wires":[["ed4d867a.96f318"]]},{"id":"90fba8f9.5e2048","type":"split","z":"9f2f3e0.64ecbc","name":"get config","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1000,"y":2940,"wires":[["1c1d540.78edfac"]]},{"id":"7fce45de.6912fc","type":"inject","z":"9f2f3e0.64ecbc","name":"Rio All","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:90:74\",\"C4:DD:57:8E:90:BC\",\"C4:DD:57:8E:95:6C\",\"C4:DD:57:8E:8E:0C\",\"C4:DD:57:8E:8C:48\",\"C4:DD:57:8E:90:B0\",\"C4:DD:57:8E:8D:E0\",\"C4:DD:57:8E:90:E4\",\"C4:DD:57:8E:8E:6C\",\"C4:DD:57:8E:8C:FC\",\"C4:DD:57:8E:90:DC\",\"C4:DD:57:8E:8E:7C\",\"C4:DD:57:8E:95:B0\",\"C4:DD:57:8E:8D:D0\",\"C4:DD:57:8E:90:94\",\"C4:DD:57:8E:95:AC\",\"C4:DD:57:8E:8D:A4\",\"C4:DD:57:8E:8D:30\",\"C4:DD:57:8E:8D:44\",\"C4:DD:57:8E:95:DC\",\"C4:DD:57:8E:90:6C\",\"C4:DD:57:8E:8D:6C\",\"C4:DD:57:8E:8E:58\",\"C4:DD:57:8E:8E:54\",\"C4:DD:57:8E:8E:B8\",\"C4:DD:57:8E:8E:18\",\"C4:DD:57:8E:90:78\",\"C4:DD:57:8E:91:00\",\"C4:DD:57:8E:8E:48\",\"C4:DD:57:8E:8C:44\",\"C4:DD:57:8E:8D:10\",\"C4:DD:57:8E:8C:B8\",\"C4:DD:57:8E:95:58\",\"C4:DD:57:8E:8D:C4\",\"C4:DD:57:8E:90:A0\",\"C4:DD:57:8E:90:64\",\"C4:DD:57:8E:90:58\",\"C4:DD:57:8E:90:54\",\"C4:DD:57:8E:90:F0\",\"C4:DD:57:8E:8D:E4\",\"C4:DD:57:8E:90:98\",\"C4:DD:57:8E:90:70\",\"C4:DD:57:8E:95:7C\",\"C4:DD:57:8E:90:C8\",\"C4:DD:57:8E:8E:8C\",\"C4:DD:57:8E:8D:84\",\"C4:DD:57:8E:90:48\",\"C4:DD:57:8E:8E:44\",\"C4:DD:57:8E:95:E0\",\"C4:DD:57:8E:8E:3C\",\"C4:DD:57:8E:8D:7C\",\"C4:DD:57:8E:95:F4\",\"C4:DD:57:8E:8D:E8\",\"C4:DD:57:8E:8D:68\",\"C4:DD:57:8E:8E:2C\",\"C4:DD:57:8E:90:40\",\"C4:DD:57:8E:91:58\",\"C4:DD:57:8E:8E:40\",\"C4:DD:57:8E:90:14\",\"C4:DD:57:8E:8D:38\",\"C4:DD:57:8E:95:D4\",\"C4:DD:57:8E:90:EC\",\"C4:DD:57:8E:8D:B4\",\"C4:DD:57:8E:8C:F0\",\"C4:DD:57:8E:8E:08\",\"C4:DD:57:8E:95:64\",\"C4:DD:57:8E:8C:D8\",\"C4:DD:57:8E:90:F8\",\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:95:D8\",\"C4:DD:57:8E:90:24\",\"08:3A:F2:37:43:0C\",\"08:3A:F2:37:34:60\",\"08:3A:F2:37:42:AC\",\"08:3A:F2:37:42:80\",\"C4:5B:BE:8C:8D:04\",\"C4:5B:BE:8C:8D:28\",\"C4:5B:BE:8C:8D:08\",\"08:3A:F2:31:33:48\",\"08:3A:F2:37:34:48\",\"C4:5B:BE:8C:8D:4C\"]","payloadType":"json","x":830,"y":2980,"wires":[["90fba8f9.5e2048"]]},{"id":"5e10b911.8c9088","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2840,"y":1340,"wires":[]},{"id":"dc15275c.98f648","type":"influxdb in","z":"9f2f3e0.64ecbc","influxdb":"bbc6c1f7.7140d","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":1520,"y":1760,"wires":[["15a3a2cd.14156d"]]},{"id":"b1de6ac4.6fff48","type":"template","z":"9f2f3e0.64ecbc","name":"get 1 sensor live meeting","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"Sensor-settings\")   |> range(start:-30d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"Sensors\")  |> sort(columns: [\"_time\"], desc: false)   |> limit(n:1, offset: 0)   |> yield(name: \"last\")\n","output":"str","x":1310,"y":1760,"wires":[["dc15275c.98f648"]]},{"id":"e8df890a.410528","type":"inject","z":"9f2f3e0.64ecbc","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1160,"y":1880,"wires":[["b1de6ac4.6fff48"]]},{"id":"54147c2f.84c224","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1930,"y":1760,"wires":[]},{"id":"15a3a2cd.14156d","type":"split","z":"9f2f3e0.64ecbc","name":"","splt":"\\n","spltType":"str","arraySplt":"1","arraySpltType":"len","stream":false,"addname":"","x":1710,"y":1780,"wires":[["54147c2f.84c224","c69ab6c1.840f88"]]},{"id":"4f3a1164.1bdcb","type":"function","z":"9f2f3e0.64ecbc","name":"measurementBudget","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/measurementBudget\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3460,"y":1940,"wires":[["f0e47c33.1c415"]]},{"id":"c69ab6c1.840f88","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload.mac","propertyType":"msg","rules":[{"t":"cont","v":"C4:DD:57:8E:90:74","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:BC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:0C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:48","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:B0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:E0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:E4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:FC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:DC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:7C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:B0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:D0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:94","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:AC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:A4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:30","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:44","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:DC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:6C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:54","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:B8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:18","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:78","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:91:00","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:48","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:44","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:10","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:B8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:C4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:A0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:64","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:54","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:F0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:E4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:98","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:70","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:7C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:C8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:8C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:84","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:48","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:44","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:E0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:3C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:7C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:F4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:E8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:68","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:2C","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:40","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:91:58","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:40","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:14","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:38","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:D4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:EC","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8D:B4","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:F0","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8E:08","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:64","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:8C:D8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:F8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:91:14","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:95:D8","vt":"str"},{"t":"cont","v":"C4:DD:57:8E:90:24","vt":"str"},{"t":"cont","v":"08:3A:F2:37:43:0C","vt":"str"},{"t":"cont","v":"08:3A:F2:37:34:60","vt":"str"},{"t":"cont","v":"08:3A:F2:37:42:AC","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:08","vt":"str"},{"t":"cont","v":"08:3A:F2:31:33:48","vt":"str"},{"t":"cont","v":"08:3A:F2:37:34:48","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:4C","vt":"str"},{"t":"cont","v":"08:3A:F2:37:42:80","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:28","vt":"str"},{"t":"cont","v":"C4:5B:BE:8C:8D:04","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":82,"x":2850,"y":2280,"wires":[["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],["f6c9d87c.a04db8"],[]]},{"id":"f6c9d87c.a04db8","type":"switch","z":"9f2f3e0.64ecbc","name":"","property":"payload._field","propertyType":"msg","rules":[{"t":"cont","v":"distancearraysize","vt":"str"},{"t":"cont","v":"threshold","vt":"str"},{"t":"cont","v":"roi","vt":"str"},{"t":"cont","v":"mindistance","vt":"str"},{"t":"cont","v":"measurementPeriod","vt":"str"},{"t":"cont","v":"maxdistance","vt":"str"},{"t":"cont","v":"measurementBudget","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":8,"x":3130,"y":1840,"wires":[["425b21bd.0face"],["ef890ae1.290aa8"],["73fb6160.1b0bd"],["30c2e120.ac6a4e"],["221d6c8b.8b1eb4"],["9d314494.3dd888"],["4f3a1164.1bdcb"],[]]},{"id":"9d314494.3dd888","type":"function","z":"9f2f3e0.64ecbc","name":"maxdistance","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/maxDistance\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3430,"y":1900,"wires":[["f0e47c33.1c415"]]},{"id":"221d6c8b.8b1eb4","type":"function","z":"9f2f3e0.64ecbc","name":"measurement Period","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/measurementPeriod\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3460,"y":1860,"wires":[["f0e47c33.1c415"]]},{"id":"30c2e120.ac6a4e","type":"function","z":"9f2f3e0.64ecbc","name":"minDistance","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/minDistance\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3430,"y":1820,"wires":[["f0e47c33.1c415"]]},{"id":"73fb6160.1b0bd","type":"function","z":"9f2f3e0.64ecbc","name":"RIO","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/roiConfig\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3410,"y":1780,"wires":[["f0e47c33.1c415"]]},{"id":"ef890ae1.290aa8","type":"function","z":"9f2f3e0.64ecbc","name":"threshold","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/threshold\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3420,"y":1740,"wires":[["f0e47c33.1c415"]]},{"id":"425b21bd.0face","type":"function","z":"9f2f3e0.64ecbc","name":"distancesArraySize","func":"msg.topic = \"sensor/\"+msg.payload.mac+\"/distancesArraySize\"\nmsg.payload = msg.payload._value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":3450,"y":1700,"wires":[["f0e47c33.1c415"]]},{"id":"1dea6f90.a819e","type":"debug","z":"9f2f3e0.64ecbc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":3840,"y":2120,"wires":[]},{"id":"8f9ca947.e17948","type":"function","z":"9f2f3e0.64ecbc","name":"","func":"msg.payload = \"1\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1820,"y":3020,"wires":[[]]},{"id":"540dd8ad.30a5e8","type":"function","z":"9f2f3e0.64ecbc","name":"topic","func":"msg.topic = \"sensor/\" + msg.payload + \"/restoreSensorConfig\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1670,"y":3020,"wires":[["8f9ca947.e17948"]]},{"id":"8d779a7.83f3a68","type":"change","z":"9f2f3e0.64ecbc","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"\"\"","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1480,"y":3020,"wires":[["540dd8ad.30a5e8"]]},{"id":"e2fb057c.601928","type":"split","z":"9f2f3e0.64ecbc","name":"get config","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1280,"y":3020,"wires":[["8d779a7.83f3a68"]]},{"id":"d88fbd0.3c5b74","type":"inject","z":"9f2f3e0.64ecbc","name":"Rio All","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"C4:DD:57:8E:90:74\",\"C4:DD:57:8E:90:BC\",\"C4:DD:57:8E:95:6C\",\"C4:DD:57:8E:8E:0C\",\"C4:DD:57:8E:8C:48\",\"C4:DD:57:8E:90:B0\",\"C4:DD:57:8E:8D:E0\",\"C4:DD:57:8E:90:E4\",\"C4:DD:57:8E:8E:6C\",\"C4:DD:57:8E:8C:FC\",\"C4:DD:57:8E:90:DC\",\"C4:DD:57:8E:8E:7C\",\"C4:DD:57:8E:95:B0\",\"C4:DD:57:8E:8D:D0\",\"C4:DD:57:8E:90:94\",\"C4:DD:57:8E:95:AC\",\"C4:DD:57:8E:8D:A4\",\"C4:DD:57:8E:8D:30\",\"C4:DD:57:8E:8D:44\",\"C4:DD:57:8E:95:DC\",\"C4:DD:57:8E:90:6C\",\"C4:DD:57:8E:8D:6C\",\"C4:DD:57:8E:8E:58\",\"C4:DD:57:8E:8E:54\",\"C4:DD:57:8E:8E:B8\",\"C4:DD:57:8E:8E:18\",\"C4:DD:57:8E:90:78\",\"C4:DD:57:8E:91:00\",\"C4:DD:57:8E:8E:48\",\"C4:DD:57:8E:8C:44\",\"C4:DD:57:8E:8D:10\",\"C4:DD:57:8E:8C:B8\",\"C4:DD:57:8E:95:58\",\"C4:DD:57:8E:8D:C4\",\"C4:DD:57:8E:90:A0\",\"C4:DD:57:8E:90:64\",\"C4:DD:57:8E:90:58\",\"C4:DD:57:8E:90:54\",\"C4:DD:57:8E:90:F0\",\"C4:DD:57:8E:8D:E4\",\"C4:DD:57:8E:90:98\",\"C4:DD:57:8E:90:70\",\"C4:DD:57:8E:95:7C\",\"C4:DD:57:8E:90:C8\",\"C4:DD:57:8E:8E:8C\",\"C4:DD:57:8E:8D:84\",\"C4:DD:57:8E:90:48\",\"C4:DD:57:8E:8E:44\",\"C4:DD:57:8E:95:E0\",\"C4:DD:57:8E:8E:3C\",\"C4:DD:57:8E:8D:7C\",\"C4:DD:57:8E:95:F4\",\"C4:DD:57:8E:8D:E8\",\"C4:DD:57:8E:8D:68\",\"C4:DD:57:8E:8E:2C\",\"C4:DD:57:8E:90:40\",\"C4:DD:57:8E:91:58\",\"C4:DD:57:8E:8E:40\",\"C4:DD:57:8E:90:14\",\"C4:DD:57:8E:8D:38\",\"C4:DD:57:8E:95:D4\",\"C4:DD:57:8E:90:EC\",\"C4:DD:57:8E:8D:B4\",\"C4:DD:57:8E:8C:F0\",\"C4:DD:57:8E:8E:08\",\"C4:DD:57:8E:95:64\",\"C4:DD:57:8E:8C:D8\",\"C4:DD:57:8E:90:F8\",\"C4:DD:57:8E:91:14\",\"C4:DD:57:8E:95:D8\",\"C4:DD:57:8E:90:24\",\"08:3A:F2:37:43:0C\",\"08:3A:F2:37:34:60\",\"08:3A:F2:37:42:AC\",\"08:3A:F2:37:42:80\",\"C4:5B:BE:8C:8D:04\",\"C4:5B:BE:8C:8D:28\",\"C4:5B:BE:8C:8D:08\",\"08:3A:F2:31:33:48\",\"08:3A:F2:37:34:48\",\"C4:5B:BE:8C:8D:4C\"]","payloadType":"json","x":1110,"y":3060,"wires":[["b4edf2ec.ae1fd"]]},{"id":"789a3292.ba091c","type":"mqtt in","z":"fd6b1e47.3eff","name":"","topic":"dnb/people/#","qos":"0","datatype":"auto","broker":"eebe667d.495498","x":110,"y":520,"wires":[["19042f9a.033c4"]]},{"id":"19042f9a.033c4","type":"split","z":"fd6b1e47.3eff","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":270,"y":520,"wires":[["fda8a938.6f6148"]]},{"id":"fda8a938.6f6148","type":"change","z":"fd6b1e47.3eff","name":"","rules":[{"t":"change","p":"topic","pt":"msg","from":"dnb/people/","fromt":"str","to":"","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"/people/count","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":520,"wires":[["dec940b1.d7021"]]},{"id":"6a84dbd8.3405e4","type":"timestamp","z":"fd6b1e47.3eff","name":"","x":710,"y":520,"wires":[["9f009b83.7429d8"]]},{"id":"9f009b83.7429d8","type":"template","z":"fd6b1e47.3eff","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{topic}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"{{payload}}\"}","output":"json","x":1630,"y":580,"wires":[["5ef778f1.0bef18","573d661e.1dbc28"]]},{"id":"fde787e1.23fd98","type":"delay","z":"fd6b1e47.3eff","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"5","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":210,"y":580,"wires":[["841571ce.60a45"]]},{"id":"841571ce.60a45","type":"debug","z":"fd6b1e47.3eff","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":730,"y":640,"wires":[]},{"id":"573d661e.1dbc28","type":"join","z":"fd6b1e47.3eff","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1950,"y":620,"wires":[["a0c758aa.459188"]]},{"id":"a0c758aa.459188","type":"http request","z":"fd6b1e47.3eff","name":"dnb MAPIQ ENDPOINT password 27EVf2zej0u3goJAbnjQ username svc_event_data","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://dnb.mapiq.net/api/telemetry/occupancy/value","tls":"","persist":true,"proxy":"","authType":"basic","x":2380,"y":620,"wires":[[]]},{"id":"5ef778f1.0bef18","type":"debug","z":"fd6b1e47.3eff","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1010,"y":480,"wires":[]},{"id":"dec940b1.d7021","type":"switch","z":"fd6b1e47.3eff","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"100","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":520,"wires":[["6a84dbd8.3405e4"],["841571ce.60a45"]]},{"id":"555a7741.439138","type":"inject","z":"c7a11946.e1ad18","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"0 0-23 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"{     \"username\": \"cummins_admin\",     \"password\": \"Y3VtbWluczpwYXNzd29yZA==\" }","payloadType":"json","x":110,"y":160,"wires":[["7197b8f9.6468b8"]]},{"id":"7197b8f9.6468b8","type":"www-request","z":"c7a11946.e1ad18","name":"cummins Intuitive","method":"POST","ret":"txt","url":"https://vivid-kite-307111.appspot.com/login","follow-redirects":true,"persistent-http":true,"tls":"","x":270,"y":120,"wires":[["7e5b6485.49182c"]]},{"id":"7e5b6485.49182c","type":"json","z":"c7a11946.e1ad18","name":"","property":"payload","action":"","pretty":false,"x":370,"y":160,"wires":[["ee31d5d2.c15ac8"]]},{"id":"ee31d5d2.c15ac8","type":"function","z":"c7a11946.e1ad18","name":"","func":"\nmsg.headers = {\n    Authorization: \"Bearer \"+ msg.payload.token\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":500,"y":160,"wires":[["9c26c568.52af98"]]},{"id":"9c26c568.52af98","type":"www-request","z":"c7a11946.e1ad18","name":"","method":"GET","ret":"txt","url":"https://vivid-kite-307111.appspot.com/api/node/cca32361-879a-4f65-a309-bf1a6abbc381?label=Building","follow-redirects":true,"persistent-http":true,"tls":"","x":650,"y":160,"wires":[["e83cd542.e42238"]]},{"id":"e83cd542.e42238","type":"json","z":"c7a11946.e1ad18","name":"","property":"payload","action":"","pretty":false,"x":790,"y":160,"wires":[["30e4db38.acf3e4"]]},{"id":"b71e5b76.732d78","type":"influxdb out","z":"c7a11946.e1ad18","influxdb":"b35b30c7.7d5","name":"","measurement":"london_kent","precision":"","retentionPolicy":"","database":"database","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"cummins","x":890,"y":240,"wires":[]},{"id":"7cc241d0.535ce","type":"function","z":"c7a11946.e1ad18","name":"Sorting","func":"msg.payload1 = [{\n            mac_address:msg.payload.sensor_id,\n        },\n        {\n            mac_address:msg.payload.sensor_id,\n            parent:msg.payload.parent,\n            parent_id:msg.payload.parent_id,\n            mask: \"100000000000000000000000000000\",\n            recvmask: \"100000000000000000000000000000\",\n            average: \"1\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":380,"y":200,"wires":[["cbb4736c.573ba"]]},{"id":"30e4db38.acf3e4","type":"split","z":"c7a11946.e1ad18","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":230,"y":200,"wires":[["7cc241d0.535ce"]]},{"id":"78a5a7f4.e6dcd8","type":"comment","z":"c7a11946.e1ad18","name":"GET SENSOR INFORMATION FROM UI","info":"","x":300,"y":40,"wires":[]},{"id":"11630596.7e2aaa","type":"template","z":"c7a11946.e1ad18","name":"1 HOUR CHECK","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"cummins\")  |> range(start: -1h, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"london_kent\")  |> filter(fn: (r) => r[\"_field\"] == \"status\")  |> filter(fn: (r) => r[\"mac_address\"] == \"{{mac}}\") |> limit(n:30, offset: 0)  |> sort(columns: [\"_time\"], desc: true)","output":"str","x":730,"y":200,"wires":[["14f61f07.38e9f1"]]},{"id":"14f61f07.38e9f1","type":"influxdb in","z":"c7a11946.e1ad18","influxdb":"bbc6c1f7.7140d","name":"Cummins","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":960,"y":200,"wires":[["da9ad685.e763d8"]]},{"id":"66cc4538.795f3c","type":"function","z":"c7a11946.e1ad18","name":"Sorting","func":"msg.payload = [{\n            mask: String(msg.mask),\n            recvmask: String(msg.mask),\n            average: Number(msg.avarage),\n\n        },\n        {\n            mac_address:msg.payload1[0].mac_address,\n            parent:msg.payload1[1].parent,\n            //parent_id:msg.payload1[1].parent_id,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":240,"wires":[["c02ffa04.6d94a8"]]},{"id":"31803259.1b2e9e","type":"function","z":"c7a11946.e1ad18","name":"mask","func":"var mask1 = msg.payload[0]._value += msg.payload[1]._value += msg.payload[2]._value += msg.payload[3]._value += msg.payload[4]._value += msg.payload[5]._value += msg.payload[6]._value += msg.payload[7]._value += msg.payload[8]._value += msg.payload[9]._value += msg.payload[10]._value += msg.payload[11]._value += msg.payload[12]._value += msg.payload[13]._value += msg.payload[14]._value += msg.payload[15]._value += msg.payload[16]._value += msg.payload[17]._value += msg.payload[18]._value += msg.payload[19]._value += msg.payload[20]._value += msg.payload[21]._value += msg.payload[22]._value += msg.payload[23]._value += msg.payload[24]._value += msg.payload[25]._value += msg.payload[26]._value += msg.payload[27]._value += msg.payload[28]._value +=  msg.payload[29]._value += msg.payload[3]._value;\nmsg.mask = mask1;\nmsg.recvmask = mask1;\nmsg.avarage = (msg.avca2)/30\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":350,"y":240,"wires":[["66cc4538.795f3c"]]},{"id":"da9ad685.e763d8","type":"function","z":"c7a11946.e1ad18","name":"avcal","func":"var avcal1 = Number(msg.payload[0]._value) + Number(msg.payload[1]._value) + Number(msg.payload[2]._value) + Number(msg.payload[3]._value) + Number(msg.payload[4]._value) + Number(msg.payload[5]._value) + Number(msg.payload[6]._value) + Number(msg.payload[7]._value) + Number(msg.payload[8]._value) + Number(msg.payload[9]._value) + Number(msg.payload[10]._value) + Number(msg.payload[11]._value) + Number(msg.payload[12]._value) + Number(msg.payload[13]._value) + Number(msg.payload[14]._value) + Number(msg.payload[15]._value) + Number(msg.payload[16]._value) + Number(msg.payload[17]._value) + Number(msg.payload[18]._value) + Number(msg.payload[19]._value) + Number(msg.payload[20]._value) + Number(msg.payload[21]._value) + Number(msg.payload[22]._value) + Number(msg.payload[23]._value) + Number(msg.payload[24]._value) + Number(msg.payload[25]._value) + Number(msg.payload[26]._value) + Number(msg.payload[27]._value) + Number(msg.payload[28]._value) +  Number(msg.payload[29]._value);\nmsg.avca2 = avcal1\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":230,"y":240,"wires":[["31803259.1b2e9e"]]},{"id":"c02ffa04.6d94a8","type":"join","z":"c7a11946.e1ad18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":650,"y":240,"wires":[["b71e5b76.732d78","befeb3c7.8ab2a"]]},{"id":"cbb4736c.573ba","type":"function","z":"c7a11946.e1ad18","name":"","func":"msg.mac = String(msg.payload1[0].mac_address)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":200,"wires":[["11630596.7e2aaa"]]},{"id":"af2aec6c.0ed3c","type":"mqtt in","z":"73c8658d.47d70c","name":"","topic":"#","qos":"0","datatype":"auto","broker":"f0e70157.57d99","x":200,"y":160,"wires":[["b9a1e1c3.b496"]]},{"id":"16abe6a8.6c6539","type":"mqtt out","z":"73c8658d.47d70c","name":"","topic":"","qos":"","retain":"true","broker":"fb1189d8.7a3418","x":630,"y":260,"wires":[]},{"id":"b9a1e1c3.b496","type":"json","z":"73c8658d.47d70c","name":"","property":"payload","action":"","pretty":false,"x":370,"y":160,"wires":[["c12c44a5.59c168","4b366acf.cd58b4"]]},{"id":"ea33dd51.73bb6","type":"inject","z":"73c8658d.47d70c","name":"free","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"end_device_ids\":{\"device_id\":\"eui-24e124538b311890\",\"application_ids\":{\"application_id\":\"rio-brisbane\"},\"dev_eui\":\"24E124538B318818\",\"join_eui\":\"24E124C0002A0001\",\"dev_addr\":\"260D4200\"},\"correlation_ids\":[\"as:up:01FNP2QWDBZR0JRBQACYR6HXBP\",\"gs:conn:01FNNGWSS7K9N0TKD4HFTXYG6Q\",\"gs:up:host:01FNNGWT1GSHGY7PNNVJZXS14R\",\"gs:uplink:01FNP2QW6T09793TQ5M1YPEBXJ\",\"ns:uplink:01FNP2QW6W6MP78VXQMTBX7BQ9\",\"rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01FNP2QW6W2N59695T9YA9WKY8\",\"rpc:/ttn.lorawan.v3.NsAs/HandleUplink:01FNP2QWDBGNCAZ8XVREZ8F0C3\"],\"received_at\":\"2021-11-29T14:49:19.020563574Z\",\"uplink_message\":{\"session_key_id\":\"AX1q1Bta2Enn+DyM1fzzGA==\",\"f_port\":85,\"f_cnt\":51,\"frm_payload\":\"AXVkAwAABAAA\",\"decoded_payload\":{\"battery\":100,\"daylight\":\"dark\",\"pir\":\"normal\"},\"rx_metadata\":[{\"gateway_ids\":{\"gateway_id\":\"zeplin-gateway-brisbane\",\"eui\":\"24E124FFFEF0C0AF\"},\"time\":\"2021-11-29T14:49:18.675111Z\",\"timestamp\":1536577756,\"rssi\":-31,\"channel_rssi\":-31,\"snr\":6.8,\"uplink_token\":\"CiUKIwoXemVwbGluLWdhdGV3YXktYnJpc2JhbmUSCCThJP/+8MCvENyh2dwFGgwI7tCTjQYQs+PGggMg4LavmdygBCoMCO7Qk40GENjA9cEC\",\"channel_index\":5}],\"settings\":{\"data_rate\":{\"lora\":{\"bandwidth\":125000,\"spreading_factor\":10}},\"coding_rate\":\"4/5\",\"frequency\":\"917800000\",\"timestamp\":1536577756,\"time\":\"2021-11-29T14:49:18.675111Z\"},\"received_at\":\"2021-11-29T14:49:18.812355841Z\",\"consumed_airtime\":\"0.370688s\",\"network_ids\":{\"net_id\":\"000013\",\"tenant_id\":\"ttn\",\"cluster_id\":\"ttn-au1\"}}}","payloadType":"json","x":130,"y":260,"wires":[["4b366acf.cd58b4"]]},{"id":"c12c44a5.59c168","type":"function","z":"73c8658d.47d70c","name":"","func":"msg.topic = \"rio/brisbane/pir/\"+msg.payload.end_device_ids.device_id\nmsg.payload = [{\n            sensorId: msg.payload.end_device_ids.device_id,\n            Battery: msg.payload.uplink_message.decoded_payload.battery,\n            Daylight: msg.payload.uplink_message.decoded_payload.daylight,\n            Pir:msg.payload.uplink_message.decoded_payload.pir\n\n        }\n\n\n];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":400,"y":300,"wires":[["16abe6a8.6c6539"]]},{"id":"ec300eab.2e463","type":"timestamp","z":"73c8658d.47d70c","name":"","x":570,"y":400,"wires":[["58ff7beb.b87764"]]},{"id":"d1c8883e.d1ec08","type":"delay","z":"73c8658d.47d70c","name":"","pauseType":"rate","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":990,"y":320,"wires":[["43e74f57.f0daf"]]},{"id":"43e74f57.f0daf","type":"http request","z":"73c8658d.47d70c","name":"MAPIQ ENDPOINT password wuy6cEC1AlROIDtAFC1h username switchfi","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://riotinto.mapiq.net/api/telemetry/occupancy/state","tls":"","persist":true,"proxy":"","authType":"basic","x":1370,"y":320,"wires":[["30e24746.6ab008"]]},{"id":"30e24746.6ab008","type":"debug","z":"73c8658d.47d70c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1750,"y":320,"wires":[]},{"id":"58ff7beb.b87764","type":"template","z":"73c8658d.47d70c","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}]","output":"json","x":770,"y":400,"wires":[["d1c8883e.d1ec08"]]},{"id":"37724b8a.81bae4","type":"template","z":"73c8658d.47d70c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"json","x":780,"y":360,"wires":[["d1c8883e.d1ec08"]]},{"id":"8ec136e5.ed5318","type":"timestamp","z":"73c8658d.47d70c","name":"","x":570,"y":360,"wires":[["37724b8a.81bae4"]]},{"id":"4b366acf.cd58b4","type":"function","z":"73c8658d.47d70c","name":"","func":"msg.payload = {\n            sensorId: msg.payload.end_device_ids.device_id,\n            Pir:msg.payload.uplink_message.decoded_payload.pir\n\n        }\n\n\n;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":100,"y":380,"wires":[["df9e2c03.09602","2db5fdbe.2c1242","f2b2eb8f.e0fd68"]]},{"id":"df9e2c03.09602","type":"switch","z":"73c8658d.47d70c","name":"","property":"payload.Pir","propertyType":"msg","rules":[{"t":"eq","v":"normal","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":380,"wires":[["8ec136e5.ed5318"],["ec300eab.2e463"]]},{"id":"2db5fdbe.2c1242","type":"switch","z":"73c8658d.47d70c","name":"PIRROOM1801","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"eq","v":"eui-24e124538b311890","vt":"str"},{"t":"eq","v":"eui-24e124538b312613","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":320,"y":480,"wires":[["c6335f21.da98c"],["c6335f21.da98c"]]},{"id":"c6335f21.da98c","type":"change","z":"73c8658d.47d70c","name":"","rules":[{"t":"set","p":"payload.sensorId","pt":"msg","to":"PIRROOM1801","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":480,"wires":[["825407ad.8c9968"]]},{"id":"f2b2eb8f.e0fd68","type":"switch","z":"73c8658d.47d70c","name":"PIRROOM1813","property":"payload.sensorId","propertyType":"msg","rules":[{"t":"eq","v":"eui-24e124538b317536","vt":"str"},{"t":"eq","v":"eui-24e124538b318818","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":320,"y":560,"wires":[["9616016b.3744e"],["9616016b.3744e"]]},{"id":"9616016b.3744e","type":"change","z":"73c8658d.47d70c","name":"","rules":[{"t":"set","p":"payload.sensorId","pt":"msg","to":"PIRROOM1813","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":560,"wires":[["264d91d9.d7804e"]]},{"id":"fb9bd1cf.0bd5a","type":"timestamp","z":"73c8658d.47d70c","name":"","x":1090,"y":500,"wires":[["3a2d2319.25126c"]]},{"id":"3a2d2319.25126c","type":"template","z":"73c8658d.47d70c","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}]","output":"json","x":1250,"y":500,"wires":[["d1c8883e.d1ec08","80b6755a.a96608"]]},{"id":"1b4f91b6.d6b7ce","type":"template","z":"73c8658d.47d70c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"json","x":1260,"y":460,"wires":[["d1c8883e.d1ec08","80b6755a.a96608"]]},{"id":"4f9ccade.ad34b4","type":"timestamp","z":"73c8658d.47d70c","name":"","x":1090,"y":460,"wires":[["1b4f91b6.d6b7ce"]]},{"id":"825407ad.8c9968","type":"switch","z":"73c8658d.47d70c","name":"","property":"payload.Pir","propertyType":"msg","rules":[{"t":"eq","v":"normal","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":480,"wires":[["d9a83ee1.23f56"],["fb9bd1cf.0bd5a"]]},{"id":"532b13dd.5fd92c","type":"timestamp","z":"73c8658d.47d70c","name":"","x":1090,"y":580,"wires":[["53742c4f.e22214"]]},{"id":"53742c4f.e22214","type":"template","z":"73c8658d.47d70c","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"occupied\"}]","output":"json","x":1250,"y":580,"wires":[["d1c8883e.d1ec08"]]},{"id":"89a5d914.6c2798","type":"template","z":"73c8658d.47d70c","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{\"buildingId\":\"rio\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"available\"}]","output":"json","x":1260,"y":540,"wires":[["d1c8883e.d1ec08"]]},{"id":"4396cb33.4b0f74","type":"timestamp","z":"73c8658d.47d70c","name":"","x":1090,"y":540,"wires":[["89a5d914.6c2798"]]},{"id":"264d91d9.d7804e","type":"switch","z":"73c8658d.47d70c","name":"","property":"payload.Pir","propertyType":"msg","rules":[{"t":"eq","v":"normal","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":560,"wires":[["ce72949d.f957b8"],["532b13dd.5fd92c"]]},{"id":"13c930e5.4156ef","type":"inject","z":"73c8658d.47d70c","name":"trigger","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"end_device_ids\":{\"device_id\":\"eui-24e124538b311890\",\"application_ids\":{\"application_id\":\"rio-brisbane\"},\"dev_eui\":\"24E124538B318818\",\"join_eui\":\"24E124C0002A0001\",\"dev_addr\":\"260D4200\"},\"correlation_ids\":[\"as:up:01FNP2QWDBZR0JRBQACYR6HXBP\",\"gs:conn:01FNNGWSS7K9N0TKD4HFTXYG6Q\",\"gs:up:host:01FNNGWT1GSHGY7PNNVJZXS14R\",\"gs:uplink:01FNP2QW6T09793TQ5M1YPEBXJ\",\"ns:uplink:01FNP2QW6W6MP78VXQMTBX7BQ9\",\"rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01FNP2QW6W2N59695T9YA9WKY8\",\"rpc:/ttn.lorawan.v3.NsAs/HandleUplink:01FNP2QWDBGNCAZ8XVREZ8F0C3\"],\"received_at\":\"2021-11-29T14:49:19.020563574Z\",\"uplink_message\":{\"session_key_id\":\"AX1q1Bta2Enn+DyM1fzzGA==\",\"f_port\":85,\"f_cnt\":51,\"frm_payload\":\"AXVkAwAABAAA\",\"decoded_payload\":{\"battery\":100,\"daylight\":\"dark\",\"pir\":\"trigger\"},\"rx_metadata\":[{\"gateway_ids\":{\"gateway_id\":\"zeplin-gateway-brisbane\",\"eui\":\"24E124FFFEF0C0AF\"},\"time\":\"2021-11-29T14:49:18.675111Z\",\"timestamp\":1536577756,\"rssi\":-31,\"channel_rssi\":-31,\"snr\":6.8,\"uplink_token\":\"CiUKIwoXemVwbGluLWdhdGV3YXktYnJpc2JhbmUSCCThJP/+8MCvENyh2dwFGgwI7tCTjQYQs+PGggMg4LavmdygBCoMCO7Qk40GENjA9cEC\",\"channel_index\":5}],\"settings\":{\"data_rate\":{\"lora\":{\"bandwidth\":125000,\"spreading_factor\":10}},\"coding_rate\":\"4/5\",\"frequency\":\"917800000\",\"timestamp\":1536577756,\"time\":\"2021-11-29T14:49:18.675111Z\"},\"received_at\":\"2021-11-29T14:49:18.812355841Z\",\"consumed_airtime\":\"0.370688s\",\"network_ids\":{\"net_id\":\"000013\",\"tenant_id\":\"ttn\",\"cluster_id\":\"ttn-au1\"}}}","payloadType":"json","x":130,"y":220,"wires":[["4b366acf.cd58b4"]]},{"id":"1d2a82c.96dee7d","type":"inject","z":"73c8658d.47d70c","name":"free","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"end_device_ids\":{\"device_id\":\"eui-24e124538b312613\",\"application_ids\":{\"application_id\":\"rio-brisbane\"},\"dev_eui\":\"24E124538B318818\",\"join_eui\":\"24E124C0002A0001\",\"dev_addr\":\"260D4200\"},\"correlation_ids\":[\"as:up:01FNP2QWDBZR0JRBQACYR6HXBP\",\"gs:conn:01FNNGWSS7K9N0TKD4HFTXYG6Q\",\"gs:up:host:01FNNGWT1GSHGY7PNNVJZXS14R\",\"gs:uplink:01FNP2QW6T09793TQ5M1YPEBXJ\",\"ns:uplink:01FNP2QW6W6MP78VXQMTBX7BQ9\",\"rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01FNP2QW6W2N59695T9YA9WKY8\",\"rpc:/ttn.lorawan.v3.NsAs/HandleUplink:01FNP2QWDBGNCAZ8XVREZ8F0C3\"],\"received_at\":\"2021-11-29T14:49:19.020563574Z\",\"uplink_message\":{\"session_key_id\":\"AX1q1Bta2Enn+DyM1fzzGA==\",\"f_port\":85,\"f_cnt\":51,\"frm_payload\":\"AXVkAwAABAAA\",\"decoded_payload\":{\"battery\":100,\"daylight\":\"dark\",\"pir\":\"normal\"},\"rx_metadata\":[{\"gateway_ids\":{\"gateway_id\":\"zeplin-gateway-brisbane\",\"eui\":\"24E124FFFEF0C0AF\"},\"time\":\"2021-11-29T14:49:18.675111Z\",\"timestamp\":1536577756,\"rssi\":-31,\"channel_rssi\":-31,\"snr\":6.8,\"uplink_token\":\"CiUKIwoXemVwbGluLWdhdGV3YXktYnJpc2JhbmUSCCThJP/+8MCvENyh2dwFGgwI7tCTjQYQs+PGggMg4LavmdygBCoMCO7Qk40GENjA9cEC\",\"channel_index\":5}],\"settings\":{\"data_rate\":{\"lora\":{\"bandwidth\":125000,\"spreading_factor\":10}},\"coding_rate\":\"4/5\",\"frequency\":\"917800000\",\"timestamp\":1536577756,\"time\":\"2021-11-29T14:49:18.675111Z\"},\"received_at\":\"2021-11-29T14:49:18.812355841Z\",\"consumed_airtime\":\"0.370688s\",\"network_ids\":{\"net_id\":\"000013\",\"tenant_id\":\"ttn\",\"cluster_id\":\"ttn-au1\"}}}","payloadType":"json","x":190,"y":660,"wires":[["4b366acf.cd58b4"]]},{"id":"522d564b.f1f848","type":"inject","z":"73c8658d.47d70c","name":"trigger","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"end_device_ids\":{\"device_id\":\"eui-24e124538b312613\",\"application_ids\":{\"application_id\":\"rio-brisbane\"},\"dev_eui\":\"24E124538B318818\",\"join_eui\":\"24E124C0002A0001\",\"dev_addr\":\"260D4200\"},\"correlation_ids\":[\"as:up:01FNP2QWDBZR0JRBQACYR6HXBP\",\"gs:conn:01FNNGWSS7K9N0TKD4HFTXYG6Q\",\"gs:up:host:01FNNGWT1GSHGY7PNNVJZXS14R\",\"gs:uplink:01FNP2QW6T09793TQ5M1YPEBXJ\",\"ns:uplink:01FNP2QW6W6MP78VXQMTBX7BQ9\",\"rpc:/ttn.lorawan.v3.GsNs/HandleUplink:01FNP2QW6W2N59695T9YA9WKY8\",\"rpc:/ttn.lorawan.v3.NsAs/HandleUplink:01FNP2QWDBGNCAZ8XVREZ8F0C3\"],\"received_at\":\"2021-11-29T14:49:19.020563574Z\",\"uplink_message\":{\"session_key_id\":\"AX1q1Bta2Enn+DyM1fzzGA==\",\"f_port\":85,\"f_cnt\":51,\"frm_payload\":\"AXVkAwAABAAA\",\"decoded_payload\":{\"battery\":100,\"daylight\":\"dark\",\"pir\":\"trigger\"},\"rx_metadata\":[{\"gateway_ids\":{\"gateway_id\":\"zeplin-gateway-brisbane\",\"eui\":\"24E124FFFEF0C0AF\"},\"time\":\"2021-11-29T14:49:18.675111Z\",\"timestamp\":1536577756,\"rssi\":-31,\"channel_rssi\":-31,\"snr\":6.8,\"uplink_token\":\"CiUKIwoXemVwbGluLWdhdGV3YXktYnJpc2JhbmUSCCThJP/+8MCvENyh2dwFGgwI7tCTjQYQs+PGggMg4LavmdygBCoMCO7Qk40GENjA9cEC\",\"channel_index\":5}],\"settings\":{\"data_rate\":{\"lora\":{\"bandwidth\":125000,\"spreading_factor\":10}},\"coding_rate\":\"4/5\",\"frequency\":\"917800000\",\"timestamp\":1536577756,\"time\":\"2021-11-29T14:49:18.675111Z\"},\"received_at\":\"2021-11-29T14:49:18.812355841Z\",\"consumed_airtime\":\"0.370688s\",\"network_ids\":{\"net_id\":\"000013\",\"tenant_id\":\"ttn\",\"cluster_id\":\"ttn-au1\"}}}","payloadType":"json","x":190,"y":720,"wires":[["4b366acf.cd58b4"]]},{"id":"92af2fa0.1f57c","type":"delay","z":"73c8658d.47d70c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":550,"y":680,"wires":[[]]},{"id":"d9a83ee1.23f56","type":"join","z":"73c8658d.47d70c","name":"","mode":"custom","build":"string","property":"payload.Pir","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":910,"y":440,"wires":[["4f9ccade.ad34b4"]]},{"id":"80b6755a.a96608","type":"debug","z":"73c8658d.47d70c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1450,"y":480,"wires":[]},{"id":"ce72949d.f957b8","type":"join","z":"73c8658d.47d70c","name":"","mode":"custom","build":"string","property":"payload.Pir","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":890,"y":520,"wires":[["4396cb33.4b0f74"]]},{"id":"1737b47c.5e039c","type":"www-request","z":"c7a11946.e1ad18","name":"Get All Netflix Seoul","method":"GET","ret":"txt","url":"https://backend.senzodata.com/api/sensor/live/19351?apikey=fc61cbe4-9ee4-4e1e-98da-eea1dd2ddc21","follow-redirects":true,"persistent-http":false,"tls":"","x":360,"y":1860,"wires":[["b91f0afa.cda7b8"]]},{"id":"b05743e7.f4c7d","type":"inject","z":"c7a11946.e1ad18","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":1860,"wires":[["1737b47c.5e039c"]]},{"id":"b91f0afa.cda7b8","type":"json","z":"c7a11946.e1ad18","name":"","property":"payload","action":"","pretty":false,"x":550,"y":1860,"wires":[["b4451279.03a97"]]},{"id":"1d508ffe.a1a1","type":"json","z":"c7a11946.e1ad18","name":"","property":"payload","action":"","pretty":false,"x":1410,"y":2020,"wires":[["bc7f08be.f90c38","886a8c6d.47617","5e47a589.95e93c"]]},{"id":"69767b50.9a7f74","type":"template","z":"c7a11946.e1ad18","name":"OCCUPANCY DATA 0","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"sensorId\":\"{{payload.macaddress}}\",\"lastUpdated\":\"{{timestamp}}\",\"occupancy_status\":\"0\",\"count_status\":\"\",\"temp_status\":\"\"}","output":"str","x":1185.75,"y":2053.6666870117188,"wires":[["1d508ffe.a1a1"]]},{"id":"18f9eada.a54f05","type":"template","z":"c7a11946.e1ad18","name":"OCCUPANCY DATA 1","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"sensorId\":\"{{payload.macaddress}}\",\"lastUpdated\":\"{{timestamp}}\",\"occupancy_status\":\"1\",\"count_status\":\"\",\"temp_status\":\"\"}","output":"str","x":1182.75,"y":2103.6666870117188,"wires":[["1d508ffe.a1a1"]]},{"id":"30ea1883.9a7978","type":"change","z":"c7a11946.e1ad18","name":"","rules":[{"t":"set","p":"timestamp","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":960.75,"y":2104.75,"wires":[["18f9eada.a54f05"]]},{"id":"8323a756.dd5e68","type":"change","z":"c7a11946.e1ad18","name":"","rules":[{"t":"set","p":"timestamp","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":963.75,"y":2054.75,"wires":[["69767b50.9a7f74"]]},{"id":"bdc7e61c.5e3828","type":"timestamp","z":"c7a11946.e1ad18","name":"","x":788,"y":2052,"wires":[["8323a756.dd5e68"]]},{"id":"32d2a619.3b1d6a","type":"timestamp","z":"c7a11946.e1ad18","name":"","x":785,"y":2102,"wires":[["30ea1883.9a7978"]]},{"id":"66824bd3.c81654","type":"template","z":"c7a11946.e1ad18","name":"topic","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"sensor_data/{{payload.macaddress}}/data","output":"str","x":639,"y":2104,"wires":[["32d2a619.3b1d6a"]]},{"id":"6b31047f.5855fc","type":"template","z":"c7a11946.e1ad18","name":"topic","field":"topic","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"sensor_data/{{payload.macaddress}}/data","output":"str","x":642,"y":2054,"wires":[["bdc7e61c.5e3828"]]},{"id":"bc7f08be.f90c38","type":"mqtt out","z":"c7a11946.e1ad18","name":"","topic":"","qos":"","retain":"","broker":"eebe667d.495498","x":1590,"y":2020,"wires":[]},{"id":"b4451279.03a97","type":"split","z":"c7a11946.e1ad18","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":670,"y":1860,"wires":[["d679c6d0.88a838"]]},{"id":"d679c6d0.88a838","type":"switch","z":"c7a11946.e1ad18","name":"","property":"payload.inuse","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":760,"y":1940,"wires":[["66824bd3.c81654"],["6b31047f.5855fc"]]},{"id":"886a8c6d.47617","type":"debug","z":"c7a11946.e1ad18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1550,"y":1960,"wires":[]},{"id":"edd6e4d.df56118","type":"comment","z":"c7a11946.e1ad18","name":"NETFLIX SEOUL","info":"","x":220,"y":1760,"wires":[]},{"id":"f8e639bd.2b2c68","type":"www-request","z":"c7a11946.e1ad18","name":"","method":"GET","ret":"txt","url":"https://vivid-kite-307111.appspot.com/api/node/cb17dd50-3bb5-4591-99ce-8717e2ed4506?label=Building","follow-redirects":true,"persistent-http":true,"tls":"","x":790,"y":300,"wires":[["553e9e10.0fd5d"]]},{"id":"553e9e10.0fd5d","type":"json","z":"c7a11946.e1ad18","name":"","property":"payload","action":"","pretty":false,"x":930,"y":300,"wires":[["8254c6f4.d19068"]]},{"id":"3119333a.526bac","type":"influxdb out","z":"c7a11946.e1ad18","influxdb":"b35b30c7.7d5","name":"","measurement":"seoul_centropolis","precision":"","retentionPolicy":"","database":"database","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"netflix","x":900,"y":380,"wires":[]},{"id":"c9647b5a.be6468","type":"function","z":"c7a11946.e1ad18","name":"Sorting","func":"msg.payload1 = [{\n            mac_address:msg.payload.sensor_id,\n        },\n        {\n            mac_address:msg.payload.sensor_id,\n            parent:msg.payload.parent,\n            parent_id:msg.payload.parent_id,\n            mask: \"100000000000000000000000000000\",\n            recvmask: \"100000000000000000000000000000\",\n            average: \"1\",\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":380,"y":340,"wires":[["28a9b07f.e06e9"]]},{"id":"8254c6f4.d19068","type":"split","z":"c7a11946.e1ad18","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":230,"y":340,"wires":[["c9647b5a.be6468"]]},{"id":"9aefd3a4.23a79","type":"template","z":"c7a11946.e1ad18","name":"1 HOUR CHECK","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"netflix\")  |> range(start: -1h, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"seoul_centropolis\")  |> filter(fn: (r) => r[\"_field\"] == \"status\")  |> filter(fn: (r) => r[\"mac_address\"] == \"{{mac}}\") |> limit(n:30, offset: 0)  |> sort(columns: [\"_time\"], desc: true)","output":"str","x":730,"y":340,"wires":[["b8bc5140.55d48"]]},{"id":"b8bc5140.55d48","type":"influxdb in","z":"c7a11946.e1ad18","influxdb":"bbc6c1f7.7140d","name":"netflix","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":950,"y":340,"wires":[["f15a209c.424d"]]},{"id":"4fc8fcab.763e24","type":"function","z":"c7a11946.e1ad18","name":"Sorting","func":"msg.payload = [{\n            mask: String(msg.mask),\n            recvmask: String(msg.mask),\n            average: Number(msg.avarage),\n\n        },\n        {\n            mac_address:msg.payload1[0].mac_address,\n            parent:msg.payload1[1].parent,\n            //parent_id:msg.payload1[1].parent_id,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":380,"wires":[["1170202.8bcdde","bf4c04ff.bd0b28"]]},{"id":"f08b503a.b8678","type":"function","z":"c7a11946.e1ad18","name":"mask","func":"var mask1 = msg.payload[0]._value += msg.payload[1]._value += msg.payload[2]._value += msg.payload[3]._value += msg.payload[4]._value += msg.payload[5]._value += msg.payload[6]._value += msg.payload[7]._value += msg.payload[8]._value += msg.payload[9]._value += msg.payload[10]._value += msg.payload[11]._value += msg.payload[12]._value += msg.payload[13]._value += msg.payload[14]._value += msg.payload[15]._value += msg.payload[16]._value += msg.payload[17]._value += msg.payload[18]._value += msg.payload[19]._value += msg.payload[20]._value += msg.payload[21]._value += msg.payload[22]._value += msg.payload[23]._value += msg.payload[24]._value += msg.payload[25]._value += msg.payload[26]._value += msg.payload[27]._value += msg.payload[28]._value +=  msg.payload[29]._value += msg.payload[3]._value;\nmsg.mask = mask1;\nmsg.recvmask = mask1;\nmsg.avarage = (msg.avca2)/30\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":350,"y":380,"wires":[["4fc8fcab.763e24"]]},{"id":"f15a209c.424d","type":"function","z":"c7a11946.e1ad18","name":"avcal","func":"var avcal1 = Number(msg.payload[0]._value) + Number(msg.payload[1]._value) + Number(msg.payload[2]._value) + Number(msg.payload[3]._value) + Number(msg.payload[4]._value) + Number(msg.payload[5]._value) + Number(msg.payload[6]._value) + Number(msg.payload[7]._value) + Number(msg.payload[8]._value) + Number(msg.payload[9]._value) + Number(msg.payload[10]._value) + Number(msg.payload[11]._value) + Number(msg.payload[12]._value) + Number(msg.payload[13]._value) + Number(msg.payload[14]._value) + Number(msg.payload[15]._value) + Number(msg.payload[16]._value) + Number(msg.payload[17]._value) + Number(msg.payload[18]._value) + Number(msg.payload[19]._value) + Number(msg.payload[20]._value) + Number(msg.payload[21]._value) + Number(msg.payload[22]._value) + Number(msg.payload[23]._value) + Number(msg.payload[24]._value) + Number(msg.payload[25]._value) + Number(msg.payload[26]._value) + Number(msg.payload[27]._value) + Number(msg.payload[28]._value) +  Number(msg.payload[29]._value);\nmsg.avca2 = avcal1\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":230,"y":380,"wires":[["f08b503a.b8678"]]},{"id":"1170202.8bcdde","type":"join","z":"c7a11946.e1ad18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":650,"y":380,"wires":[["3119333a.526bac","befeb3c7.8ab2a"]]},{"id":"28a9b07f.e06e9","type":"function","z":"c7a11946.e1ad18","name":"","func":"msg.mac = String(msg.payload1[0].mac_address)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":340,"wires":[["9aefd3a4.23a79"]]},{"id":"5e47a589.95e93c","type":"function","z":"c7a11946.e1ad18","name":"Sorting","func":"msg.payload = [{\n            status: String(msg.payload.occupancy_status),\n            lastUpdated: Number(msg.payload.lastUpdated),\n        },\n        {\n            mac_address : msg.payload.sensorId,\n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1600,"y":2080,"wires":[["6e3a91b6.5b20b"]]},{"id":"6e3a91b6.5b20b","type":"join","z":"c7a11946.e1ad18","name":"","mode":"auto","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1750,"y":2080,"wires":[["cbc60df7.aa7dc"]]},{"id":"cbc60df7.aa7dc","type":"influxdb out","z":"c7a11946.e1ad18","influxdb":"bbc6c1f7.7140d","name":"NETFLIX","measurement":"seoul_centropolis","precision":"","retentionPolicy":"","database":"database","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"netflix","x":1540,"y":1780,"wires":[]},{"id":"befeb3c7.8ab2a","type":"debug","z":"c7a11946.e1ad18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":790,"y":60,"wires":[]},{"id":"b2edc8e3.e48a08","type":"function","z":"c7a11946.e1ad18","name":"","func":"\nmsg.headers = {\n    Authorization: \"Bearer \"+ msg.payload.token\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":300,"wires":[["f8e639bd.2b2c68"]]},{"id":"e686854.6ace178","type":"json","z":"c7a11946.e1ad18","name":"","property":"payload","action":"","pretty":false,"x":510,"y":300,"wires":[["b2edc8e3.e48a08"]]},{"id":"24892f30.f51a5","type":"www-request","z":"c7a11946.e1ad18","name":"netflix Intuitive","method":"POST","ret":"txt","url":"https://vivid-kite-307111.appspot.com/login","follow-redirects":true,"persistent-http":true,"tls":"","x":300,"y":300,"wires":[["e686854.6ace178"]]},{"id":"c9267bc7.c52d38","type":"inject","z":"c7a11946.e1ad18","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"0 0-23 * * *","once":false,"onceDelay":0.1,"topic":"","payload":"{     \"username\": \"netflix_admin\",     \"password\": \"bmV0ZmxpeF9hZG1pbg==\" }","payloadType":"json","x":110,"y":300,"wires":[["24892f30.f51a5"]]},{"id":"bf4c04ff.bd0b28","type":"debug","z":"c7a11946.e1ad18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":800,"y":440,"wires":[]},{"id":"7055dd6e.9f1cb4","type":"http request","z":"ffc755bb.4c2a08","name":"WIPRO MAPIQ ENDPOINT password 0gk?{l)MV$^u^vN^8I#Z username svc_event_data","method":"POST","ret":"txt","paytoqs":"ignore","url":"https://wiproenterprises.mapiq.net/api/telemetry/occupancy/value ","tls":"","persist":true,"proxy":"","authType":"basic","x":2010,"y":460,"wires":[["add3f2e0.71161"]]},{"id":"add3f2e0.71161","type":"debug","z":"ffc755bb.4c2a08","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2250,"y":640,"wires":[]},{"id":"aec0aae6.df1658","type":"join","z":"ffc755bb.4c2a08","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"10","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1550,"y":460,"wires":[["7055dd6e.9f1cb4","add3f2e0.71161"]]},{"id":"c634aa87.59f9c8","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"change","p":"payload[0].mac","pt":"msg","from":"DTE_","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":420,"wires":[["2e27a3de.24e8ec"]]},{"id":"30a64c85.fbf9e4","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"change","p":"payload[0].mac","pt":"msg","from":"DTE_","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":460,"wires":[["351c3a1.c1f78c6"]]},{"id":"e395422a.2c299","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"change","p":"payload[0].mac","pt":"msg","from":"DTE_","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":560,"wires":[["c3df8846.7313c8"]]},{"id":"351c3a1.c1f78c6","type":"timestamp","z":"ffc755bb.4c2a08","name":"","x":990,"y":460,"wires":[["f1283c6.c6aacc"]]},{"id":"c3df8846.7313c8","type":"timestamp","z":"ffc755bb.4c2a08","name":"","x":990,"y":500,"wires":[["1466166b.91e7ba"]]},{"id":"2e27a3de.24e8ec","type":"function","z":"ffc755bb.4c2a08","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1160,"y":420,"wires":[["5037e697.36c518"]]},{"id":"f1283c6.c6aacc","type":"function","z":"ffc755bb.4c2a08","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1160,"y":460,"wires":[["6330c64f.5ef848"]]},{"id":"1466166b.91e7ba","type":"function","z":"ffc755bb.4c2a08","name":"","func":"msg.payload.sensorId = msg.payload[0].mac\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1160,"y":500,"wires":[["90badb47.eb0928"]]},{"id":"5037e697.36c518","type":"template","z":"ffc755bb.4c2a08","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"0\"}","output":"json","x":1350,"y":420,"wires":[["aec0aae6.df1658"]]},{"id":"6330c64f.5ef848","type":"template","z":"ffc755bb.4c2a08","name":"AWAY","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"away\"}","output":"json","x":1330,"y":460,"wires":[["aec0aae6.df1658"]]},{"id":"90badb47.eb0928","type":"template","z":"ffc755bb.4c2a08","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"buildingId\":\"DNB Toorop\",\"floorNumber\":0,\"sensorId\":\"{{payload.sensorId}}\",\"lastUpdated\":\"{{timestamp}}\",\"status\":\"1\"}","output":"json","x":1330,"y":500,"wires":[["aec0aae6.df1658"]]},{"id":"623e7324.05f11c","type":"switch","z":"ffc755bb.4c2a08","name":"standby 1hour 0-3600","property":"timed1","propertyType":"msg","rules":[{"t":"btwn","v":"0","vt":"num","v2":"3600","v2t":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":480,"y":460,"wires":[["30a64c85.fbf9e4"],[]]},{"id":"66846528.9ae3bc","type":"timestamp","z":"ffc755bb.4c2a08","name":"","x":510,"y":420,"wires":[["c634aa87.59f9c8"]]},{"id":"670868c7.fdf0a8","type":"switch","z":"ffc755bb.4c2a08","name":"","property":"payload[1]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":290,"y":580,"wires":[[],["66846528.9ae3bc"],["623e7324.05f11c"]]},{"id":"4ea1049f.0b724c","type":"switch","z":"ffc755bb.4c2a08","name":"","property":"payload[0]._value","propertyType":"msg","rules":[{"t":"cont","v":"03","vt":"str"},{"t":"eq","v":"00","vt":"str"},{"t":"eq","v":"01","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":150,"y":440,"wires":[[],["66846528.9ae3bc"],["e395422a.2c299"]]},{"id":"792bcaa1.8c38a4","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":140,"wires":[["4ea1049f.0b724c"]]},{"id":"28a1ae3f.2e5602","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"change","p":"payload[1]._value","pt":"msg","from":"Perth","fromt":"str","to":"00","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"Brisbane","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":120,"wires":[["792bcaa1.8c38a4"]]},{"id":"6378e466.81d77c","type":"function","z":"ffc755bb.4c2a08","name":"time difference","func":"msg.timed = msg.timenow - msg.paytime0;\nmsg.timediff = msg.paytime0 - msg.paytime1;\nmsg.timed1 = msg.timenow - msg.paytime0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":860,"y":260,"wires":[["28a1ae3f.2e5602"]]},{"id":"d6eb8b3a.8edd98","type":"function","z":"ffc755bb.4c2a08","name":"time divide","func":"msg.timenow = (msg.time)/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":260,"wires":[["6378e466.81d77c"]]},{"id":"f3f3e08c.cdb67","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"set","p":"time","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":260,"wires":[["d6eb8b3a.8edd98"]]},{"id":"bf0a3534.658e28","type":"function","z":"ffc755bb.4c2a08","name":"convert time to unix","func":"msg.paytime2 = (\"original timestamp is \" + msg.payload[0]._time)\nlet timestamp = new Date(msg.payload[0]._time)\nmsg.paytime0 = (timestamp.getTime())/1000\nmsg.paytime3 = (\"original timestamp is \" + msg.payload[1]._time)\nlet timestamp1 = new Date(msg.payload[1]._time)\nmsg.paytime1 = (timestamp1.getTime())/1000\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":260,"wires":[["f3f3e08c.cdb67"]]},{"id":"1f0d16a8.cabd79","type":"change","z":"ffc755bb.4c2a08","name":"","rules":[{"t":"change","p":"payload[0]._value","pt":"msg","from":"available","fromt":"str","to":"00","tot":"num"},{"t":"change","p":"payload[0]._value","pt":"msg","from":"occupied","fromt":"str","to":"01","tot":"num"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"occupied","fromt":"str","to":"01","tot":"str"},{"t":"change","p":"payload[1]._value","pt":"msg","from":"available","fromt":"str","to":"00","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":180,"wires":[["bf0a3534.658e28"]]},{"id":"48621dd1.827a64","type":"split","z":"ffc755bb.4c2a08","name":"","splt":"\\n","spltType":"str","arraySplt":"2","arraySpltType":"len","stream":false,"addname":"","x":290,"y":180,"wires":[["1f0d16a8.cabd79"]]},{"id":"33ec1cc9.d28c14","type":"influxdb in","z":"ffc755bb.4c2a08","influxdb":"76d13def.f56924","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","org":"mark@switchfi.co.za","x":450,"y":120,"wires":[["48621dd1.827a64"]]},{"id":"b55b999d.f5eef8","type":"template","z":"ffc755bb.4c2a08","name":"get all sensor live","field":"query","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"from(bucket: \"dnb\") |> range(start:-1d, stop: now())  |> filter(fn: (r) => r[\"_measurement\"] == \"wipro_dt_data\")  |> filter(fn: (r) => r[\"site\"] == \"dnb\") |> filter(fn: (r) => r[\"_field\"] == \"status1\")  |> sort(columns: [\"_time\"], desc: true)  |> limit(n:2, offset: 0)","output":"str","x":270,"y":120,"wires":[["33ec1cc9.d28c14"]]},{"id":"e76e24c3.cc5798","type":"inject","z":"ffc755bb.4c2a08","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"120","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":240,"wires":[["b55b999d.f5eef8"]]},{"id":"b89c4f3c.83294","type":"function","z":"c29b0066.5accc","name":"c4:5b:be:8c:62:64","func":"msg.mac = \"c4:5b:be:8c:62:64\"\nmsg.topic = \"sensor/c4:5b:be:8c:62:64/data\"\nmsg.device = \"01\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":140,"wires":[["71eb5e37.be04"]]},{"id":"c19341ee.50abd","type":"function","z":"c29b0066.5accc","name":"c4:5b:be:8c:62:64","func":"msg.mac = \"c4:5b:be:8c:62:64\"\nmsg.topic = \"sensor/c4:5b:be:8c:62:64/data\"\nmsg.device = \"01\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":430,"y":100,"wires":[["ad095e5.29525a"]]},{"id":"4ee27e70.8bb59","type":"mqtt in","z":"c29b0066.5accc","name":"","topic":"stat/pir/C4:5B:BE:8C:62:64/POWER","qos":"2","datatype":"auto","broker":"fb1189d8.7a3418","x":180,"y":140,"wires":[["b89c4f3c.83294"]]},{"id":"e7a72ed1.c506c","type":"mqtt in","z":"c29b0066.5accc","name":"","topic":"tele/pir/C4:5B:BE:8C:62:64/STATE","qos":"2","datatype":"auto","broker":"d72c99e7.e5b118","x":180,"y":100,"wires":[["c19341ee.50abd"]]},{"id":"71eb5e37.be04","type":"looptimer","z":"c29b0066.5accc","duration":"2","units":"Minute","maxloops":"5","maxtimeout":"3","maxtimeoutunits":"Minute","name":"10 min loop","x":790,"y":160,"wires":[["8921a6ea.994778"],[]]},{"id":"8921a6ea.994778","type":"change","z":"c29b0066.5accc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":140,"wires":[["76b70b5f.ce5e34"]]},{"id":"ad095e5.29525a","type":"change","z":"c29b0066.5accc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":100,"wires":[["d3c578a0.944f28"]]},{"id":"d3c578a0.944f28","type":"template","z":"c29b0066.5accc","name":"NO MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"dev_id\":\"{{mac}}\",\"data\":[{\"dist\":[9132,9135,9135,9137,9136,9138,9140,9139,9136,9135,9139,9136,9137,9137,9138,9135,9138,9137,9135,9136,9138,9136,9136,9134]},{\"temp\":\"{{device}}\"},{\"hum\":0},{\"vin\":409}],\"time\":{{payload}},\"transmit_time\":{{payload}},\"version\":\"2.0\",\"prox_count\":5,\"sample_interval\":5000}","output":"json","x":1230,"y":100,"wires":[["c41f221b.e63bb"]]},{"id":"76b70b5f.ce5e34","type":"template","z":"c29b0066.5accc","name":"MOVEMENT","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"dev_id\":\"{{mac}}\",\"data\":[{\"dist\":[9132,9135,9135,9137,9136,9138,9140,9139,9136,9135,9139,9136,9137,9137,9138,9135,9138,9090,9100,9110,9120,9130,9140,9150]},{\"temp\":\"{{device}}\"},{\"hum\":0},{\"vin\":409}],\"time\":{{payload}},\"transmit_time\":{{payload}},\"version\":\"2.0\",\"prox_count\":5,\"sample_interval\":5000}","output":"json","x":1210,"y":140,"wires":[["c5c48087.285f5"]]},{"id":"8ddbb249.af912","type":"timeframerlt","z":"c29b0066.5accc","name":"5 by 5","throttleType":"count","timeLimit":"5","timeLimitType":"seconds","countLimit":"5","byresetcountLimit":0,"x":650,"y":200,"wires":[["71eb5e37.be04"]]},{"id":"e5672572.4cd288","type":"function","z":"c29b0066.5accc","name":"44:17:93:50:86:D4","func":"msg.mac = \"44:17:93:50:86:d4\"\nmsg.topic = \"sensor/44:17:93:50:86:d4/data\"\nmsg.device = \"01\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":240,"wires":[["8f030449.3d8638"]]},{"id":"260fc0ba.b8923","type":"function","z":"c29b0066.5accc","name":"44:17:93:50:86:d4","func":"msg.mac = \"44:17:93:50:86:d4\"\nmsg.topic = \"sensor/44:17:93:50:86:d4/data\"\nmsg.device = \"01\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":430,"y":200,"wires":[["ad095e5.29525a"]]},{"id":"249d6dd0.c73602","type":"mqtt in","z":"c29b0066.5accc","name":"","topic":"stat/pir/44:17:93:50:86:D4/POWER","qos":"2","datatype":"auto","broker":"fb1189d8.7a3418","x":180,"y":240,"wires":[["e5672572.4cd288"]]},{"id":"ace2755d.34d058","type":"mqtt in","z":"c29b0066.5accc","name":"","topic":"tele/pir/44:17:93:50:86:D4/STATE","qos":"2","datatype":"auto","broker":"d72c99e7.e5b118","x":170,"y":200,"wires":[["260fc0ba.b8923"]]},{"id":"c41f221b.e63bb","type":"timestamp","z":"c29b0066.5accc","name":"","x":470,"y":400,"wires":[["aa164a72.bea568"]]},{"id":"c5c48087.285f5","type":"timestamp","z":"c29b0066.5accc","name":"","x":470,"y":480,"wires":[["56e6deaf.2412f"]]},{"id":"56e6deaf.2412f","type":"change","z":"c29b0066.5accc","name":"","rules":[{"t":"set","p":"timestamp","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":480,"wires":[["f1993a07.33b718"]]},{"id":"aa164a72.bea568","type":"change","z":"c29b0066.5accc","name":"","rules":[{"t":"set","p":"timestamp","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":400,"wires":[["581da14a.8279e"]]},{"id":"581da14a.8279e","type":"template","z":"c29b0066.5accc","name":"OCCUPANCY DATA 0","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"sensorId\":\"{{payload.dev_id}}\",\"lastUpdated\":\"{{timestamp}}\",\"occupancy_status\":\"0\",\"count_status\":\"\",\"temp_status\":\"\"}","output":"str","x":860,"y":400,"wires":[["e5416a5d.70e398"]]},{"id":"f1993a07.33b718","type":"template","z":"c29b0066.5accc","name":"OCCUPANCY DATA 1","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\"sensorId\":\"{{payload.dev_id}}\",\"lastUpdated\":\"{{timestamp}}\",\"occupancy_status\":\"1\",\"count_status\":\"\",\"temp_status\":\"\"}","output":"str","x":860,"y":480,"wires":[["3a732728.b55df8"]]},{"id":"3a732728.b55df8","type":"json","z":"c29b0066.5accc","name":"","property":"payload","action":"","pretty":false,"x":1050,"y":480,"wires":[["4015833f.0f2e3c"]]},{"id":"e5416a5d.70e398","type":"json","z":"c29b0066.5accc","name":"","property":"payload","action":"","pretty":false,"x":1030,"y":400,"wires":[["4015833f.0f2e3c"]]},{"id":"4015833f.0f2e3c","type":"function","z":"c29b0066.5accc","name":"Sorting","func":"msg.payload = [{\n            mac_address : msg.payload.sensorId,\n            status: String(msg.payload.occupancy_status),\n            lastUpdated: Number(msg.payload.lastUpdated),\n        },\n        {\n            mac_address : msg.payload.sensorId,\n            \n        },\n\n];\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1280,"y":460,"wires":[["e477656c.047e88","209133a1.7d962c"]]},{"id":"e3680e8c.96029","type":"influxdb out","z":"c29b0066.5accc","influxdb":"bbc6c1f7.7140d","name":"","measurement":"Sensors","precision":"","retentionPolicy":"","database":"database","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"mark@switchfi.co.za","bucket":"Design4","x":1800,"y":540,"wires":[]},{"id":"e477656c.047e88","type":"debug","z":"c29b0066.5accc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1760,"y":480,"wires":[]},{"id":"209133a1.7d962c","type":"join","z":"c29b0066.5accc","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"60","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1450,"y":560,"wires":[["e3680e8c.96029"]]},{"id":"8f030449.3d8638","type":"looptimer","z":"c29b0066.5accc","duration":"2","units":"Minute","maxloops":"5","maxtimeout":"3","maxtimeoutunits":"Minute","name":"10 min loop","x":770,"y":220,"wires":[["8921a6ea.994778"],[]]}]